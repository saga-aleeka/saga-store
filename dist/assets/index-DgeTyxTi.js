import{r as co,g as uo,a as ii,c as Gd}from"./vendor-Cfn2fMNg.js";function Kd(e,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();var Nr={exports:{}},zn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa;function Yd(){if(oa)return zn;oa=1;var e=co(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(c,u,f){var m,d={},p=null,x=null;f!==void 0&&(p=""+f),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(x=u.ref);for(m in u)r.call(u,m)&&!a.hasOwnProperty(m)&&(d[m]=u[m]);if(c&&c.defaultProps)for(m in u=c.defaultProps,u)d[m]===void 0&&(d[m]=u[m]);return{$$typeof:n,type:c,key:p,ref:x,props:d,_owner:o.current}}return zn.Fragment=s,zn.jsx=i,zn.jsxs=i,zn}var aa;function qd(){return aa||(aa=1,Nr.exports=Yd()),Nr.exports}var t=qd(),l=co();const B=uo(l),li=Kd({__proto__:null,default:B},[l]);var xs={},ia;function Jd(){if(ia)return xs;ia=1;var e=ii();return xs.createRoot=e.createRoot,xs.hydrateRoot=e.hydrateRoot,xs}var Xd=Jd();const Zd=uo(Xd);function ci(e){return typeof e=="string"?e:""}function vt(e,n,s){return ci(e).replace(n,s)}function Xe(e){return ci(e).trim()}var os=ii();const di=uo(os);function Qd(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const eu=e=>{switch(e){case"success":return su;case"info":return ou;case"warning":return ru;case"error":return au;default:return null}},tu=Array(12).fill(0),nu=({visible:e,className:n})=>B.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},B.createElement("div",{className:"sonner-spinner"},tu.map((s,r)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),su=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ru=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ou=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),au=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),iu=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),lu=()=>{const[e,n]=B.useState(document.hidden);return B.useEffect(()=>{const s=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e};let Br=1;class cu{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const s=this.subscribers.indexOf(n);this.subscribers.splice(s,1)}),this.publish=n=>{this.subscribers.forEach(s=>s(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var s;const{message:r,...o}=n,a=typeof n?.id=="number"||((s=n.id)==null?void 0:s.length)>0?n.id:Br++,i=this.toasts.find(u=>u.id===a),c=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(u=>u.id===a?(this.publish({...u,...n,id:a,title:r}),{...u,...n,id:a,dismissible:c,title:r}):u):this.addToast({title:r,...o,dismissible:c,id:a}),a},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:n,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),n),this.message=(n,s)=>this.create({...s,message:n}),this.error=(n,s)=>this.create({...s,message:n,type:"error"}),this.success=(n,s)=>this.create({...s,type:"success",message:n}),this.info=(n,s)=>this.create({...s,type:"info",message:n}),this.warning=(n,s)=>this.create({...s,type:"warning",message:n}),this.loading=(n,s)=>this.create({...s,type:"loading",message:n}),this.promise=(n,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:n,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const o=Promise.resolve(n instanceof Function?n():n);let a=r!==void 0,i;const c=o.then(async f=>{if(i=["resolve",f],B.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(uu(f)&&!f.ok){a=!1;const d=typeof s.error=="function"?await s.error(`HTTP error! status: ${f.status}`):s.error,p=typeof s.description=="function"?await s.description(`HTTP error! status: ${f.status}`):s.description,b=typeof d=="object"&&!B.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:p,...b})}else if(f instanceof Error){a=!1;const d=typeof s.error=="function"?await s.error(f):s.error,p=typeof s.description=="function"?await s.description(f):s.description,b=typeof d=="object"&&!B.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:p,...b})}else if(s.success!==void 0){a=!1;const d=typeof s.success=="function"?await s.success(f):s.success,p=typeof s.description=="function"?await s.description(f):s.description,b=typeof d=="object"&&!B.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:p,...b})}}).catch(async f=>{if(i=["reject",f],s.error!==void 0){a=!1;const m=typeof s.error=="function"?await s.error(f):s.error,d=typeof s.description=="function"?await s.description(f):s.description,x=typeof m=="object"&&!B.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:d,...x})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),s.finally==null||s.finally.call(s)}),u=()=>new Promise((f,m)=>c.then(()=>i[0]==="reject"?m(i[1]):f(i[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(n,s)=>{const r=s?.id||Br++;return this.create({jsx:n(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Je=new cu,du=(e,n)=>{const s=n?.id||Br++;return Je.addToast({title:e,...n,id:s}),s},uu=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",mu=du,fu=()=>Je.toasts,pu=()=>Je.getActiveToasts(),Ne=Object.assign(mu,{success:Je.success,info:Je.info,warning:Je.warning,error:Je.error,custom:Je.custom,message:Je.message,promise:Je.promise,dismiss:Je.dismiss,loading:Je.loading},{getHistory:fu,getToasts:pu});Qd("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function gs(e){return e.label!==void 0}const hu=3,xu="24px",gu="16px",la=4e3,vu=356,yu=14,bu=45,wu=200;function St(...e){return e.filter(Boolean).join(" ")}function ju(e){const[n,s]=e.split("-"),r=[];return n&&r.push(n),s&&r.push(s),r}const Su=e=>{var n,s,r,o,a,i,c,u,f;const{invert:m,toast:d,unstyled:p,interacting:x,setHeights:b,visibleToasts:h,heights:g,index:y,toasts:v,expanded:w,removeToast:T,defaultRichColors:j,closeButton:C,style:A,cancelButtonStyle:N,actionButtonStyle:M,className:I="",descriptionClassName:z="",duration:V,position:K,gap:ee,expandByDefault:ue,classNames:G,icons:oe,closeButtonAriaLabel:E="Close toast"}=e,[O,U]=B.useState(null),[F,ge]=B.useState(null),[S,P]=B.useState(!1),[H,ie]=B.useState(!1),[R,W]=B.useState(!1),[le,Y]=B.useState(!1),[Q,D]=B.useState(!1),[te,me]=B.useState(0),[_e,Ce]=B.useState(0),Se=B.useRef(d.duration||V||la),Ve=B.useRef(null),De=B.useRef(null),Ft=y===0,Xt=y+1<=h,Fe=d.type,_=d.dismissible!==!1,J=d.className||"",q=d.descriptionClassName||"",ae=B.useMemo(()=>g.findIndex(ve=>ve.toastId===d.id)||0,[g,d.id]),se=B.useMemo(()=>{var ve;return(ve=d.closeButton)!=null?ve:C},[d.closeButton,C]),k=B.useMemo(()=>d.duration||V||la,[d.duration,V]),L=B.useRef(0),$=B.useRef(0),ne=B.useRef(0),X=B.useRef(null),[fe,we]=K.split("-"),Te=B.useMemo(()=>g.reduce((ve,Be,He)=>He>=ae?ve:ve+Be.height,0),[g,ae]),Ze=lu(),Pe=d.invert||m,Qe=Fe==="loading";$.current=B.useMemo(()=>ae*ee+Te,[ae,Te]),B.useEffect(()=>{Se.current=k},[k]),B.useEffect(()=>{P(!0)},[]),B.useEffect(()=>{const ve=De.current;if(ve){const Be=ve.getBoundingClientRect().height;return Ce(Be),b(He=>[{toastId:d.id,height:Be,position:d.position},...He]),()=>b(He=>He.filter(et=>et.toastId!==d.id))}},[b,d.id]),B.useLayoutEffect(()=>{if(!S)return;const ve=De.current,Be=ve.style.height;ve.style.height="auto";const He=ve.getBoundingClientRect().height;ve.style.height=Be,Ce(He),b(et=>et.find(Ue=>Ue.toastId===d.id)?et.map(Ue=>Ue.toastId===d.id?{...Ue,height:He}:Ue):[{toastId:d.id,height:He,position:d.position},...et])},[S,d.title,d.description,b,d.id,d.jsx,d.action,d.cancel]);const We=B.useCallback(()=>{ie(!0),me($.current),b(ve=>ve.filter(Be=>Be.toastId!==d.id)),setTimeout(()=>{T(d)},wu)},[d,T,b,$]);B.useEffect(()=>{if(d.promise&&Fe==="loading"||d.duration===1/0||d.type==="loading")return;let ve;return w||x||Ze?(()=>{if(ne.current<L.current){const et=new Date().getTime()-L.current;Se.current=Se.current-et}ne.current=new Date().getTime()})():(()=>{Se.current!==1/0&&(L.current=new Date().getTime(),ve=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),We()},Se.current))})(),()=>clearTimeout(ve)},[w,x,d,Fe,Ze,We]),B.useEffect(()=>{d.delete&&(We(),d.onDismiss==null||d.onDismiss.call(d,d))},[We,d.delete]);function Fn(){var ve;if(oe?.loading){var Be;return B.createElement("div",{className:St(G?.loader,d==null||(Be=d.classNames)==null?void 0:Be.loader,"sonner-loader"),"data-visible":Fe==="loading"},oe.loading)}return B.createElement(nu,{className:St(G?.loader,d==null||(ve=d.classNames)==null?void 0:ve.loader),visible:Fe==="loading"})}const ct=d.icon||oe?.[Fe]||eu(Fe);var mn,Bn;return B.createElement("li",{tabIndex:0,ref:De,className:St(I,J,G?.toast,d==null||(n=d.classNames)==null?void 0:n.toast,G?.default,G?.[Fe],d==null||(s=d.classNames)==null?void 0:s[Fe]),"data-sonner-toast":"","data-rich-colors":(mn=d.richColors)!=null?mn:j,"data-styled":!(d.jsx||d.unstyled||p),"data-mounted":S,"data-promise":!!d.promise,"data-swiped":Q,"data-removed":H,"data-visible":Xt,"data-y-position":fe,"data-x-position":we,"data-index":y,"data-front":Ft,"data-swiping":R,"data-dismissible":_,"data-type":Fe,"data-invert":Pe,"data-swipe-out":le,"data-swipe-direction":F,"data-expanded":!!(w||ue&&S),"data-testid":d.testId,style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${H?te:$.current}px`,"--initial-height":ue?"auto":`${_e}px`,...A,...d.style},onDragEnd:()=>{W(!1),U(null),X.current=null},onPointerDown:ve=>{ve.button!==2&&(Qe||!_||(Ve.current=new Date,me($.current),ve.target.setPointerCapture(ve.pointerId),ve.target.tagName!=="BUTTON"&&(W(!0),X.current={x:ve.clientX,y:ve.clientY})))},onPointerUp:()=>{var ve,Be,He;if(le||!_)return;X.current=null;const et=Number(((ve=De.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ps=Number(((Be=De.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ue=new Date().getTime()-((He=Ve.current)==null?void 0:He.getTime()),ot=O==="x"?et:ps,hs=Math.abs(ot)/Ue;if(Math.abs(ot)>=bu||hs>.11){me($.current),d.onDismiss==null||d.onDismiss.call(d,d),ge(O==="x"?et>0?"right":"left":ps>0?"down":"up"),We(),Y(!0);return}else{var dt,ut;(dt=De.current)==null||dt.style.setProperty("--swipe-amount-x","0px"),(ut=De.current)==null||ut.style.setProperty("--swipe-amount-y","0px")}D(!1),W(!1),U(null)},onPointerMove:ve=>{var Be,He,et;if(!X.current||!_||((Be=window.getSelection())==null?void 0:Be.toString().length)>0)return;const Ue=ve.clientY-X.current.y,ot=ve.clientX-X.current.x;var hs;const dt=(hs=e.swipeDirections)!=null?hs:ju(K);!O&&(Math.abs(ot)>1||Math.abs(Ue)>1)&&U(Math.abs(ot)>Math.abs(Ue)?"x":"y");let ut={x:0,y:0};const ra=Zt=>1/(1.5+Math.abs(Zt)/20);if(O==="y"){if(dt.includes("top")||dt.includes("bottom"))if(dt.includes("top")&&Ue<0||dt.includes("bottom")&&Ue>0)ut.y=Ue;else{const Zt=Ue*ra(Ue);ut.y=Math.abs(Zt)<Math.abs(Ue)?Zt:Ue}}else if(O==="x"&&(dt.includes("left")||dt.includes("right")))if(dt.includes("left")&&ot<0||dt.includes("right")&&ot>0)ut.x=ot;else{const Zt=ot*ra(ot);ut.x=Math.abs(Zt)<Math.abs(ot)?Zt:ot}(Math.abs(ut.x)>0||Math.abs(ut.y)>0)&&D(!0),(He=De.current)==null||He.style.setProperty("--swipe-amount-x",`${ut.x}px`),(et=De.current)==null||et.style.setProperty("--swipe-amount-y",`${ut.y}px`)}},se&&!d.jsx&&Fe!=="loading"?B.createElement("button",{"aria-label":E,"data-disabled":Qe,"data-close-button":!0,onClick:Qe||!_?()=>{}:()=>{We(),d.onDismiss==null||d.onDismiss.call(d,d)},className:St(G?.closeButton,d==null||(r=d.classNames)==null?void 0:r.closeButton)},(Bn=oe?.close)!=null?Bn:iu):null,(Fe||d.icon||d.promise)&&d.icon!==null&&(oe?.[Fe]!==null||d.icon)?B.createElement("div",{"data-icon":"",className:St(G?.icon,d==null||(o=d.classNames)==null?void 0:o.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Fn():null,d.type!=="loading"?ct:null):null,B.createElement("div",{"data-content":"",className:St(G?.content,d==null||(a=d.classNames)==null?void 0:a.content)},B.createElement("div",{"data-title":"",className:St(G?.title,d==null||(i=d.classNames)==null?void 0:i.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?B.createElement("div",{"data-description":"",className:St(z,q,G?.description,d==null||(c=d.classNames)==null?void 0:c.description)},typeof d.description=="function"?d.description():d.description):null),B.isValidElement(d.cancel)?d.cancel:d.cancel&&gs(d.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||N,onClick:ve=>{gs(d.cancel)&&_&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,ve),We())},className:St(G?.cancelButton,d==null||(u=d.classNames)==null?void 0:u.cancelButton)},d.cancel.label):null,B.isValidElement(d.action)?d.action:d.action&&gs(d.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||M,onClick:ve=>{gs(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,ve),!ve.defaultPrevented&&We())},className:St(G?.actionButton,d==null||(f=d.classNames)==null?void 0:f.actionButton)},d.action.label):null)};function ca(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Nu(e,n){const s={};return[e,n].forEach((r,o)=>{const a=o===1,i=a?"--mobile-offset":"--offset",c=a?gu:xu;function u(f){["top","right","bottom","left"].forEach(m=>{s[`${i}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?s[`${i}-${f}`]=c:s[`${i}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):u(c)}),s}const Cu=B.forwardRef(function(n,s){const{id:r,invert:o,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:c,closeButton:u,className:f,offset:m,mobileOffset:d,theme:p="light",richColors:x,duration:b,style:h,visibleToasts:g=hu,toastOptions:y,dir:v=ca(),gap:w=yu,icons:T,containerAriaLabel:j="Notifications"}=n,[C,A]=B.useState([]),N=B.useMemo(()=>r?C.filter(S=>S.toasterId===r):C.filter(S=>!S.toasterId),[C,r]),M=B.useMemo(()=>Array.from(new Set([a].concat(N.filter(S=>S.position).map(S=>S.position)))),[N,a]),[I,z]=B.useState([]),[V,K]=B.useState(!1),[ee,ue]=B.useState(!1),[G,oe]=B.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),E=B.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=B.useRef(null),F=B.useRef(!1),ge=B.useCallback(S=>{A(P=>{var H;return(H=P.find(ie=>ie.id===S.id))!=null&&H.delete||Je.dismiss(S.id),P.filter(({id:ie})=>ie!==S.id)})},[]);return B.useEffect(()=>Je.subscribe(S=>{if(S.dismiss){requestAnimationFrame(()=>{A(P=>P.map(H=>H.id===S.id?{...H,delete:!0}:H))});return}setTimeout(()=>{di.flushSync(()=>{A(P=>{const H=P.findIndex(ie=>ie.id===S.id);return H!==-1?[...P.slice(0,H),{...P[H],...S},...P.slice(H+1)]:[S,...P]})})})}),[C]),B.useEffect(()=>{if(p!=="system"){oe(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;const S=window.matchMedia("(prefers-color-scheme: dark)");try{S.addEventListener("change",({matches:P})=>{oe(P?"dark":"light")})}catch{S.addListener(({matches:H})=>{try{oe(H?"dark":"light")}catch(ie){console.error(ie)}})}},[p]),B.useEffect(()=>{C.length<=1&&K(!1)},[C]),B.useEffect(()=>{const S=P=>{var H;if(i.every(W=>P[W]||P.code===W)){var R;K(!0),(R=E.current)==null||R.focus()}P.code==="Escape"&&(document.activeElement===E.current||(H=E.current)!=null&&H.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[i]),B.useEffect(()=>{if(E.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,F.current=!1)}},[E.current]),B.createElement("section",{ref:s,"aria-label":`${j} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((S,P)=>{var H;const[ie,R]=S.split("-");return N.length?B.createElement("ol",{key:S,dir:v==="auto"?ca():v,tabIndex:-1,ref:E,className:f,"data-sonner-toaster":!0,"data-sonner-theme":G,"data-y-position":ie,"data-x-position":R,style:{"--front-toast-height":`${((H=I[0])==null?void 0:H.height)||0}px`,"--width":`${vu}px`,"--gap":`${w}px`,...h,...Nu(m,d)},onBlur:W=>{F.current&&!W.currentTarget.contains(W.relatedTarget)&&(F.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||F.current||(F.current=!0,U.current=W.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{ee||K(!1)},onDragEnd:()=>K(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||ue(!0)},onPointerUp:()=>ue(!1)},N.filter(W=>!W.position&&P===0||W.position===S).map((W,le)=>{var Y,Q;return B.createElement(Su,{key:W.id,icons:T,index:le,toast:W,defaultRichColors:x,duration:(Y=y?.duration)!=null?Y:b,className:y?.className,descriptionClassName:y?.descriptionClassName,invert:o,visibleToasts:g,closeButton:(Q=y?.closeButton)!=null?Q:u,interacting:ee,position:S,style:y?.style,unstyled:y?.unstyled,classNames:y?.classNames,cancelButtonStyle:y?.cancelButtonStyle,actionButtonStyle:y?.actionButtonStyle,closeButtonAriaLabel:y?.closeButtonAriaLabel,removeToast:ge,toasts:N.filter(D=>D.position==W.position),heights:I.filter(D=>D.position==W.position),setHeights:z,expandByDefault:c,gap:w,expanded:V,swipeDirections:n.swipeDirections})})):null}))}),mo="https://epsaukgvgadnaeplsgcr.supabase.co",gt="sb_publishable_9MoTDYr319FY717-f3aldA_G7-b8WhR",nt=Gd(mo,gt,{realtime:{params:{eventsPerSecond:10}}});function ku(){if(typeof window>"u"||typeof localStorage>"u")return{id:"system",name:"System"};try{const e=localStorage.getItem("saga-user-info");if(e){const n=JSON.parse(e);if(n&&typeof n=="object"){const s=n.id||n.initials||"anonymous",r=n.name||n.fullName||n.initials||s;return{id:s,name:r}}}}catch{}return{id:"anonymous",name:"Anonymous User"}}const vs={81:"box_9x9",25:"box_5x5",20:"rack_5x4",63:"rack_7x14"};function Tu(e){const n=e?.containerType??e?.type;if(typeof n=="string"&&n)return Eu[n]||n;const s=Number(e?.totalSlots??e?.total_slots);if(!Number.isNaN(s)&&vs[s])return vs[s];const r=Number(e?.occupiedSlots??e?.occupied_slots??(Array.isArray(e?.samples)?e.samples.length:void 0));if(!Number.isNaN(r)&&vs[r])return vs[r]}const Au={box_9x9:"9x9-box",box_5x5:"5x5-box",rack_5x4:"5x4-rack",rack_9x9:"9x9-rack",rack_7x14:"7x14-rack"},Eu={"9x9-box":"box_9x9","5x5-box":"box_5x5","5x4-rack":"rack_5x4","9x9-rack":"rack_9x9","7x14-rack":"rack_7x14"};function Iu(e){return{id:e.id,name:e.name,containerType:Au[e.type]||e.type,sampleType:e.sample_type,status:e.status,location:e.location_freezer,occupiedSlots:e.occupied_slots??0,totalSlots:(e.total_slots??0)===81&&(e.sample_type==="DP Pools"||e.sample_type==="DP Pools")?80:e.total_slots??0,lastUpdated:e.last_updated,temperature:e.temperature,isTraining:e.is_training,isArchived:e.status==="inactive"||e.is_archived,history:e.history}}async function Nt(){const{data:e,error:n}=await nt.from("containers").select("*");if(console.log("[fetchContainers] Supabase response:",{data:e,error:n}),n)throw n;const s=(e||[]).map(Iu);function r(o){if(!o||typeof o!="string")return null;const a=o.trim().match(/(\d+)\s*$/);if(!a)return null;const i=Number(a[1]);return Number.isFinite(i)?i:null}return s.sort((o,a)=>{const i=(o.containerType||"").toLowerCase(),c=(a.containerType||"").toLowerCase();if(i<c)return-1;if(i>c)return 1;const u=r(o.name),f=r(a.name);if(u!==null&&f!==null){if(u<f)return-1;if(u>f)return 1}else{if(u!==null&&f===null)return-1;if(u===null&&f!==null)return 1}const m=(o.name||"").toLowerCase(),d=(a.name||"").toLowerCase();return m<d?-1:m>d?1:0}),s}function Pu(e){const n=Tu(e);if(!n)throw new Error("Unable to determine container type for Supabase upsert");const s={id:e.id,name:e.name,type:n,sample_type:e.sampleType,status:e.status,location_freezer:e.location,occupied_slots:e.occupiedSlots,total_slots:e.totalSlots,last_updated:e.lastUpdated,temperature:e.temperature,is_training:e.isTraining,is_archived:e.isArchived,history:e.history},r=ku();r.id&&(s.updated_by=r.id,!s.id&&!s.created_by&&(s.created_by=r.id));const o=new Date().toISOString();return s.updated_at||(s.updated_at=o),!s.id&&!s.created_at&&(s.created_at=o),s}async function Ts(e){const n=Pu(e),{data:s,error:r}=await nt.from("containers").upsert(n).select();if(r)throw r;return s}const zr=`${mo}/functions/v1/make-server-aaac77aa`,fo=[zr];async function ui(e,n={}){const s=[];for(const o of fo)try{const a=`${o}${e.startsWith("/")?e:`/${e}`}`;return await Du(a,n)}catch(a){s.push({base:o,err:a})}const r=new Error("All server function endpoints failed");throw r.details=s,r}const Ru=5e3;async function Du(e,n={}){const s=new AbortController,r=setTimeout(()=>s.abort(),Ru);try{const o={"Content-Type":"application/json"};gt&&(o.Authorization=`Bearer ${gt}`),typeof zr=="string"&&e.startsWith(zr)&&gt&&(o.apikey=gt);const a=await fetch(e,{...n,signal:s.signal,headers:{...o,...n.headers}});return clearTimeout(r),a}catch(o){throw clearTimeout(r),o instanceof Error&&o.name==="AbortError"?new Error("Request timeout - server functions may not be deployed"):o}}function mi(e){const n=e?.data;return n&&typeof n=="object"&&!Array.isArray(n)?n:{}}function fi(e){const n=mi(e);return{...e,history:n.history??e.history??[],status:n.status??e.status,storage_date:n.storageDate??e.storage_date??e.created_at,last_accessed:n.lastAccessed??e.last_accessed??e.updated_at,is_archived:!!(n.is_archived??e.is_archived??!1)}}async function Gn(e){let n=nt.from("samples").select("*");e&&(n=n.eq("container_id",e));const{data:s,error:r}=await n;if(r)throw r;return(s||[]).map(fi)}function _u(e){const n=new Set(["id","container_id","sample_id","position","created_at","updated_at"]),s={...e};if(s.position!==void 0&&s.position!==null)try{s.position=String(s.position).trim().toUpperCase()}catch{s.position=s.position}if(s.sampleId&&!s.sample_id&&(s.sample_id=s.sampleId),s.sample_id!==void 0&&s.sample_id!==null)try{s.sample_id=String(s.sample_id).trim().toUpperCase()}catch{s.sample_id=String(s.sample_id).trim()}delete s.container_name,delete s.sampleId,s.containerId&&!s.container_id&&(s.container_id=s.containerId),delete s.containerId;const r=s.storage_date??s.storageDate;r&&!s.created_at&&(s.created_at=r),delete s.storage_date,delete s.storageDate;const o=s.last_accessed??s.lastAccessed;o&&!s.updated_at&&(s.updated_at=o),delete s.last_accessed,delete s.lastAccessed;const a=mi(e);e.is_archived!==void 0&&a.is_archived===void 0&&(a.is_archived=e.is_archived);const i={},c={...a};r&&(c.storageDate=r),o&&(c.lastAccessed=o),delete s.data;for(const[u,f]of Object.entries(s))f!=null&&(n.has(u)?i[u]=f instanceof Date?f.toISOString():f:u!=="data"&&(c[u]=f));return Object.keys(c).length>0&&(i.data=c),i}async function Ms(e){const n=await Nt(),s=n.find(a=>a.id===e.container_id||a.id===e.containerId),r=s?.isArchived||s?.status==="archived",o=_u(e);if(!r){const a=o.sample_id;if(a){const{data:i,error:c}=await nt.from("samples").select("id, container_id").eq("sample_id",a);if(c)throw c;for(const f of i||[])if(f.container_id!==o.container_id){const m=n.find(p=>p.id===f.container_id);m?.isArchived||m?.status==="archived"||await nt.from("samples").delete().eq("id",f.id)}const u=(i||[]).find(f=>f.container_id===o.container_id);u&&u.id&&(o.id=u.id)}}try{const{data:a,error:i}=await nt.from("samples").upsert(o).select();if(!i)return a;const c=String(i?.message||i||"").toLowerCase();if(c.includes("row-level security")||c.includes("permission")||c.includes("policy")){console.warn("[upsertSample] Direct upsert blocked by RLS - falling back to server function",c);try{const u=async()=>{const f=await ui("/samples",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gt}`,apikey:gt},body:JSON.stringify({sample:o})});if(!f.ok){const m=await f.text().catch(()=>"no body");throw new Error(`Server samples upsert failed: ${f.status} ${f.statusText} ${m}`)}return await f.json()};try{return(await u()).data}catch(f){return console.warn("[upsertSample] server fallback first attempt failed, retrying...",f),await new Promise(d=>setTimeout(d,250)),(await u()).data}}catch(u){const f=u instanceof Error?u:new Error(String(u));throw f.message=`[upsertSample][server-fallback] ${f.message} -- payload-sample_id=${o.sample_id} container_id=${o.container_id} api=${fo.join("|")}/samples`,f.hint="Check that server functions are deployed and accessible, and that CORS/options are allowed for your origin",f}}throw i}catch(a){throw a}}async function Mu(e,n){if(!e)return null;try{const s=String(e).trim().toUpperCase();let r=nt.from("samples").select("*").eq("sample_id",s);n&&(r=r.eq("container_id",n));const{data:o,error:a}=await r.limit(1).maybeSingle();return a||!o?null:fi(o)}catch{return null}}function As(e){try{return String(e||"").trim().toUpperCase()}catch{return""}}function Es(e,n){if(e==null)return"";let s=String(e).trim().toUpperCase();if(!s)return"";if((s.startsWith('"')&&s.endsWith('"')||s.startsWith("'")&&s.endsWith("'"))&&(s=s.slice(1,-1).trim()),s=s.replace(/[-_\s]+/g,""),/^[A-Z]+\d+$/.test(s))return s.replace(/([A-Z]+)0+(\d+)$/i,(r,o,a)=>`${o}${String(Number(a))}`);if(/^\d+[A-Z]+$/.test(s)){const r=s.match(/^(\d+)([A-Z]+)$/);if(r){const[,o,a]=r;return`${a}${String(Number(o))}`}}return/^\d+$/.test(s)||/^[A-Z]+$/.test(s),s}async function Ou(e,n){try{const{error:s}=await nt.from("backups").insert({data:e,created_by:n});if(!s)return;console.warn("[saveBackup] Direct insert failed, falling back to server function:",s.message||s)}catch(s){console.warn("[saveBackup] Direct insert threw, falling back to server function:",s instanceof Error?s.message:s)}try{const s=await ui("/backups",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${gt}`,apikey:gt},body:JSON.stringify({data:e,createdBy:n})});if(!s.ok){const r=await s.text().catch(()=>"no body");throw new Error(`Server backup failed: ${s.status} ${s.statusText} ${r}`)}return}catch(s){const r=fo.map(o=>`${o}/backups`).join(" | ");throw console.error(`[saveBackup] Server backup failed (attempted ${r}):`,s),s}}async function Os(){try{const{data:e,error:n}=await nt.from("backups").select("*").order("created_at",{ascending:!1}).limit(1).single();if(n)throw n;return{data:e?.data??null}}catch(e){console.warn('[getLatestBackup] supabase.from("backups") failed, attempting REST fallback:',e instanceof Error?e.message:e);try{const n=`${mo}/rest/v1/backups?select=*&order=created_at.desc&limit=1`,s=await fetch(n,{method:"GET",headers:{Accept:"application/json",apikey:gt,Authorization:`Bearer ${gt}`}}),r=await s.text();if(!s.ok){try{const i=JSON.parse(r||"{}");if(i&&i.code==="PGRST116")return console.warn("[getLatestBackup] REST fallback returned PGRST116 (no rows) - treating as empty result"),{data:null}}catch{}throw console.error("[getLatestBackup] REST fallback failed:",s.status,s.statusText,r),new Error(`REST fallback failed: ${s.status} ${s.statusText} ${r}`)}const o=JSON.parse(r||"null");return{data:(Array.isArray(o)&&o.length>0?o[0]:null)?.data??null}}catch(n){throw console.error("[getLatestBackup] REST fallback threw:",n instanceof Error?n.message:n),n}}}function re(e,n,{checkForDefaultPrevented:s=!0}={}){return function(o){if(e?.(o),s===!1||!o.defaultPrevented)return n?.(o)}}function da(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Xs(...e){return n=>{let s=!1;const r=e.map(o=>{const a=da(o,n);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():da(e[o],null)}}}}function je(...e){return l.useCallback(Xs(...e),e)}function Lu(e,n){const s=l.createContext(n),r=a=>{const{children:i,...c}=a,u=l.useMemo(()=>c,Object.values(c));return t.jsx(s.Provider,{value:u,children:i})};r.displayName=e+"Provider";function o(a){const i=l.useContext(s);if(i)return i;if(n!==void 0)return n;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,o]}function it(e,n=[]){let s=[];function r(a,i){const c=l.createContext(i),u=s.length;s=[...s,i];const f=d=>{const{scope:p,children:x,...b}=d,h=p?.[e]?.[u]||c,g=l.useMemo(()=>b,Object.values(b));return t.jsx(h.Provider,{value:g,children:x})};f.displayName=a+"Provider";function m(d,p){const x=p?.[e]?.[u]||c,b=l.useContext(x);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[f,m]}const o=()=>{const a=s.map(i=>l.createContext(i));return function(c){const u=c?.[e]||a;return l.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return o.scopeName=e,[r,$u(o,...n)]}function $u(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=r.reduce((c,{useScope:u,scopeName:f})=>{const d=u(a)[`__scope${f}`];return{...c,...d}},{});return l.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return s.scopeName=n.scopeName,s}var Le=globalThis?.document?l.useLayoutEffect:()=>{},Fu=li[" useId ".trim().toString()]||(()=>{}),Bu=0;function yt(e){const[n,s]=l.useState(Fu());return Le(()=>{s(r=>r??String(Bu++))},[e]),e||(n?`radix-${n}`:"")}var zu=li[" useInsertionEffect ".trim().toString()]||Le;function Ht({prop:e,defaultProp:n,onChange:s=()=>{},caller:r}){const[o,a,i]=Uu({defaultProp:n,onChange:s}),c=e!==void 0,u=c?e:o;{const m=l.useRef(e!==void 0);l.useEffect(()=>{const d=m.current;d!==c&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const f=l.useCallback(m=>{if(c){const d=Vu(m)?m(e):m;d!==e&&i.current?.(d)}else a(m)},[c,e,a,i]);return[u,f]}function Uu({defaultProp:e,onChange:n}){const[s,r]=l.useState(e),o=l.useRef(s),a=l.useRef(n);return zu(()=>{a.current=n},[n]),l.useEffect(()=>{o.current!==s&&(a.current?.(s),o.current=s)},[s,o]),[s,r,a]}function Vu(e){return typeof e=="function"}function tn(e){const n=Hu(e),s=l.forwardRef((r,o)=>{const{children:a,...i}=r,c=l.Children.toArray(a),u=c.find(Gu);if(u){const f=u.props.children,m=c.map(d=>d===u?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:d);return t.jsx(n,{...i,ref:o,children:l.isValidElement(f)?l.cloneElement(f,void 0,m):null})}return t.jsx(n,{...i,ref:o,children:a})});return s.displayName=`${e}.Slot`,s}var pi=tn("Slot");function Hu(e){const n=l.forwardRef((s,r)=>{const{children:o,...a}=s;if(l.isValidElement(o)){const i=Yu(o),c=Ku(a,o.props);return o.type!==l.Fragment&&(c.ref=r?Xs(r,i):i),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var hi=Symbol("radix.slottable");function Wu(e){const n=({children:s})=>t.jsx(t.Fragment,{children:s});return n.displayName=`${e}.Slottable`,n.__radixId=hi,n}function Gu(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hi}function Ku(e,n){const s={...n};for(const r in n){const o=e[r],a=n[r];/^on[A-Z]/.test(r)?o&&a?s[r]=(...c)=>{const u=a(...c);return o(...c),u}:o&&(s[r]=o):r==="style"?s[r]={...o,...a}:r==="className"&&(s[r]=[o,a].filter(Boolean).join(" "))}return{...e,...s}}function Yu(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var qu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pe=qu.reduce((e,n)=>{const s=tn(`Primitive.${n}`),r=l.forwardRef((o,a)=>{const{asChild:i,...c}=o,u=i?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(u,{...c,ref:a})});return r.displayName=`Primitive.${n}`,{...e,[n]:r}},{});function xi(e,n){e&&os.flushSync(()=>e.dispatchEvent(n))}function ze(e){const n=l.useRef(e);return l.useEffect(()=>{n.current=e}),l.useMemo(()=>(...s)=>n.current?.(...s),[])}function Ju(e,n=globalThis?.document){const s=ze(e);l.useEffect(()=>{const r=o=>{o.key==="Escape"&&s(o)};return n.addEventListener("keydown",r,{capture:!0}),()=>n.removeEventListener("keydown",r,{capture:!0})},[s,n])}var Xu="DismissableLayer",Ur="dismissableLayer.update",Zu="dismissableLayer.pointerDownOutside",Qu="dismissableLayer.focusOutside",ua,gi=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),as=l.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:c,...u}=e,f=l.useContext(gi),[m,d]=l.useState(null),p=m?.ownerDocument??globalThis?.document,[,x]=l.useState({}),b=je(n,A=>d(A)),h=Array.from(f.layers),[g]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),y=h.indexOf(g),v=m?h.indexOf(m):-1,w=f.layersWithOutsidePointerEventsDisabled.size>0,T=v>=y,j=nm(A=>{const N=A.target,M=[...f.branches].some(I=>I.contains(N));!T||M||(o?.(A),i?.(A),A.defaultPrevented||c?.())},p),C=sm(A=>{const N=A.target;[...f.branches].some(I=>I.contains(N))||(a?.(A),i?.(A),A.defaultPrevented||c?.())},p);return Ju(A=>{v===f.layers.size-1&&(r?.(A),!A.defaultPrevented&&c&&(A.preventDefault(),c()))},p),l.useEffect(()=>{if(m)return s&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(ua=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),ma(),()=>{s&&f.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=ua)}},[m,p,s,f]),l.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),ma())},[m,f]),l.useEffect(()=>{const A=()=>x({});return document.addEventListener(Ur,A),()=>document.removeEventListener(Ur,A)},[]),t.jsx(pe.div,{...u,ref:b,style:{pointerEvents:w?T?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,C.onFocusCapture),onBlurCapture:re(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,j.onPointerDownCapture)})});as.displayName=Xu;var em="DismissableLayerBranch",tm=l.forwardRef((e,n)=>{const s=l.useContext(gi),r=l.useRef(null),o=je(n,r);return l.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),t.jsx(pe.div,{...e,ref:o})});tm.displayName=em;function nm(e,n=globalThis?.document){const s=ze(e),r=l.useRef(!1),o=l.useRef(()=>{});return l.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let u=function(){vi(Zu,s,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",o.current),o.current=u,n.addEventListener("click",o.current,{once:!0})):u()}else n.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),n.removeEventListener("pointerdown",a),n.removeEventListener("click",o.current)}},[n,s]),{onPointerDownCapture:()=>r.current=!0}}function sm(e,n=globalThis?.document){const s=ze(e),r=l.useRef(!1);return l.useEffect(()=>{const o=a=>{a.target&&!r.current&&vi(Qu,s,{originalEvent:a},{discrete:!1})};return n.addEventListener("focusin",o),()=>n.removeEventListener("focusin",o)},[n,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ma(){const e=new CustomEvent(Ur);document.dispatchEvent(e)}function vi(e,n,s,{discrete:r}){const o=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&o.addEventListener(e,n,{once:!0}),r?xi(o,a):o.dispatchEvent(a)}var Cr="focusScope.autoFocusOnMount",kr="focusScope.autoFocusOnUnmount",fa={bubbles:!1,cancelable:!0},rm="FocusScope",Zs=l.forwardRef((e,n)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[c,u]=l.useState(null),f=ze(o),m=ze(a),d=l.useRef(null),p=je(n,h=>u(h)),x=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(r){let h=function(w){if(x.paused||!c)return;const T=w.target;c.contains(T)?d.current=T:zt(d.current,{select:!0})},g=function(w){if(x.paused||!c)return;const T=w.relatedTarget;T!==null&&(c.contains(T)||zt(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&zt(c)};document.addEventListener("focusin",h),document.addEventListener("focusout",g);const v=new MutationObserver(y);return c&&v.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",g),v.disconnect()}}},[r,c,x.paused]),l.useEffect(()=>{if(c){ha.add(x);const h=document.activeElement;if(!c.contains(h)){const y=new CustomEvent(Cr,fa);c.addEventListener(Cr,f),c.dispatchEvent(y),y.defaultPrevented||(om(dm(yi(c)),{select:!0}),document.activeElement===h&&zt(c))}return()=>{c.removeEventListener(Cr,f),setTimeout(()=>{const y=new CustomEvent(kr,fa);c.addEventListener(kr,m),c.dispatchEvent(y),y.defaultPrevented||zt(h??document.body,{select:!0}),c.removeEventListener(kr,m),ha.remove(x)},0)}}},[c,f,m,x]);const b=l.useCallback(h=>{if(!s&&!r||x.paused)return;const g=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,y=document.activeElement;if(g&&y){const v=h.currentTarget,[w,T]=am(v);w&&T?!h.shiftKey&&y===T?(h.preventDefault(),s&&zt(w,{select:!0})):h.shiftKey&&y===w&&(h.preventDefault(),s&&zt(T,{select:!0})):y===v&&h.preventDefault()}},[s,r,x.paused]);return t.jsx(pe.div,{tabIndex:-1,...i,ref:p,onKeyDown:b})});Zs.displayName=rm;function om(e,{select:n=!1}={}){const s=document.activeElement;for(const r of e)if(zt(r,{select:n}),document.activeElement!==s)return}function am(e){const n=yi(e),s=pa(n,e),r=pa(n.reverse(),e);return[s,r]}function yi(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function pa(e,n){for(const s of e)if(!im(s,{upTo:n}))return s}function im(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lm(e){return e instanceof HTMLInputElement&&"select"in e}function zt(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&lm(e)&&n&&e.select()}}var ha=cm();function cm(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=xa(e,n),e.unshift(n)},remove(n){e=xa(e,n),e[0]?.resume()}}}function xa(e,n){const s=[...e],r=s.indexOf(n);return r!==-1&&s.splice(r,1),s}function dm(e){return e.filter(n=>n.tagName!=="A")}var um="Portal",is=l.forwardRef((e,n)=>{const{container:s,...r}=e,[o,a]=l.useState(!1);Le(()=>a(!0),[]);const i=s||o&&globalThis?.document?.body;return i?di.createPortal(t.jsx(pe.div,{...r,ref:n}),i):null});is.displayName=um;function mm(e,n){return l.useReducer((s,r)=>n[s][r]??s,e)}var Ye=e=>{const{present:n,children:s}=e,r=fm(n),o=typeof s=="function"?s({present:r.isPresent}):l.Children.only(s),a=je(r.ref,pm(o));return typeof s=="function"||r.isPresent?l.cloneElement(o,{ref:a}):null};Ye.displayName="Presence";function fm(e){const[n,s]=l.useState(),r=l.useRef(null),o=l.useRef(e),a=l.useRef("none"),i=e?"mounted":"unmounted",[c,u]=mm(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const f=ys(r.current);a.current=c==="mounted"?f:"none"},[c]),Le(()=>{const f=r.current,m=o.current;if(m!==e){const p=a.current,x=ys(f);e?u("MOUNT"):x==="none"||f?.display==="none"?u("UNMOUNT"):u(m&&p!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Le(()=>{if(n){let f;const m=n.ownerDocument.defaultView??window,d=x=>{const h=ys(r.current).includes(CSS.escape(x.animationName));if(x.target===n&&h&&(u("ANIMATION_END"),!o.current)){const g=n.style.animationFillMode;n.style.animationFillMode="forwards",f=m.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=g)})}},p=x=>{x.target===n&&(a.current=ys(r.current))};return n.addEventListener("animationstart",p),n.addEventListener("animationcancel",d),n.addEventListener("animationend",d),()=>{m.clearTimeout(f),n.removeEventListener("animationstart",p),n.removeEventListener("animationcancel",d),n.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:l.useCallback(f=>{r.current=f?getComputedStyle(f):null,s(f)},[])}}function ys(e){return e?.animationName||"none"}function pm(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Tr=0;function po(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ga()),document.body.insertAdjacentElement("beforeend",e[1]??ga()),Tr++,()=>{Tr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Tr--}},[])}function ga(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ct=function(){return Ct=Object.assign||function(n){for(var s,r=1,o=arguments.length;r<o;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},Ct.apply(this,arguments)};function bi(e,n){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(s[r[o]]=e[r[o]]);return s}function hm(e,n,s){if(s||arguments.length===2)for(var r=0,o=n.length,a;r<o;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}var Is="right-scroll-bar-position",Ps="width-before-scroll-bar",xm="with-scroll-bars-hidden",gm="--removed-body-scroll-bar-size";function Ar(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function vm(e,n){var s=l.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(r){var o=s.value;o!==r&&(s.value=r,s.callback(r,o))}}}})[0];return s.callback=n,s.facade}var ym=typeof window<"u"?l.useLayoutEffect:l.useEffect,va=new WeakMap;function bm(e,n){var s=vm(null,function(r){return e.forEach(function(o){return Ar(o,r)})});return ym(function(){var r=va.get(s);if(r){var o=new Set(r),a=new Set(e),i=s.current;o.forEach(function(c){a.has(c)||Ar(c,null)}),a.forEach(function(c){o.has(c)||Ar(c,i)})}va.set(s,e)},[e]),s}function wm(e){return e}function jm(e,n){n===void 0&&(n=wm);var s=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(a){var i=n(a,r);return s.push(i),function(){s=s.filter(function(c){return c!==i})}},assignSyncMedium:function(a){for(r=!0;s.length;){var i=s;s=[],i.forEach(a)}s={push:function(c){return a(c)},filter:function(){return s}}},assignMedium:function(a){r=!0;var i=[];if(s.length){var c=s;s=[],c.forEach(a),i=s}var u=function(){var m=i;i=[],m.forEach(a)},f=function(){return Promise.resolve().then(u)};f(),s={push:function(m){i.push(m),f()},filter:function(m){return i=i.filter(m),s}}}};return o}function Sm(e){e===void 0&&(e={});var n=jm(null);return n.options=Ct({async:!0,ssr:!1},e),n}var wi=function(e){var n=e.sideCar,s=bi(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return l.createElement(r,Ct({},s))};wi.isSideCarExport=!0;function Nm(e,n){return e.useMedium(n),wi}var ji=Sm(),Er=function(){},Qs=l.forwardRef(function(e,n){var s=l.useRef(null),r=l.useState({onScrollCapture:Er,onWheelCapture:Er,onTouchMoveCapture:Er}),o=r[0],a=r[1],i=e.forwardProps,c=e.children,u=e.className,f=e.removeScrollBar,m=e.enabled,d=e.shards,p=e.sideCar,x=e.noRelative,b=e.noIsolation,h=e.inert,g=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,w=e.gapMode,T=bi(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,C=bm([s,n]),A=Ct(Ct({},T),o);return l.createElement(l.Fragment,null,m&&l.createElement(j,{sideCar:ji,removeScrollBar:f,shards:d,noRelative:x,noIsolation:b,inert:h,setCallbacks:a,allowPinchZoom:!!g,lockRef:s,gapMode:w}),i?l.cloneElement(l.Children.only(c),Ct(Ct({},A),{ref:C})):l.createElement(v,Ct({},A,{className:u,ref:C}),c))});Qs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qs.classNames={fullWidth:Ps,zeroRight:Is};var Cm=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function km(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Cm();return n&&e.setAttribute("nonce",n),e}function Tm(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function Am(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var Em=function(){var e=0,n=null;return{add:function(s){e==0&&(n=km())&&(Tm(n,s),Am(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},Im=function(){var e=Em();return function(n,s){l.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},Si=function(){var e=Im(),n=function(s){var r=s.styles,o=s.dynamic;return e(r,o),null};return n},Pm={left:0,top:0,right:0,gap:0},Ir=function(e){return parseInt(e||"",10)||0},Rm=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],r=n[e==="padding"?"paddingTop":"marginTop"],o=n[e==="padding"?"paddingRight":"marginRight"];return[Ir(s),Ir(r),Ir(o)]},Dm=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Pm;var n=Rm(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,r-s+n[2]-n[0])}},_m=Si(),bn="data-scroll-locked",Mm=function(e,n,s,r){var o=e.left,a=e.top,i=e.right,c=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(xm,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(bn,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Is,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ps,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Is," .").concat(Is,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ps," .").concat(Ps,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bn,`] {
    `).concat(gm,": ").concat(c,`px;
  }
`)},ya=function(){var e=parseInt(document.body.getAttribute(bn)||"0",10);return isFinite(e)?e:0},Om=function(){l.useEffect(function(){return document.body.setAttribute(bn,(ya()+1).toString()),function(){var e=ya()-1;e<=0?document.body.removeAttribute(bn):document.body.setAttribute(bn,e.toString())}},[])},Lm=function(e){var n=e.noRelative,s=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Om();var a=l.useMemo(function(){return Dm(o)},[o]);return l.createElement(_m,{styles:Mm(a,!n,o,s?"":"!important")})},Vr=!1;if(typeof window<"u")try{var bs=Object.defineProperty({},"passive",{get:function(){return Vr=!0,!0}});window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Vr=!1}var fn=Vr?{passive:!1}:!1,$m=function(e){return e.tagName==="TEXTAREA"},Ni=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!$m(e)&&s[n]==="visible")},Fm=function(e){return Ni(e,"overflowY")},Bm=function(e){return Ni(e,"overflowX")},ba=function(e,n){var s=n.ownerDocument,r=n;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Ci(e,r);if(o){var a=ki(e,r),i=a[1],c=a[2];if(i>c)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},zm=function(e){var n=e.scrollTop,s=e.scrollHeight,r=e.clientHeight;return[n,s,r]},Um=function(e){var n=e.scrollLeft,s=e.scrollWidth,r=e.clientWidth;return[n,s,r]},Ci=function(e,n){return e==="v"?Fm(n):Bm(n)},ki=function(e,n){return e==="v"?zm(n):Um(n)},Vm=function(e,n){return e==="h"&&n==="rtl"?-1:1},Hm=function(e,n,s,r,o){var a=Vm(e,window.getComputedStyle(n).direction),i=a*r,c=s.target,u=n.contains(c),f=!1,m=i>0,d=0,p=0;do{if(!c)break;var x=ki(e,c),b=x[0],h=x[1],g=x[2],y=h-g-a*b;(b||y)&&Ci(e,c)&&(d+=y,p+=b);var v=c.parentNode;c=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!u&&c!==document.body||u&&(n.contains(c)||n===c));return(m&&Math.abs(d)<1||!m&&Math.abs(p)<1)&&(f=!0),f},ws=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wa=function(e){return[e.deltaX,e.deltaY]},ja=function(e){return e&&"current"in e?e.current:e},Wm=function(e,n){return e[0]===n[0]&&e[1]===n[1]},Gm=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Km=0,pn=[];function Ym(e){var n=l.useRef([]),s=l.useRef([0,0]),r=l.useRef(),o=l.useState(Km++)[0],a=l.useState(Si)[0],i=l.useRef(e);l.useEffect(function(){i.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var h=hm([e.lockRef.current],(e.shards||[]).map(ja),!0).filter(Boolean);return h.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),h.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var c=l.useCallback(function(h,g){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!i.current.allowPinchZoom;var y=ws(h),v=s.current,w="deltaX"in h?h.deltaX:v[0]-y[0],T="deltaY"in h?h.deltaY:v[1]-y[1],j,C=h.target,A=Math.abs(w)>Math.abs(T)?"h":"v";if("touches"in h&&A==="h"&&C.type==="range")return!1;var N=ba(A,C);if(!N)return!0;if(N?j=A:(j=A==="v"?"h":"v",N=ba(A,C)),!N)return!1;if(!r.current&&"changedTouches"in h&&(w||T)&&(r.current=j),!j)return!0;var M=r.current||j;return Hm(M,g,h,M==="h"?w:T)},[]),u=l.useCallback(function(h){var g=h;if(!(!pn.length||pn[pn.length-1]!==a)){var y="deltaY"in g?wa(g):ws(g),v=n.current.filter(function(j){return j.name===g.type&&(j.target===g.target||g.target===j.shadowParent)&&Wm(j.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var w=(i.current.shards||[]).map(ja).filter(Boolean).filter(function(j){return j.contains(g.target)}),T=w.length>0?c(g,w[0]):!i.current.noIsolation;T&&g.cancelable&&g.preventDefault()}}},[]),f=l.useCallback(function(h,g,y,v){var w={name:h,delta:g,target:y,should:v,shadowParent:qm(y)};n.current.push(w),setTimeout(function(){n.current=n.current.filter(function(T){return T!==w})},1)},[]),m=l.useCallback(function(h){s.current=ws(h),r.current=void 0},[]),d=l.useCallback(function(h){f(h.type,wa(h),h.target,c(h,e.lockRef.current))},[]),p=l.useCallback(function(h){f(h.type,ws(h),h.target,c(h,e.lockRef.current))},[]);l.useEffect(function(){return pn.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",u,fn),document.addEventListener("touchmove",u,fn),document.addEventListener("touchstart",m,fn),function(){pn=pn.filter(function(h){return h!==a}),document.removeEventListener("wheel",u,fn),document.removeEventListener("touchmove",u,fn),document.removeEventListener("touchstart",m,fn)}},[]);var x=e.removeScrollBar,b=e.inert;return l.createElement(l.Fragment,null,b?l.createElement(a,{styles:Gm(o)}):null,x?l.createElement(Lm,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function qm(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const Jm=Nm(ji,Ym);var er=l.forwardRef(function(e,n){return l.createElement(Qs,Ct({},e,{ref:n,sideCar:Jm}))});er.classNames=Qs.classNames;var Xm=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},hn=new WeakMap,js=new WeakMap,Ss={},Pr=0,Ti=function(e){return e&&(e.host||Ti(e.parentNode))},Zm=function(e,n){return n.map(function(s){if(e.contains(s))return s;var r=Ti(s);return r&&e.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},Qm=function(e,n,s,r){var o=Zm(n,Array.isArray(e)?e:[e]);Ss[s]||(Ss[s]=new WeakMap);var a=Ss[s],i=[],c=new Set,u=new Set(o),f=function(d){!d||c.has(d)||(c.add(d),f(d.parentNode))};o.forEach(f);var m=function(d){!d||u.has(d)||Array.prototype.forEach.call(d.children,function(p){if(c.has(p))m(p);else try{var x=p.getAttribute(r),b=x!==null&&x!=="false",h=(hn.get(p)||0)+1,g=(a.get(p)||0)+1;hn.set(p,h),a.set(p,g),i.push(p),h===1&&b&&js.set(p,!0),g===1&&p.setAttribute(s,"true"),b||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return m(n),c.clear(),Pr++,function(){i.forEach(function(d){var p=hn.get(d)-1,x=a.get(d)-1;hn.set(d,p),a.set(d,x),p||(js.has(d)||d.removeAttribute(r),js.delete(d)),x||d.removeAttribute(s)}),Pr--,Pr||(hn=new WeakMap,hn=new WeakMap,js=new WeakMap,Ss={})}},ho=function(e,n,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Xm(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),Qm(r,o,s,"aria-hidden")):function(){return null}},tr="Dialog",[Ai]=it(tr),[ef,jt]=Ai(tr),Ei=e=>{const{__scopeDialog:n,children:s,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,c=l.useRef(null),u=l.useRef(null),[f,m]=Ht({prop:r,defaultProp:o??!1,onChange:a,caller:tr});return t.jsx(ef,{scope:n,triggerRef:c,contentRef:u,contentId:yt(),titleId:yt(),descriptionId:yt(),open:f,onOpenChange:m,onOpenToggle:l.useCallback(()=>m(d=>!d),[m]),modal:i,children:s})};Ei.displayName=tr;var Ii="DialogTrigger",Pi=l.forwardRef((e,n)=>{const{__scopeDialog:s,...r}=e,o=jt(Ii,s),a=je(n,o.triggerRef);return t.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":vo(o.open),...r,ref:a,onClick:re(e.onClick,o.onOpenToggle)})});Pi.displayName=Ii;var xo="DialogPortal",[tf,Ri]=Ai(xo,{forceMount:void 0}),Di=e=>{const{__scopeDialog:n,forceMount:s,children:r,container:o}=e,a=jt(xo,n);return t.jsx(tf,{scope:n,forceMount:s,children:l.Children.map(r,i=>t.jsx(Ye,{present:s||a.open,children:t.jsx(is,{asChild:!0,container:o,children:i})}))})};Di.displayName=xo;var Ls="DialogOverlay",_i=l.forwardRef((e,n)=>{const s=Ri(Ls,e.__scopeDialog),{forceMount:r=s.forceMount,...o}=e,a=jt(Ls,e.__scopeDialog);return a.modal?t.jsx(Ye,{present:r||a.open,children:t.jsx(sf,{...o,ref:n})}):null});_i.displayName=Ls;var nf=tn("DialogOverlay.RemoveScroll"),sf=l.forwardRef((e,n)=>{const{__scopeDialog:s,...r}=e,o=jt(Ls,s);return t.jsx(er,{as:nf,allowPinchZoom:!0,shards:[o.contentRef],children:t.jsx(pe.div,{"data-state":vo(o.open),...r,ref:n,style:{pointerEvents:"auto",...r.style}})})}),nn="DialogContent",Mi=l.forwardRef((e,n)=>{const s=Ri(nn,e.__scopeDialog),{forceMount:r=s.forceMount,...o}=e,a=jt(nn,e.__scopeDialog);return t.jsx(Ye,{present:r||a.open,children:a.modal?t.jsx(rf,{...o,ref:n}):t.jsx(of,{...o,ref:n})})});Mi.displayName=nn;var rf=l.forwardRef((e,n)=>{const s=jt(nn,e.__scopeDialog),r=l.useRef(null),o=je(n,s.contentRef,r);return l.useEffect(()=>{const a=r.current;if(a)return ho(a)},[]),t.jsx(Oi,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,a=>{a.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&a.preventDefault()}),onFocusOutside:re(e.onFocusOutside,a=>a.preventDefault())})}),of=l.forwardRef((e,n)=>{const s=jt(nn,e.__scopeDialog),r=l.useRef(!1),o=l.useRef(!1);return t.jsx(Oi,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||s.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;s.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Oi=l.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,c=jt(nn,s),u=l.useRef(null),f=je(n,u);return po(),t.jsxs(t.Fragment,{children:[t.jsx(Zs,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:t.jsx(as,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":vo(c.open),...i,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(af,{titleId:c.titleId}),t.jsx(cf,{contentRef:u,descriptionId:c.descriptionId})]})]})}),go="DialogTitle",Li=l.forwardRef((e,n)=>{const{__scopeDialog:s,...r}=e,o=jt(go,s);return t.jsx(pe.h2,{id:o.titleId,...r,ref:n})});Li.displayName=go;var $i="DialogDescription",Fi=l.forwardRef((e,n)=>{const{__scopeDialog:s,...r}=e,o=jt($i,s);return t.jsx(pe.p,{id:o.descriptionId,...r,ref:n})});Fi.displayName=$i;var Bi="DialogClose",zi=l.forwardRef((e,n)=>{const{__scopeDialog:s,...r}=e,o=jt(Bi,s);return t.jsx(pe.button,{type:"button",...r,ref:n,onClick:re(e.onClick,()=>o.onOpenChange(!1))})});zi.displayName=Bi;function vo(e){return e?"open":"closed"}var Ui="DialogTitleWarning",[Iy,Vi]=Lu(Ui,{contentName:nn,titleName:go,docsSlug:"dialog"}),af=({titleId:e})=>{const n=Vi(Ui),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},lf="DialogDescriptionWarning",cf=({contentRef:e,descriptionId:n})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Vi(lf).contentName}}.`;return l.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");n&&o&&(document.getElementById(n)||console.warn(r))},[r,e,n]),null},Hi=Ei,yo=Pi,bo=Di,nr=_i,sr=Mi,rr=Li,or=Fi,ar=zi;/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uf=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,r)=>r?r.toUpperCase():s.toLowerCase()),Sa=e=>{const n=uf(e);return n.charAt(0).toUpperCase()+n.slice(1)},Wi=(...e)=>e.filter((n,s,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=l.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...c},u)=>l.createElement("svg",{ref:u,...mf,width:n,height:n,stroke:e,strokeWidth:r?Number(s)*24/Number(n):s,className:Wi("lucide",o),...c},[...i.map(([f,m])=>l.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,n)=>{const s=l.forwardRef(({className:r,...o},a)=>l.createElement(ff,{ref:a,iconNode:n,className:Wi(`lucide-${df(Sa(e))}`,`lucide-${e}`,r),...o}));return s.displayName=Sa(e),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Gi=xe("activity",pf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],xf=xe("archive-restore",hf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Et=xe("archive",gf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ki=xe("arrow-left",vf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yi=xe("arrow-right",yf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qi=xe("calendar",bf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jf=xe("check",wf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ji=xe("chevron-down",Sf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cf=xe("chevron-up",Nf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Tf=xe("circle-alert",kf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],st=xe("circle-check-big",Af);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Nn=xe("circle-x",Ef);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],wo=xe("clock",If);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Rf=xe("cloud",Pf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],vn=xe("database",Df);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],wn=xe("download",_f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Of=xe("ellipsis-vertical",Mf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xi=xe("eye",Lf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wt=xe("file-text",$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Hr=xe("funnel",Ff);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ot=xe("graduation-cap",Bf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Uf=xe("info",zf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Hf=xe("layers",Vf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Gf=xe("list",Wf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Na=xe("lock-open",Kf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ca=xe("lock",Yf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Jf=xe("map-pin",qf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],Zf=xe("merge",Xf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Cn=xe("pen-line",Qf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ka=xe("plus",ep);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],np=xe("rotate-ccw",tp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],jo=xe("scan",sp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Vt=xe("search",rp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ta=xe("settings",op);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ip=xe("shield",ap);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Aa=xe("shuffle",lp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dp=xe("square-pen",cp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Kn=xe("test-tube",up);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],Rs=xe("thermometer",mp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],yn=xe("trash-2",fp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ge=xe("triangle-alert",pp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],en=xe("upload",hp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zi=xe("user",xp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Gt=xe("users",gp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],kn=xe("wifi-off",vp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Yn=xe("wifi",yp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],So=xe("x",bp);function Qi(e){var n,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(s=Qi(e[n]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function el(){for(var e,n,s=0,r="",o=arguments.length;s<o;s++)(e=arguments[s])&&(n=Qi(e))&&(r&&(r+=" "),r+=n);return r}const No="-",wp=e=>{const n=Sp(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const c=i.split(No);return c[0]===""&&c.length!==1&&c.shift(),tl(c,n)||jp(i)},getConflictingClassGroupIds:(i,c)=>{const u=s[i]||[];return c&&r[i]?[...u,...r[i]]:u}}},tl=(e,n)=>{if(e.length===0)return n.classGroupId;const s=e[0],r=n.nextPart.get(s),o=r?tl(e.slice(1),r):void 0;if(o)return o;if(n.validators.length===0)return;const a=e.join(No);return n.validators.find(({validator:i})=>i(a))?.classGroupId},Ea=/^\[(.+)\]$/,jp=e=>{if(Ea.test(e)){const n=Ea.exec(e)[1],s=n?.substring(0,n.indexOf(":"));if(s)return"arbitrary.."+s}},Sp=e=>{const{theme:n,classGroups:s}=e,r={nextPart:new Map,validators:[]};for(const o in s)Wr(s[o],r,o,n);return r},Wr=(e,n,s,r)=>{e.forEach(o=>{if(typeof o=="string"){const a=o===""?n:Ia(n,o);a.classGroupId=s;return}if(typeof o=="function"){if(Np(o)){Wr(o(r),n,s,r);return}n.validators.push({validator:o,classGroupId:s});return}Object.entries(o).forEach(([a,i])=>{Wr(i,Ia(n,a),s,r)})})},Ia=(e,n)=>{let s=e;return n.split(No).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},Np=e=>e.isThemeGetter,Cp=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,s=new Map,r=new Map;const o=(a,i)=>{s.set(a,i),n++,n>e&&(n=0,r=s,s=new Map)};return{get(a){let i=s.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return o(a,i),i},set(a,i){s.has(a)?s.set(a,i):o(a,i)}}},Gr="!",Kr=":",kp=Kr.length,Tp=e=>{const{prefix:n,experimentalParseClassName:s}=e;let r=o=>{const a=[];let i=0,c=0,u=0,f;for(let b=0;b<o.length;b++){let h=o[b];if(i===0&&c===0){if(h===Kr){a.push(o.slice(u,b)),u=b+kp;continue}if(h==="/"){f=b;continue}}h==="["?i++:h==="]"?i--:h==="("?c++:h===")"&&c--}const m=a.length===0?o:o.substring(u),d=Ap(m),p=d!==m,x=f&&f>u?f-u:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:x}};if(n){const o=n+Kr,a=r;r=i=>i.startsWith(o)?a(i.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(s){const o=r;r=a=>s({className:a,parseClassName:o})}return r},Ap=e=>e.endsWith(Gr)?e.substring(0,e.length-1):e.startsWith(Gr)?e.substring(1):e,Ep=e=>{const n=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let a=[];return r.forEach(i=>{i[0]==="["||n[i]?(o.push(...a.sort(),i),a=[]):a.push(i)}),o.push(...a.sort()),o}},Ip=e=>({cache:Cp(e.cacheSize),parseClassName:Tp(e),sortModifiers:Ep(e),...wp(e)}),Pp=/\s+/,Rp=(e,n)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:a}=n,i=[],c=e.trim().split(Pp);let u="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{isExternal:d,modifiers:p,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:h}=s(m);if(d){u=m+(u.length>0?" "+u:u);continue}let g=!!h,y=r(g?b.substring(0,h):b);if(!y){if(!g){u=m+(u.length>0?" "+u:u);continue}if(y=r(b),!y){u=m+(u.length>0?" "+u:u);continue}g=!1}const v=a(p).join(":"),w=x?v+Gr:v,T=w+y;if(i.includes(T))continue;i.push(T);const j=o(y,g);for(let C=0;C<j.length;++C){const A=j[C];i.push(w+A)}u=m+(u.length>0?" "+u:u)}return u};function Dp(){let e=0,n,s,r="";for(;e<arguments.length;)(n=arguments[e++])&&(s=nl(n))&&(r&&(r+=" "),r+=s);return r}const nl=e=>{if(typeof e=="string")return e;let n,s="";for(let r=0;r<e.length;r++)e[r]&&(n=nl(e[r]))&&(s&&(s+=" "),s+=n);return s};function _p(e,...n){let s,r,o,a=i;function i(u){const f=n.reduce((m,d)=>d(m),e());return s=Ip(f),r=s.cache.get,o=s.cache.set,a=c,c(u)}function c(u){const f=r(u);if(f)return f;const m=Rp(u,s);return o(u,m),m}return function(){return a(Dp.apply(null,arguments))}}const $e=e=>{const n=s=>s[e]||[];return n.isThemeGetter=!0,n},sl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rl=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Mp=/^\d+\/\d+$/,Op=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lp=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$p=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Fp=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Bp=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xn=e=>Mp.test(e),ye=e=>!!e&&!Number.isNaN(Number(e)),Bt=e=>!!e&&Number.isInteger(Number(e)),Rr=e=>e.endsWith("%")&&ye(e.slice(0,-1)),Mt=e=>Op.test(e),zp=()=>!0,Up=e=>Lp.test(e)&&!$p.test(e),ol=()=>!1,Vp=e=>Fp.test(e),Hp=e=>Bp.test(e),Wp=e=>!ce(e)&&!de(e),Gp=e=>Dn(e,ll,ol),ce=e=>sl.test(e),Qt=e=>Dn(e,cl,Up),Dr=e=>Dn(e,Xp,ye),Pa=e=>Dn(e,al,ol),Kp=e=>Dn(e,il,Hp),Ns=e=>Dn(e,dl,Vp),de=e=>rl.test(e),Un=e=>_n(e,cl),Yp=e=>_n(e,Zp),Ra=e=>_n(e,al),qp=e=>_n(e,ll),Jp=e=>_n(e,il),Cs=e=>_n(e,dl,!0),Dn=(e,n,s)=>{const r=sl.exec(e);return r?r[1]?n(r[1]):s(r[2]):!1},_n=(e,n,s=!1)=>{const r=rl.exec(e);return r?r[1]?n(r[1]):s:!1},al=e=>e==="position"||e==="percentage",il=e=>e==="image"||e==="url",ll=e=>e==="length"||e==="size"||e==="bg-size",cl=e=>e==="length",Xp=e=>e==="number",Zp=e=>e==="family-name",dl=e=>e==="shadow",Qp=()=>{const e=$e("color"),n=$e("font"),s=$e("text"),r=$e("font-weight"),o=$e("tracking"),a=$e("leading"),i=$e("breakpoint"),c=$e("container"),u=$e("spacing"),f=$e("radius"),m=$e("shadow"),d=$e("inset-shadow"),p=$e("text-shadow"),x=$e("drop-shadow"),b=$e("blur"),h=$e("perspective"),g=$e("aspect"),y=$e("ease"),v=$e("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...T(),de,ce],C=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],N=()=>[de,ce,u],M=()=>[xn,"full","auto",...N()],I=()=>[Bt,"none","subgrid",de,ce],z=()=>["auto",{span:["full",Bt,de,ce]},Bt,de,ce],V=()=>[Bt,"auto",de,ce],K=()=>["auto","min","max","fr",de,ce],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...N()],oe=()=>[xn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],E=()=>[e,de,ce],O=()=>[...T(),Ra,Pa,{position:[de,ce]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",qp,Gp,{size:[de,ce]}],ge=()=>[Rr,Un,Qt],S=()=>["","none","full",f,de,ce],P=()=>["",ye,Un,Qt],H=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[ye,Rr,Ra,Pa],W=()=>["","none",b,de,ce],le=()=>["none",ye,de,ce],Y=()=>["none",ye,de,ce],Q=()=>[ye,de,ce],D=()=>[xn,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Mt],breakpoint:[Mt],color:[zp],container:[Mt],"drop-shadow":[Mt],ease:["in","out","in-out"],font:[Wp],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Mt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Mt],shadow:[Mt],spacing:["px",ye],text:[Mt],"text-shadow":[Mt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xn,ce,de,g]}],container:["container"],columns:[{columns:[ye,ce,de,c]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Bt,"auto",de,ce]}],basis:[{basis:[xn,"full","auto",c,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ye,xn,"auto","initial","none",ce]}],grow:[{grow:["",ye,de,ce]}],shrink:[{shrink:["",ye,de,ce]}],order:[{order:[Bt,"first","last","none",de,ce]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[c,"screen",...oe()]}],"min-w":[{"min-w":[c,"screen","none",...oe()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},...oe()]}],h:[{h:["screen","lh",...oe()]}],"min-h":[{"min-h":["screen","lh","none",...oe()]}],"max-h":[{"max-h":["screen","lh",...oe()]}],"font-size":[{text:["base",s,Un,Qt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,de,Dr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Rr,ce]}],"font-family":[{font:[Yp,ce,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,de,ce]}],"line-clamp":[{"line-clamp":[ye,"none",de,Dr]}],leading:[{leading:[a,...N()]}],"list-image":[{"list-image":["none",de,ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",de,ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:[ye,"from-font","auto",de,Qt]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[ye,"auto",de,ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de,ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de,ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:O()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bt,de,ce],radial:["",de,ce],conic:[Bt,de,ce]},Jp,Kp]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:ge()}],"gradient-via-pos":[{via:ge()}],"gradient-to-pos":[{to:ge()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:S()}],"rounded-s":[{"rounded-s":S()}],"rounded-e":[{"rounded-e":S()}],"rounded-t":[{"rounded-t":S()}],"rounded-r":[{"rounded-r":S()}],"rounded-b":[{"rounded-b":S()}],"rounded-l":[{"rounded-l":S()}],"rounded-ss":[{"rounded-ss":S()}],"rounded-se":[{"rounded-se":S()}],"rounded-ee":[{"rounded-ee":S()}],"rounded-es":[{"rounded-es":S()}],"rounded-tl":[{"rounded-tl":S()}],"rounded-tr":[{"rounded-tr":S()}],"rounded-br":[{"rounded-br":S()}],"rounded-bl":[{"rounded-bl":S()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...H(),"hidden","none"]}],"divide-style":[{divide:[...H(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...H(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ye,de,ce]}],"outline-w":[{outline:["",ye,Un,Qt]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",m,Cs,Ns]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",d,Cs,Ns]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[ye,Qt]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",p,Cs,Ns]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[ye,de,ce]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ye]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[de,ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[ye]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:O()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",de,ce]}],filter:[{filter:["","none",de,ce]}],blur:[{blur:W()}],brightness:[{brightness:[ye,de,ce]}],contrast:[{contrast:[ye,de,ce]}],"drop-shadow":[{"drop-shadow":["","none",x,Cs,Ns]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",ye,de,ce]}],"hue-rotate":[{"hue-rotate":[ye,de,ce]}],invert:[{invert:["",ye,de,ce]}],saturate:[{saturate:[ye,de,ce]}],sepia:[{sepia:["",ye,de,ce]}],"backdrop-filter":[{"backdrop-filter":["","none",de,ce]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[ye,de,ce]}],"backdrop-contrast":[{"backdrop-contrast":[ye,de,ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ye,de,ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ye,de,ce]}],"backdrop-invert":[{"backdrop-invert":["",ye,de,ce]}],"backdrop-opacity":[{"backdrop-opacity":[ye,de,ce]}],"backdrop-saturate":[{"backdrop-saturate":[ye,de,ce]}],"backdrop-sepia":[{"backdrop-sepia":["",ye,de,ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",de,ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ye,"initial",de,ce]}],ease:[{ease:["linear","initial",y,de,ce]}],delay:[{delay:[ye,de,ce]}],animate:[{animate:["none",v,de,ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,de,ce]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:Y()}],"scale-x":[{"scale-x":Y()}],"scale-y":[{"scale-y":Y()}],"scale-z":[{"scale-z":Y()}],"scale-3d":["scale-3d"],skew:[{skew:Q()}],"skew-x":[{"skew-x":Q()}],"skew-y":[{"skew-y":Q()}],transform:[{transform:[de,ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:D()}],"translate-x":[{"translate-x":D()}],"translate-y":[{"translate-y":D()}],"translate-z":[{"translate-z":D()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de,ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de,ce]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[ye,Un,Qt,Dr]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eh=_p(Qp);function he(...e){return eh(el(e))}function qn({...e}){return t.jsx(Hi,{"data-slot":"dialog",...e})}function th({...e}){return t.jsx(yo,{"data-slot":"dialog-trigger",...e})}function nh({...e}){return t.jsx(bo,{"data-slot":"dialog-portal",...e})}const ul=l.forwardRef(({className:e,...n},s)=>t.jsx(nr,{ref:s,"data-slot":"dialog-overlay",className:he("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...n}));ul.displayName=nr.displayName;const Tn=l.forwardRef(({className:e,children:n,...s},r)=>t.jsxs(nh,{"data-slot":"dialog-portal",children:[t.jsx(ul,{}),t.jsxs(sr,{ref:r,"data-slot":"dialog-content",className:he("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[n,t.jsxs(ar,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(So,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Tn.displayName=sr.displayName;function Jn({className:e,...n}){return t.jsx("div",{"data-slot":"dialog-header",className:he("flex flex-col gap-2 text-center sm:text-left",e),...n})}function Co({className:e,...n}){return t.jsx("div",{"data-slot":"dialog-footer",className:he("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...n})}const An=l.forwardRef(({className:e,...n},s)=>t.jsx(rr,{ref:s,"data-slot":"dialog-title",className:he("text-lg leading-none font-semibold",e),...n}));An.displayName=rr.displayName;const En=l.forwardRef(({className:e,...n},s)=>t.jsx(or,{ref:s,"data-slot":"dialog-description",className:he("text-muted-foreground text-sm",e),...n}));En.displayName=or.displayName;function ke({className:e,...n}){return t.jsx("div",{"data-slot":"card",className:he("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...n})}function Xn({className:e,...n}){return t.jsx("div",{"data-slot":"card-header",className:he("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...n})}function Zn({className:e,...n}){return t.jsx("h4",{"data-slot":"card-title",className:he("leading-none",e),...n})}function sh({className:e,...n}){return t.jsx("p",{"data-slot":"card-description",className:he("text-muted-foreground",e),...n})}function Pt({className:e,...n}){return t.jsx("div",{"data-slot":"card-content",className:he("px-6 [&:last-child]:pb-6",e),...n})}const Da=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_a=el,ko=(e,n)=>s=>{var r;if(n?.variants==null)return _a(e,s?.class,s?.className);const{variants:o,defaultVariants:a}=n,i=Object.keys(o).map(f=>{const m=s?.[f],d=a?.[f];if(m===null)return null;const p=Da(m)||Da(d);return o[f][p]}),c=s&&Object.entries(s).reduce((f,m)=>{let[d,p]=m;return p===void 0||(f[d]=p),f},{}),u=n==null||(r=n.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:d,className:p,...x}=m;return Object.entries(x).every(b=>{let[h,g]=b;return Array.isArray(g)?g.includes({...a,...c}[h]):{...a,...c}[h]===g})?[...f,d,p]:f},[]);return _a(e,i,u,s?.class,s?.className)},rh=ko("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function be({className:e,variant:n,asChild:s=!1,...r}){const o=s?pi:"span";return t.jsx(o,{"data-slot":"badge",className:he(rh({variant:n}),e),...r})}const oh=ko("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Z=l.forwardRef(({className:e,variant:n,size:s,asChild:r=!1,...o},a)=>{const i=r?pi:"button";return t.jsx(i,{"data-slot":"button",className:he(oh({variant:n,size:s,className:e})),ref:a,...o})});Z.displayName="Button";const Ke=l.forwardRef(({className:e,type:n,...s},r)=>t.jsx("input",{type:n,ref:r,"data-slot":"input",className:he("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s}));Ke.displayName="Input";function To(e){const n=e+"CollectionProvider",[s,r]=it(n),[o,a]=s(n,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:g,children:y}=h,v=B.useRef(null),w=B.useRef(new Map).current;return t.jsx(o,{scope:g,itemMap:w,collectionRef:v,children:y})};i.displayName=n;const c=e+"CollectionSlot",u=tn(c),f=B.forwardRef((h,g)=>{const{scope:y,children:v}=h,w=a(c,y),T=je(g,w.collectionRef);return t.jsx(u,{ref:T,children:v})});f.displayName=c;const m=e+"CollectionItemSlot",d="data-radix-collection-item",p=tn(m),x=B.forwardRef((h,g)=>{const{scope:y,children:v,...w}=h,T=B.useRef(null),j=je(g,T),C=a(m,y);return B.useEffect(()=>(C.itemMap.set(T,{ref:T,...w}),()=>void C.itemMap.delete(T))),t.jsx(p,{[d]:"",ref:j,children:v})});x.displayName=m;function b(h){const g=a(e+"CollectionConsumer",h);return B.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((C,A)=>w.indexOf(C.ref.current)-w.indexOf(A.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:f,ItemSlot:x},b,r]}var ah=l.createContext(void 0);function ls(e){const n=l.useContext(ah);return e||n||"ltr"}var _r="rovingFocusGroup.onEntryFocus",ih={bubbles:!1,cancelable:!0},cs="RovingFocusGroup",[Yr,ml,lh]=To(cs),[ch,ir]=it(cs,[lh]),[dh,uh]=ch(cs),fl=l.forwardRef((e,n)=>t.jsx(Yr.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Yr.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(mh,{...e,ref:n})})}));fl.displayName=cs;var mh=l.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...d}=e,p=l.useRef(null),x=je(n,p),b=ls(a),[h,g]=Ht({prop:i,defaultProp:c??null,onChange:u,caller:cs}),[y,v]=l.useState(!1),w=ze(f),T=ml(s),j=l.useRef(!1),[C,A]=l.useState(0);return l.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(_r,w),()=>N.removeEventListener(_r,w)},[w]),t.jsx(dh,{scope:s,orientation:r,dir:b,loop:o,currentTabStopId:h,onItemFocus:l.useCallback(N=>g(N),[g]),onItemShiftTab:l.useCallback(()=>v(!0),[]),onFocusableItemAdd:l.useCallback(()=>A(N=>N+1),[]),onFocusableItemRemove:l.useCallback(()=>A(N=>N-1),[]),children:t.jsx(pe.div,{tabIndex:y||C===0?-1:0,"data-orientation":r,...d,ref:x,style:{outline:"none",...e.style},onMouseDown:re(e.onMouseDown,()=>{j.current=!0}),onFocus:re(e.onFocus,N=>{const M=!j.current;if(N.target===N.currentTarget&&M&&!y){const I=new CustomEvent(_r,ih);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const z=T().filter(G=>G.focusable),V=z.find(G=>G.active),K=z.find(G=>G.id===h),ue=[V,K,...z].filter(Boolean).map(G=>G.ref.current);xl(ue,m)}}j.current=!1}),onBlur:re(e.onBlur,()=>v(!1))})})}),pl="RovingFocusGroupItem",hl=l.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:o=!1,tabStopId:a,children:i,...c}=e,u=yt(),f=a||u,m=uh(pl,s),d=m.currentTabStopId===f,p=ml(s),{onFocusableItemAdd:x,onFocusableItemRemove:b,currentTabStopId:h}=m;return l.useEffect(()=>{if(r)return x(),()=>b()},[r,x,b]),t.jsx(Yr.ItemSlot,{scope:s,id:f,focusable:r,active:o,children:t.jsx(pe.span,{tabIndex:d?0:-1,"data-orientation":m.orientation,...c,ref:n,onMouseDown:re(e.onMouseDown,g=>{r?m.onItemFocus(f):g.preventDefault()}),onFocus:re(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:re(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){m.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=hh(g,m.orientation,m.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=p().filter(T=>T.focusable).map(T=>T.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const T=w.indexOf(g.currentTarget);w=m.loop?xh(w,T+1):w.slice(T+1)}setTimeout(()=>xl(w))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:h!=null}):i})})});hl.displayName=pl;var fh={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ph(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function hh(e,n,s){const r=ph(e.key,s);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fh[r]}function xl(e,n=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:n}),document.activeElement!==s))return}function xh(e,n){return e.map((s,r)=>e[(n+r)%e.length])}var gl=fl,vl=hl,lr="Tabs",[gh]=it(lr,[ir]),yl=ir(),[vh,Ao]=gh(lr),bl=l.forwardRef((e,n)=>{const{__scopeTabs:s,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:c,activationMode:u="automatic",...f}=e,m=ls(c),[d,p]=Ht({prop:r,onChange:o,defaultProp:a??"",caller:lr});return t.jsx(vh,{scope:s,baseId:yt(),value:d,onValueChange:p,orientation:i,dir:m,activationMode:u,children:t.jsx(pe.div,{dir:m,"data-orientation":i,...f,ref:n})})});bl.displayName=lr;var wl="TabsList",jl=l.forwardRef((e,n)=>{const{__scopeTabs:s,loop:r=!0,...o}=e,a=Ao(wl,s),i=yl(s);return t.jsx(gl,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:t.jsx(pe.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:n})})});jl.displayName=wl;var Sl="TabsTrigger",Nl=l.forwardRef((e,n)=>{const{__scopeTabs:s,value:r,disabled:o=!1,...a}=e,i=Ao(Sl,s),c=yl(s),u=Tl(i.baseId,r),f=Al(i.baseId,r),m=r===i.value;return t.jsx(vl,{asChild:!0,...c,focusable:!o,active:m,children:t.jsx(pe.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...a,ref:n,onMouseDown:re(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:re(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:re(e.onFocus,()=>{const d=i.activationMode!=="manual";!m&&!o&&d&&i.onValueChange(r)})})})});Nl.displayName=Sl;var Cl="TabsContent",kl=l.forwardRef((e,n)=>{const{__scopeTabs:s,value:r,forceMount:o,children:a,...i}=e,c=Ao(Cl,s),u=Tl(c.baseId,r),f=Al(c.baseId,r),m=r===c.value,d=l.useRef(m);return l.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),t.jsx(Ye,{present:o||m,children:({present:p})=>t.jsx(pe.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:f,tabIndex:0,...i,ref:n,style:{...e.style,animationDuration:d.current?"0s":void 0},children:p&&a})})});kl.displayName=Cl;function Tl(e,n){return`${e}-trigger-${n}`}function Al(e,n){return`${e}-content-${n}`}var yh=bl,bh=jl,wh=Nl,jh=kl;function sn({className:e,...n}){return t.jsx(yh,{"data-slot":"tabs",className:he("flex flex-col gap-2",e),...n})}function rn({className:e,...n}){return t.jsx(bh,{"data-slot":"tabs-list",className:he("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...n})}function Me({className:e,...n}){return t.jsx(wh,{"data-slot":"tabs-trigger",className:he("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function Oe({className:e,...n}){return t.jsx(jh,{"data-slot":"tabs-content",className:he("flex-1 outline-none",e),...n})}function qr(e,[n,s]){return Math.min(s,Math.max(n,e))}function Sh(e,n){return l.useReducer((s,r)=>n[s][r]??s,e)}var Eo="ScrollArea",[El]=it(Eo),[Nh,lt]=El(Eo),Il=l.forwardRef((e,n)=>{const{__scopeScrollArea:s,type:r="hover",dir:o,scrollHideDelay:a=600,...i}=e,[c,u]=l.useState(null),[f,m]=l.useState(null),[d,p]=l.useState(null),[x,b]=l.useState(null),[h,g]=l.useState(null),[y,v]=l.useState(0),[w,T]=l.useState(0),[j,C]=l.useState(!1),[A,N]=l.useState(!1),M=je(n,z=>u(z)),I=ls(o);return t.jsx(Nh,{scope:s,type:r,dir:I,scrollHideDelay:a,scrollArea:c,viewport:f,onViewportChange:m,content:d,onContentChange:p,scrollbarX:x,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:C,scrollbarY:h,onScrollbarYChange:g,scrollbarYEnabled:A,onScrollbarYEnabledChange:N,onCornerWidthChange:v,onCornerHeightChange:T,children:t.jsx(pe.div,{dir:I,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Il.displayName=Eo;var Pl="ScrollAreaViewport",Rl=l.forwardRef((e,n)=>{const{__scopeScrollArea:s,children:r,nonce:o,...a}=e,i=lt(Pl,s),c=l.useRef(null),u=je(n,c,i.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),t.jsx(pe.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Rl.displayName=Pl;var Dt="ScrollAreaScrollbar",Dl=l.forwardRef((e,n)=>{const{forceMount:s,...r}=e,o=lt(Dt,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,c=e.orientation==="horizontal";return l.useEffect(()=>(c?a(!0):i(!0),()=>{c?a(!1):i(!1)}),[c,a,i]),o.type==="hover"?t.jsx(Ch,{...r,ref:n,forceMount:s}):o.type==="scroll"?t.jsx(kh,{...r,ref:n,forceMount:s}):o.type==="auto"?t.jsx(_l,{...r,ref:n,forceMount:s}):o.type==="always"?t.jsx(Io,{...r,ref:n}):null});Dl.displayName=Dt;var Ch=l.forwardRef((e,n)=>{const{forceMount:s,...r}=e,o=lt(Dt,e.__scopeScrollArea),[a,i]=l.useState(!1);return l.useEffect(()=>{const c=o.scrollArea;let u=0;if(c){const f=()=>{window.clearTimeout(u),i(!0)},m=()=>{u=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",m)}}},[o.scrollArea,o.scrollHideDelay]),t.jsx(Ye,{present:s||a,children:t.jsx(_l,{"data-state":a?"visible":"hidden",...r,ref:n})})}),kh=l.forwardRef((e,n)=>{const{forceMount:s,...r}=e,o=lt(Dt,e.__scopeScrollArea),a=e.orientation==="horizontal",i=dr(()=>u("SCROLL_END"),100),[c,u]=Sh("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,o.scrollHideDelay,u]),l.useEffect(()=>{const f=o.viewport,m=a?"scrollLeft":"scrollTop";if(f){let d=f[m];const p=()=>{const x=f[m];d!==x&&(u("SCROLL"),i()),d=x};return f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[o.viewport,a,u,i]),t.jsx(Ye,{present:s||c!=="hidden",children:t.jsx(Io,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:n,onPointerEnter:re(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:re(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),_l=l.forwardRef((e,n)=>{const s=lt(Dt,e.__scopeScrollArea),{forceMount:r,...o}=e,[a,i]=l.useState(!1),c=e.orientation==="horizontal",u=dr(()=>{if(s.viewport){const f=s.viewport.offsetWidth<s.viewport.scrollWidth,m=s.viewport.offsetHeight<s.viewport.scrollHeight;i(c?f:m)}},10);return In(s.viewport,u),In(s.content,u),t.jsx(Ye,{present:r||a,children:t.jsx(Io,{"data-state":a?"visible":"hidden",...o,ref:n})})}),Io=l.forwardRef((e,n)=>{const{orientation:s="vertical",...r}=e,o=lt(Dt,e.__scopeScrollArea),a=l.useRef(null),i=l.useRef(0),[c,u]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=Fl(c.viewport,c.content),m={...r,sizes:c,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function d(p,x){return Rh(p,i.current,c,x)}return s==="horizontal"?t.jsx(Th,{...m,ref:n,onThumbPositionChange:()=>{if(o.viewport&&a.current){const p=o.viewport.scrollLeft,x=Ma(p,c,o.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollLeft=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollLeft=d(p,o.dir))}}):s==="vertical"?t.jsx(Ah,{...m,ref:n,onThumbPositionChange:()=>{if(o.viewport&&a.current){const p=o.viewport.scrollTop,x=Ma(p,c);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollTop=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollTop=d(p))}}):null}),Th=l.forwardRef((e,n)=>{const{sizes:s,onSizesChange:r,...o}=e,a=lt(Dt,e.__scopeScrollArea),[i,c]=l.useState(),u=l.useRef(null),f=je(n,u,a.onScrollbarXChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),t.jsx(Ol,{"data-orientation":"horizontal",...o,ref:f,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":cr(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,d)=>{if(a.viewport){const p=a.viewport.scrollLeft+m.deltaX;e.onWheelScroll(p),zl(p,d)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Fs(i.paddingLeft),paddingEnd:Fs(i.paddingRight)}})}})}),Ah=l.forwardRef((e,n)=>{const{sizes:s,onSizesChange:r,...o}=e,a=lt(Dt,e.__scopeScrollArea),[i,c]=l.useState(),u=l.useRef(null),f=je(n,u,a.onScrollbarYChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),t.jsx(Ol,{"data-orientation":"vertical",...o,ref:f,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":cr(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,d)=>{if(a.viewport){const p=a.viewport.scrollTop+m.deltaY;e.onWheelScroll(p),zl(p,d)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Fs(i.paddingTop),paddingEnd:Fs(i.paddingBottom)}})}})}),[Eh,Ml]=El(Dt),Ol=l.forwardRef((e,n)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:o,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:f,onWheelScroll:m,onResize:d,...p}=e,x=lt(Dt,s),[b,h]=l.useState(null),g=je(n,M=>h(M)),y=l.useRef(null),v=l.useRef(""),w=x.viewport,T=r.content-r.viewport,j=ze(m),C=ze(u),A=dr(d,10);function N(M){if(y.current){const I=M.clientX-y.current.left,z=M.clientY-y.current.top;f({x:I,y:z})}}return l.useEffect(()=>{const M=I=>{const z=I.target;b?.contains(z)&&j(I,T)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[w,b,T,j]),l.useEffect(C,[r,C]),In(b,A),In(x.content,A),t.jsx(Eh,{scope:s,scrollbar:b,hasThumb:o,onThumbChange:ze(a),onThumbPointerUp:ze(i),onThumbPositionChange:C,onThumbPointerDown:ze(c),children:t.jsx(pe.div,{...p,ref:g,style:{position:"absolute",...p.style},onPointerDown:re(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),y.current=b.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),N(M))}),onPointerMove:re(e.onPointerMove,N),onPointerUp:re(e.onPointerUp,M=>{const I=M.target;I.hasPointerCapture(M.pointerId)&&I.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=v.current,x.viewport&&(x.viewport.style.scrollBehavior=""),y.current=null})})})}),$s="ScrollAreaThumb",Ll=l.forwardRef((e,n)=>{const{forceMount:s,...r}=e,o=Ml($s,e.__scopeScrollArea);return t.jsx(Ye,{present:s||o.hasThumb,children:t.jsx(Ih,{ref:n,...r})})}),Ih=l.forwardRef((e,n)=>{const{__scopeScrollArea:s,style:r,...o}=e,a=lt($s,s),i=Ml($s,s),{onThumbPositionChange:c}=i,u=je(n,d=>i.onThumbChange(d)),f=l.useRef(void 0),m=dr(()=>{f.current&&(f.current(),f.current=void 0)},100);return l.useEffect(()=>{const d=a.viewport;if(d){const p=()=>{if(m(),!f.current){const x=Dh(d,c);f.current=x,c()}};return c(),d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[a.viewport,m,c]),t.jsx(pe.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:re(e.onPointerDownCapture,d=>{const x=d.target.getBoundingClientRect(),b=d.clientX-x.left,h=d.clientY-x.top;i.onThumbPointerDown({x:b,y:h})}),onPointerUp:re(e.onPointerUp,i.onThumbPointerUp)})});Ll.displayName=$s;var Po="ScrollAreaCorner",$l=l.forwardRef((e,n)=>{const s=lt(Po,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?t.jsx(Ph,{...e,ref:n}):null});$l.displayName=Po;var Ph=l.forwardRef((e,n)=>{const{__scopeScrollArea:s,...r}=e,o=lt(Po,s),[a,i]=l.useState(0),[c,u]=l.useState(0),f=!!(a&&c);return In(o.scrollbarX,()=>{const m=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(m),u(m)}),In(o.scrollbarY,()=>{const m=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(m),i(m)}),f?t.jsx(pe.div,{...r,ref:n,style:{width:a,height:c,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Fs(e){return e?parseInt(e,10):0}function Fl(e,n){const s=e/n;return isNaN(s)?0:s}function cr(e){const n=Fl(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*n;return Math.max(r,18)}function Rh(e,n,s,r="ltr"){const o=cr(s),a=o/2,i=n||a,c=o-i,u=s.scrollbar.paddingStart+i,f=s.scrollbar.size-s.scrollbar.paddingEnd-c,m=s.content-s.viewport,d=r==="ltr"?[0,m]:[m*-1,0];return Bl([u,f],d)(e)}function Ma(e,n,s="ltr"){const r=cr(n),o=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,a=n.scrollbar.size-o,i=n.content-n.viewport,c=a-r,u=s==="ltr"?[0,i]:[i*-1,0],f=qr(e,u);return Bl([0,i],[0,c])(f)}function Bl(e,n){return s=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(e[1]-e[0]);return n[0]+r*(s-e[0])}}function zl(e,n){return e>0&&e<n}var Dh=(e,n=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return(function o(){const a={left:e.scrollLeft,top:e.scrollTop},i=s.left!==a.left,c=s.top!==a.top;(i||c)&&n(),s=a,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function dr(e,n){const s=ze(e),r=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),l.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,n)},[s,n])}function In(e,n){const s=ze(n);Le(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,s])}var _h=Il,Mh=Rl,Oh=$l;function Qn({className:e,children:n,...s}){return t.jsxs(_h,{"data-slot":"scroll-area",className:he("relative",e),...s,children:[t.jsx(Mh,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),t.jsx(Lh,{}),t.jsx(Oh,{})]})}function Lh({className:e,orientation:n="vertical",...s}){return t.jsx(Dl,{"data-slot":"scroll-area-scrollbar",orientation:n,className:he("flex touch-none p-px transition-colors select-none",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:t.jsx(Ll,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var $h="Separator",Oa="horizontal",Fh=["horizontal","vertical"],Ul=l.forwardRef((e,n)=>{const{decorative:s,orientation:r=Oa,...o}=e,a=Bh(r)?r:Oa,c=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return t.jsx(pe.div,{"data-orientation":a,...c,...o,ref:n})});Ul.displayName=$h;function Bh(e){return Fh.includes(e)}var zh=Ul;function Jr({className:e,orientation:n="horizontal",decorative:s=!0,...r}){return t.jsx(zh,{"data-slot":"separator-root",decorative:s,orientation:n,className:he("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const Uh=ko("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function kt({className:e,variant:n,...s}){return t.jsx("div",{"data-slot":"alert",role:"alert",className:he(Uh({variant:n}),e),...s})}function Tt({className:e,...n}){return t.jsx("div",{"data-slot":"alert-description",className:he("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...n})}const Vh=["top","right","bottom","left"],Kt=Math.min,tt=Math.max,Bs=Math.round,ks=Math.floor,It=e=>({x:e,y:e}),Hh={left:"right",right:"left",bottom:"top",top:"bottom"},Wh={start:"end",end:"start"};function Xr(e,n,s){return tt(e,Kt(n,s))}function Lt(e,n){return typeof e=="function"?e(n):e}function $t(e){return e.split("-")[0]}function Mn(e){return e.split("-")[1]}function Ro(e){return e==="x"?"y":"x"}function Do(e){return e==="y"?"height":"width"}const Gh=new Set(["top","bottom"]);function At(e){return Gh.has($t(e))?"y":"x"}function _o(e){return Ro(At(e))}function Kh(e,n,s){s===void 0&&(s=!1);const r=Mn(e),o=_o(e),a=Do(o);let i=o==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[a]>n.floating[a]&&(i=zs(i)),[i,zs(i)]}function Yh(e){const n=zs(e);return[Zr(e),n,Zr(n)]}function Zr(e){return e.replace(/start|end/g,n=>Wh[n])}const La=["left","right"],$a=["right","left"],qh=["top","bottom"],Jh=["bottom","top"];function Xh(e,n,s){switch(e){case"top":case"bottom":return s?n?$a:La:n?La:$a;case"left":case"right":return n?qh:Jh;default:return[]}}function Zh(e,n,s,r){const o=Mn(e);let a=Xh($t(e),s==="start",r);return o&&(a=a.map(i=>i+"-"+o),n&&(a=a.concat(a.map(Zr)))),a}function zs(e){return e.replace(/left|right|bottom|top/g,n=>Hh[n])}function Qh(e){return{top:0,right:0,bottom:0,left:0,...e}}function Vl(e){return typeof e!="number"?Qh(e):{top:e,right:e,bottom:e,left:e}}function Us(e){const{x:n,y:s,width:r,height:o}=e;return{width:r,height:o,top:s,left:n,right:n+r,bottom:s+o,x:n,y:s}}function Fa(e,n,s){let{reference:r,floating:o}=e;const a=At(n),i=_o(n),c=Do(i),u=$t(n),f=a==="y",m=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,p=r[c]/2-o[c]/2;let x;switch(u){case"top":x={x:m,y:r.y-o.height};break;case"bottom":x={x:m,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:d};break;case"left":x={x:r.x-o.width,y:d};break;default:x={x:r.x,y:r.y}}switch(Mn(n)){case"start":x[i]-=p*(s&&f?-1:1);break;case"end":x[i]+=p*(s&&f?-1:1);break}return x}const ex=async(e,n,s)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=s,c=a.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(n));let f=await i.getElementRects({reference:e,floating:n,strategy:o}),{x:m,y:d}=Fa(f,r,u),p=r,x={},b=0;for(let h=0;h<c.length;h++){const{name:g,fn:y}=c[h],{x:v,y:w,data:T,reset:j}=await y({x:m,y:d,initialPlacement:r,placement:p,strategy:o,middlewareData:x,rects:f,platform:i,elements:{reference:e,floating:n}});m=v??m,d=w??d,x={...x,[g]:{...x[g],...T}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(f=j.rects===!0?await i.getElementRects({reference:e,floating:n,strategy:o}):j.rects),{x:m,y:d}=Fa(f,p,u)),h=-1)}return{x:m,y:d,placement:p,strategy:o,middlewareData:x}};async function es(e,n){var s;n===void 0&&(n={});const{x:r,y:o,platform:a,rects:i,elements:c,strategy:u}=e,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:d="floating",altBoundary:p=!1,padding:x=0}=Lt(n,e),b=Vl(x),g=c[p?d==="floating"?"reference":"floating":d],y=Us(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(g)))==null||s?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:u})),v=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),T=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},j=Us(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:v,offsetParent:w,strategy:u}):v);return{top:(y.top-j.top+b.top)/T.y,bottom:(j.bottom-y.bottom+b.bottom)/T.y,left:(y.left-j.left+b.left)/T.x,right:(j.right-y.right+b.right)/T.x}}const tx=e=>({name:"arrow",options:e,async fn(n){const{x:s,y:r,placement:o,rects:a,platform:i,elements:c,middlewareData:u}=n,{element:f,padding:m=0}=Lt(e,n)||{};if(f==null)return{};const d=Vl(m),p={x:s,y:r},x=_o(o),b=Do(x),h=await i.getDimensions(f),g=x==="y",y=g?"top":"left",v=g?"bottom":"right",w=g?"clientHeight":"clientWidth",T=a.reference[b]+a.reference[x]-p[x]-a.floating[b],j=p[x]-a.reference[x],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(f));let A=C?C[w]:0;(!A||!await(i.isElement==null?void 0:i.isElement(C)))&&(A=c.floating[w]||a.floating[b]);const N=T/2-j/2,M=A/2-h[b]/2-1,I=Kt(d[y],M),z=Kt(d[v],M),V=I,K=A-h[b]-z,ee=A/2-h[b]/2+N,ue=Xr(V,ee,K),G=!u.arrow&&Mn(o)!=null&&ee!==ue&&a.reference[b]/2-(ee<V?I:z)-h[b]/2<0,oe=G?ee<V?ee-V:ee-K:0;return{[x]:p[x]+oe,data:{[x]:ue,centerOffset:ee-ue-oe,...G&&{alignmentOffset:oe}},reset:G}}}),nx=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var s,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:c,platform:u,elements:f}=n,{mainAxis:m=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:h=!0,...g}=Lt(e,n);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const y=$t(o),v=At(c),w=$t(c)===c,T=await(u.isRTL==null?void 0:u.isRTL(f.floating)),j=p||(w||!h?[zs(c)]:Yh(c)),C=b!=="none";!p&&C&&j.push(...Zh(c,h,b,T));const A=[c,...j],N=await es(n,g),M=[];let I=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&M.push(N[y]),d){const ee=Kh(o,i,T);M.push(N[ee[0]],N[ee[1]])}if(I=[...I,{placement:o,overflows:M}],!M.every(ee=>ee<=0)){var z,V;const ee=(((z=a.flip)==null?void 0:z.index)||0)+1,ue=A[ee];if(ue&&(!(d==="alignment"?v!==At(ue):!1)||I.every(E=>At(E.placement)===v?E.overflows[0]>0:!0)))return{data:{index:ee,overflows:I},reset:{placement:ue}};let G=(V=I.filter(oe=>oe.overflows[0]<=0).sort((oe,E)=>oe.overflows[1]-E.overflows[1])[0])==null?void 0:V.placement;if(!G)switch(x){case"bestFit":{var K;const oe=(K=I.filter(E=>{if(C){const O=At(E.placement);return O===v||O==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(O=>O>0).reduce((O,U)=>O+U,0)]).sort((E,O)=>E[1]-O[1])[0])==null?void 0:K[0];oe&&(G=oe);break}case"initialPlacement":G=c;break}if(o!==G)return{reset:{placement:G}}}return{}}}};function Ba(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function za(e){return Vh.some(n=>e[n]>=0)}const sx=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:s}=n,{strategy:r="referenceHidden",...o}=Lt(e,n);switch(r){case"referenceHidden":{const a=await es(n,{...o,elementContext:"reference"}),i=Ba(a,s.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:za(i)}}}case"escaped":{const a=await es(n,{...o,altBoundary:!0}),i=Ba(a,s.floating);return{data:{escapedOffsets:i,escaped:za(i)}}}default:return{}}}}},Hl=new Set(["left","top"]);async function rx(e,n){const{placement:s,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=$t(s),c=Mn(s),u=At(s)==="y",f=Hl.has(i)?-1:1,m=a&&u?-1:1,d=Lt(n,e);let{mainAxis:p,crossAxis:x,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return c&&typeof b=="number"&&(x=c==="end"?b*-1:b),u?{x:x*m,y:p*f}:{x:p*f,y:x*m}}const ox=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var s,r;const{x:o,y:a,placement:i,middlewareData:c}=n,u=await rx(n,e);return i===((s=c.offset)==null?void 0:s.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:a+u.y,data:{...u,placement:i}}}}},ax=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:s,y:r,placement:o}=n,{mainAxis:a=!0,crossAxis:i=!1,limiter:c={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Lt(e,n),f={x:s,y:r},m=await es(n,u),d=At($t(o)),p=Ro(d);let x=f[p],b=f[d];if(a){const g=p==="y"?"top":"left",y=p==="y"?"bottom":"right",v=x+m[g],w=x-m[y];x=Xr(v,x,w)}if(i){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=b+m[g],w=b-m[y];b=Xr(v,b,w)}const h=c.fn({...n,[p]:x,[d]:b});return{...h,data:{x:h.x-s,y:h.y-r,enabled:{[p]:a,[d]:i}}}}}},ix=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:s,y:r,placement:o,rects:a,middlewareData:i}=n,{offset:c=0,mainAxis:u=!0,crossAxis:f=!0}=Lt(e,n),m={x:s,y:r},d=At(o),p=Ro(d);let x=m[p],b=m[d];const h=Lt(c,n),g=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(u){const w=p==="y"?"height":"width",T=a.reference[p]-a.floating[w]+g.mainAxis,j=a.reference[p]+a.reference[w]-g.mainAxis;x<T?x=T:x>j&&(x=j)}if(f){var y,v;const w=p==="y"?"width":"height",T=Hl.has($t(o)),j=a.reference[d]-a.floating[w]+(T&&((y=i.offset)==null?void 0:y[d])||0)+(T?0:g.crossAxis),C=a.reference[d]+a.reference[w]+(T?0:((v=i.offset)==null?void 0:v[d])||0)-(T?g.crossAxis:0);b<j?b=j:b>C&&(b=C)}return{[p]:x,[d]:b}}}},lx=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var s,r;const{placement:o,rects:a,platform:i,elements:c}=n,{apply:u=()=>{},...f}=Lt(e,n),m=await es(n,f),d=$t(o),p=Mn(o),x=At(o)==="y",{width:b,height:h}=a.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=p===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(y=d,g=p==="end"?"top":"bottom");const v=h-m.top-m.bottom,w=b-m.left-m.right,T=Kt(h-m[g],v),j=Kt(b-m[y],w),C=!n.middlewareData.shift;let A=T,N=j;if((s=n.middlewareData.shift)!=null&&s.enabled.x&&(N=w),(r=n.middlewareData.shift)!=null&&r.enabled.y&&(A=v),C&&!p){const I=tt(m.left,0),z=tt(m.right,0),V=tt(m.top,0),K=tt(m.bottom,0);x?N=b-2*(I!==0||z!==0?I+z:tt(m.left,m.right)):A=h-2*(V!==0||K!==0?V+K:tt(m.top,m.bottom))}await u({...n,availableWidth:N,availableHeight:A});const M=await i.getDimensions(c.floating);return b!==M.width||h!==M.height?{reset:{rects:!0}}:{}}}};function ur(){return typeof window<"u"}function On(e){return Wl(e)?(e.nodeName||"").toLowerCase():"#document"}function rt(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function _t(e){var n;return(n=(Wl(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function Wl(e){return ur()?e instanceof Node||e instanceof rt(e).Node:!1}function bt(e){return ur()?e instanceof Element||e instanceof rt(e).Element:!1}function Rt(e){return ur()?e instanceof HTMLElement||e instanceof rt(e).HTMLElement:!1}function Ua(e){return!ur()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rt(e).ShadowRoot}const cx=new Set(["inline","contents"]);function ds(e){const{overflow:n,overflowX:s,overflowY:r,display:o}=wt(e);return/auto|scroll|overlay|hidden|clip/.test(n+r+s)&&!cx.has(o)}const dx=new Set(["table","td","th"]);function ux(e){return dx.has(On(e))}const mx=[":popover-open",":modal"];function mr(e){return mx.some(n=>{try{return e.matches(n)}catch{return!1}})}const fx=["transform","translate","scale","rotate","perspective"],px=["transform","translate","scale","rotate","perspective","filter"],hx=["paint","layout","strict","content"];function Mo(e){const n=Oo(),s=bt(e)?wt(e):e;return fx.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!n&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!n&&(s.filter?s.filter!=="none":!1)||px.some(r=>(s.willChange||"").includes(r))||hx.some(r=>(s.contain||"").includes(r))}function xx(e){let n=Yt(e);for(;Rt(n)&&!Pn(n);){if(Mo(n))return n;if(mr(n))return null;n=Yt(n)}return null}function Oo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gx=new Set(["html","body","#document"]);function Pn(e){return gx.has(On(e))}function wt(e){return rt(e).getComputedStyle(e)}function fr(e){return bt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Yt(e){if(On(e)==="html")return e;const n=e.assignedSlot||e.parentNode||Ua(e)&&e.host||_t(e);return Ua(n)?n.host:n}function Gl(e){const n=Yt(e);return Pn(n)?e.ownerDocument?e.ownerDocument.body:e.body:Rt(n)&&ds(n)?n:Gl(n)}function ts(e,n,s){var r;n===void 0&&(n=[]),s===void 0&&(s=!0);const o=Gl(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=rt(o);if(a){const c=Qr(i);return n.concat(i,i.visualViewport||[],ds(o)?o:[],c&&s?ts(c):[])}return n.concat(o,ts(o,[],s))}function Qr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Kl(e){const n=wt(e);let s=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const o=Rt(e),a=o?e.offsetWidth:s,i=o?e.offsetHeight:r,c=Bs(s)!==a||Bs(r)!==i;return c&&(s=a,r=i),{width:s,height:r,$:c}}function Lo(e){return bt(e)?e:e.contextElement}function jn(e){const n=Lo(e);if(!Rt(n))return It(1);const s=n.getBoundingClientRect(),{width:r,height:o,$:a}=Kl(n);let i=(a?Bs(s.width):s.width)/r,c=(a?Bs(s.height):s.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const vx=It(0);function Yl(e){const n=rt(e);return!Oo()||!n.visualViewport?vx:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function yx(e,n,s){return n===void 0&&(n=!1),!s||n&&s!==rt(e)?!1:n}function on(e,n,s,r){n===void 0&&(n=!1),s===void 0&&(s=!1);const o=e.getBoundingClientRect(),a=Lo(e);let i=It(1);n&&(r?bt(r)&&(i=jn(r)):i=jn(e));const c=yx(a,s,r)?Yl(a):It(0);let u=(o.left+c.x)/i.x,f=(o.top+c.y)/i.y,m=o.width/i.x,d=o.height/i.y;if(a){const p=rt(a),x=r&&bt(r)?rt(r):r;let b=p,h=Qr(b);for(;h&&r&&x!==b;){const g=jn(h),y=h.getBoundingClientRect(),v=wt(h),w=y.left+(h.clientLeft+parseFloat(v.paddingLeft))*g.x,T=y.top+(h.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,f*=g.y,m*=g.x,d*=g.y,u+=w,f+=T,b=rt(h),h=Qr(b)}}return Us({width:m,height:d,x:u,y:f})}function pr(e,n){const s=fr(e).scrollLeft;return n?n.left+s:on(_t(e)).left+s}function ql(e,n){const s=e.getBoundingClientRect(),r=s.left+n.scrollLeft-pr(e,s),o=s.top+n.scrollTop;return{x:r,y:o}}function bx(e){let{elements:n,rect:s,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=_t(r),c=n?mr(n.floating):!1;if(r===i||c&&a)return s;let u={scrollLeft:0,scrollTop:0},f=It(1);const m=It(0),d=Rt(r);if((d||!d&&!a)&&((On(r)!=="body"||ds(i))&&(u=fr(r)),Rt(r))){const x=on(r);f=jn(r),m.x=x.x+r.clientLeft,m.y=x.y+r.clientTop}const p=i&&!d&&!a?ql(i,u):It(0);return{width:s.width*f.x,height:s.height*f.y,x:s.x*f.x-u.scrollLeft*f.x+m.x+p.x,y:s.y*f.y-u.scrollTop*f.y+m.y+p.y}}function wx(e){return Array.from(e.getClientRects())}function jx(e){const n=_t(e),s=fr(e),r=e.ownerDocument.body,o=tt(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),a=tt(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let i=-s.scrollLeft+pr(e);const c=-s.scrollTop;return wt(r).direction==="rtl"&&(i+=tt(n.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:c}}const Va=25;function Sx(e,n){const s=rt(e),r=_t(e),o=s.visualViewport;let a=r.clientWidth,i=r.clientHeight,c=0,u=0;if(o){a=o.width,i=o.height;const m=Oo();(!m||m&&n==="fixed")&&(c=o.offsetLeft,u=o.offsetTop)}const f=pr(r);if(f<=0){const m=r.ownerDocument,d=m.body,p=getComputedStyle(d),x=m.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,b=Math.abs(r.clientWidth-d.clientWidth-x);b<=Va&&(a-=b)}else f<=Va&&(a+=f);return{width:a,height:i,x:c,y:u}}const Nx=new Set(["absolute","fixed"]);function Cx(e,n){const s=on(e,!0,n==="fixed"),r=s.top+e.clientTop,o=s.left+e.clientLeft,a=Rt(e)?jn(e):It(1),i=e.clientWidth*a.x,c=e.clientHeight*a.y,u=o*a.x,f=r*a.y;return{width:i,height:c,x:u,y:f}}function Ha(e,n,s){let r;if(n==="viewport")r=Sx(e,s);else if(n==="document")r=jx(_t(e));else if(bt(n))r=Cx(n,s);else{const o=Yl(e);r={x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}return Us(r)}function Jl(e,n){const s=Yt(e);return s===n||!bt(s)||Pn(s)?!1:wt(s).position==="fixed"||Jl(s,n)}function kx(e,n){const s=n.get(e);if(s)return s;let r=ts(e,[],!1).filter(c=>bt(c)&&On(c)!=="body"),o=null;const a=wt(e).position==="fixed";let i=a?Yt(e):e;for(;bt(i)&&!Pn(i);){const c=wt(i),u=Mo(i);!u&&c.position==="fixed"&&(o=null),(a?!u&&!o:!u&&c.position==="static"&&!!o&&Nx.has(o.position)||ds(i)&&!u&&Jl(e,i))?r=r.filter(m=>m!==i):o=c,i=Yt(i)}return n.set(e,r),r}function Tx(e){let{element:n,boundary:s,rootBoundary:r,strategy:o}=e;const i=[...s==="clippingAncestors"?mr(n)?[]:kx(n,this._c):[].concat(s),r],c=i[0],u=i.reduce((f,m)=>{const d=Ha(n,m,o);return f.top=tt(d.top,f.top),f.right=Kt(d.right,f.right),f.bottom=Kt(d.bottom,f.bottom),f.left=tt(d.left,f.left),f},Ha(n,c,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Ax(e){const{width:n,height:s}=Kl(e);return{width:n,height:s}}function Ex(e,n,s){const r=Rt(n),o=_t(n),a=s==="fixed",i=on(e,!0,a,n);let c={scrollLeft:0,scrollTop:0};const u=It(0);function f(){u.x=pr(o)}if(r||!r&&!a)if((On(n)!=="body"||ds(o))&&(c=fr(n)),r){const x=on(n,!0,a,n);u.x=x.x+n.clientLeft,u.y=x.y+n.clientTop}else o&&f();a&&!r&&o&&f();const m=o&&!r&&!a?ql(o,c):It(0),d=i.left+c.scrollLeft-u.x-m.x,p=i.top+c.scrollTop-u.y-m.y;return{x:d,y:p,width:i.width,height:i.height}}function Mr(e){return wt(e).position==="static"}function Wa(e,n){if(!Rt(e)||wt(e).position==="fixed")return null;if(n)return n(e);let s=e.offsetParent;return _t(e)===s&&(s=s.ownerDocument.body),s}function Xl(e,n){const s=rt(e);if(mr(e))return s;if(!Rt(e)){let o=Yt(e);for(;o&&!Pn(o);){if(bt(o)&&!Mr(o))return o;o=Yt(o)}return s}let r=Wa(e,n);for(;r&&ux(r)&&Mr(r);)r=Wa(r,n);return r&&Pn(r)&&Mr(r)&&!Mo(r)?s:r||xx(e)||s}const Ix=async function(e){const n=this.getOffsetParent||Xl,s=this.getDimensions,r=await s(e.floating);return{reference:Ex(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Px(e){return wt(e).direction==="rtl"}const Rx={convertOffsetParentRelativeRectToViewportRelativeRect:bx,getDocumentElement:_t,getClippingRect:Tx,getOffsetParent:Xl,getElementRects:Ix,getClientRects:wx,getDimensions:Ax,getScale:jn,isElement:bt,isRTL:Px};function Zl(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function Dx(e,n){let s=null,r;const o=_t(e);function a(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function i(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),a();const f=e.getBoundingClientRect(),{left:m,top:d,width:p,height:x}=f;if(c||n(),!p||!x)return;const b=ks(d),h=ks(o.clientWidth-(m+p)),g=ks(o.clientHeight-(d+x)),y=ks(m),w={rootMargin:-b+"px "+-h+"px "+-g+"px "+-y+"px",threshold:tt(0,Kt(1,u))||1};let T=!0;function j(C){const A=C[0].intersectionRatio;if(A!==u){if(!T)return i();A?i(!1,A):r=setTimeout(()=>{i(!1,1e-7)},1e3)}A===1&&!Zl(f,e.getBoundingClientRect())&&i(),T=!1}try{s=new IntersectionObserver(j,{...w,root:o.ownerDocument})}catch{s=new IntersectionObserver(j,w)}s.observe(e)}return i(!0),a}function _x(e,n,s,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=Lo(e),m=o||a?[...f?ts(f):[],...ts(n)]:[];m.forEach(y=>{o&&y.addEventListener("scroll",s,{passive:!0}),a&&y.addEventListener("resize",s)});const d=f&&c?Dx(f,s):null;let p=-1,x=null;i&&(x=new ResizeObserver(y=>{let[v]=y;v&&v.target===f&&x&&(x.unobserve(n),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=x)==null||w.observe(n)})),s()}),f&&!u&&x.observe(f),x.observe(n));let b,h=u?on(e):null;u&&g();function g(){const y=on(e);h&&!Zl(h,y)&&s(),h=y,b=requestAnimationFrame(g)}return s(),()=>{var y;m.forEach(v=>{o&&v.removeEventListener("scroll",s),a&&v.removeEventListener("resize",s)}),d?.(),(y=x)==null||y.disconnect(),x=null,u&&cancelAnimationFrame(b)}}const Mx=ox,Ox=ax,Lx=nx,$x=lx,Fx=sx,Ga=tx,Bx=ix,zx=(e,n,s)=>{const r=new Map,o={platform:Rx,...s},a={...o.platform,_c:r};return ex(e,n,{...o,platform:a})};var Ux=typeof document<"u",Vx=function(){},Ds=Ux?l.useLayoutEffect:Vx;function Vs(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let s,r,o;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==n.length)return!1;for(r=s;r--!==0;)if(!Vs(e[r],n[r]))return!1;return!0}if(o=Object.keys(e),s=o.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(n,o[r]))return!1;for(r=s;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Vs(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}function Ql(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ka(e,n){const s=Ql(e);return Math.round(n*s)/s}function Or(e){const n=l.useRef(e);return Ds(()=>{n.current=e}),n}function Hx(e){e===void 0&&(e={});const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:c=!0,whileElementsMounted:u,open:f}=e,[m,d]=l.useState({x:0,y:0,strategy:s,placement:n,middlewareData:{},isPositioned:!1}),[p,x]=l.useState(r);Vs(p,r)||x(r);const[b,h]=l.useState(null),[g,y]=l.useState(null),v=l.useCallback(E=>{E!==C.current&&(C.current=E,h(E))},[]),w=l.useCallback(E=>{E!==A.current&&(A.current=E,y(E))},[]),T=a||b,j=i||g,C=l.useRef(null),A=l.useRef(null),N=l.useRef(m),M=u!=null,I=Or(u),z=Or(o),V=Or(f),K=l.useCallback(()=>{if(!C.current||!A.current)return;const E={placement:n,strategy:s,middleware:p};z.current&&(E.platform=z.current),zx(C.current,A.current,E).then(O=>{const U={...O,isPositioned:V.current!==!1};ee.current&&!Vs(N.current,U)&&(N.current=U,os.flushSync(()=>{d(U)}))})},[p,n,s,z,V]);Ds(()=>{f===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(E=>({...E,isPositioned:!1})))},[f]);const ee=l.useRef(!1);Ds(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Ds(()=>{if(T&&(C.current=T),j&&(A.current=j),T&&j){if(I.current)return I.current(T,j,K);K()}},[T,j,K,I,M]);const ue=l.useMemo(()=>({reference:C,floating:A,setReference:v,setFloating:w}),[v,w]),G=l.useMemo(()=>({reference:T,floating:j}),[T,j]),oe=l.useMemo(()=>{const E={position:s,left:0,top:0};if(!G.floating)return E;const O=Ka(G.floating,m.x),U=Ka(G.floating,m.y);return c?{...E,transform:"translate("+O+"px, "+U+"px)",...Ql(G.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:O,top:U}},[s,c,G.floating,m.x,m.y]);return l.useMemo(()=>({...m,update:K,refs:ue,elements:G,floatingStyles:oe}),[m,K,ue,G,oe])}const Wx=e=>{function n(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:r,padding:o}=typeof e=="function"?e(s):e;return r&&n(r)?r.current!=null?Ga({element:r.current,padding:o}).fn(s):{}:r?Ga({element:r,padding:o}).fn(s):{}}}},Gx=(e,n)=>({...Mx(e),options:[e,n]}),Kx=(e,n)=>({...Ox(e),options:[e,n]}),Yx=(e,n)=>({...Bx(e),options:[e,n]}),qx=(e,n)=>({...Lx(e),options:[e,n]}),Jx=(e,n)=>({...$x(e),options:[e,n]}),Xx=(e,n)=>({...Fx(e),options:[e,n]}),Zx=(e,n)=>({...Wx(e),options:[e,n]});var Qx="Arrow",ec=l.forwardRef((e,n)=>{const{children:s,width:r=10,height:o=5,...a}=e;return t.jsx(pe.svg,{...a,ref:n,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});ec.displayName=Qx;var eg=ec;function tc(e){const[n,s]=l.useState(void 0);return Le(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,c;if("borderBoxSize"in a){const u=a.borderBoxSize,f=Array.isArray(u)?u[0]:u;i=f.inlineSize,c=f.blockSize}else i=e.offsetWidth,c=e.offsetHeight;s({width:i,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else s(void 0)},[e]),n}var $o="Popper",[nc,Ln]=it($o),[tg,sc]=nc($o),rc=e=>{const{__scopePopper:n,children:s}=e,[r,o]=l.useState(null);return t.jsx(tg,{scope:n,anchor:r,onAnchorChange:o,children:s})};rc.displayName=$o;var oc="PopperAnchor",ac=l.forwardRef((e,n)=>{const{__scopePopper:s,virtualRef:r,...o}=e,a=sc(oc,s),i=l.useRef(null),c=je(n,i),u=l.useRef(null);return l.useEffect(()=>{const f=u.current;u.current=r?.current||i.current,f!==u.current&&a.onAnchorChange(u.current)}),r?null:t.jsx(pe.div,{...o,ref:c})});ac.displayName=oc;var Fo="PopperContent",[ng,sg]=nc(Fo),ic=l.forwardRef((e,n)=>{const{__scopePopper:s,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:x="optimized",onPlaced:b,...h}=e,g=sc(Fo,s),[y,v]=l.useState(null),w=je(n,R=>v(R)),[T,j]=l.useState(null),C=tc(T),A=C?.width??0,N=C?.height??0,M=r+(a!=="center"?"-"+a:""),I=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},z=Array.isArray(f)?f:[f],V=z.length>0,K={padding:I,boundary:z.filter(og),altBoundary:V},{refs:ee,floatingStyles:ue,placement:G,isPositioned:oe,middlewareData:E}=Hx({strategy:"fixed",placement:M,whileElementsMounted:(...R)=>_x(...R,{animationFrame:x==="always"}),elements:{reference:g.anchor},middleware:[Gx({mainAxis:o+N,alignmentAxis:i}),u&&Kx({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Yx():void 0,...K}),u&&qx({...K}),Jx({...K,apply:({elements:R,rects:W,availableWidth:le,availableHeight:Y})=>{const{width:Q,height:D}=W.reference,te=R.floating.style;te.setProperty("--radix-popper-available-width",`${le}px`),te.setProperty("--radix-popper-available-height",`${Y}px`),te.setProperty("--radix-popper-anchor-width",`${Q}px`),te.setProperty("--radix-popper-anchor-height",`${D}px`)}}),T&&Zx({element:T,padding:c}),ag({arrowWidth:A,arrowHeight:N}),p&&Xx({strategy:"referenceHidden",...K})]}),[O,U]=dc(G),F=ze(b);Le(()=>{oe&&F?.()},[oe,F]);const ge=E.arrow?.x,S=E.arrow?.y,P=E.arrow?.centerOffset!==0,[H,ie]=l.useState();return Le(()=>{y&&ie(window.getComputedStyle(y).zIndex)},[y]),t.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:oe?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[E.transformOrigin?.x,E.transformOrigin?.y].join(" "),...E.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(ng,{scope:s,placedSide:O,onArrowChange:j,arrowX:ge,arrowY:S,shouldHideArrow:P,children:t.jsx(pe.div,{"data-side":O,"data-align":U,...h,ref:w,style:{...h.style,animation:oe?void 0:"none"}})})})});ic.displayName=Fo;var lc="PopperArrow",rg={top:"bottom",right:"left",bottom:"top",left:"right"},cc=l.forwardRef(function(n,s){const{__scopePopper:r,...o}=n,a=sg(lc,r),i=rg[a.placedSide];return t.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:t.jsx(eg,{...o,ref:s,style:{...o.style,display:"block"}})})});cc.displayName=lc;function og(e){return e!==null}var ag=e=>({name:"transformOrigin",options:e,fn(n){const{placement:s,rects:r,middlewareData:o}=n,i=o.arrow?.centerOffset!==0,c=i?0:e.arrowWidth,u=i?0:e.arrowHeight,[f,m]=dc(s),d={start:"0%",center:"50%",end:"100%"}[m],p=(o.arrow?.x??0)+c/2,x=(o.arrow?.y??0)+u/2;let b="",h="";return f==="bottom"?(b=i?d:`${p}px`,h=`${-u}px`):f==="top"?(b=i?d:`${p}px`,h=`${r.floating.height+u}px`):f==="right"?(b=`${-u}px`,h=i?d:`${x}px`):f==="left"&&(b=`${r.floating.width+u}px`,h=i?d:`${x}px`),{data:{x:b,y:h}}}});function dc(e){const[n,s="center"]=e.split("-");return[n,s]}var Bo=rc,zo=ac,Uo=ic,Vo=cc;function uc(e){const n=l.useRef({value:e,previous:e});return l.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}var mc=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ig="VisuallyHidden",fc=l.forwardRef((e,n)=>t.jsx(pe.span,{...e,ref:n,style:{...mc,...e.style}}));fc.displayName=ig;var lg=fc,cg=[" ","Enter","ArrowUp","ArrowDown"],dg=[" ","Enter"],an="Select",[hr,xr,ug]=To(an),[$n]=it(an,[ug,Ln]),gr=Ln(),[mg,qt]=$n(an),[fg,pg]=$n(an),pc=e=>{const{__scopeSelect:n,children:s,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:c,onValueChange:u,dir:f,name:m,autoComplete:d,disabled:p,required:x,form:b}=e,h=gr(n),[g,y]=l.useState(null),[v,w]=l.useState(null),[T,j]=l.useState(!1),C=ls(f),[A,N]=Ht({prop:r,defaultProp:o??!1,onChange:a,caller:an}),[M,I]=Ht({prop:i,defaultProp:c,onChange:u,caller:an}),z=l.useRef(null),V=g?b||!!g.closest("form"):!0,[K,ee]=l.useState(new Set),ue=Array.from(K).map(G=>G.props.value).join(";");return t.jsx(Bo,{...h,children:t.jsxs(mg,{required:x,scope:n,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:T,onValueNodeHasChildrenChange:j,contentId:yt(),value:M,onValueChange:I,open:A,onOpenChange:N,dir:C,triggerPointerDownPosRef:z,disabled:p,children:[t.jsx(hr.Provider,{scope:n,children:t.jsx(fg,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(G=>{ee(oe=>new Set(oe).add(G))},[]),onNativeOptionRemove:l.useCallback(G=>{ee(oe=>{const E=new Set(oe);return E.delete(G),E})},[]),children:s})}),V?t.jsxs(Oc,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:d,value:M,onChange:G=>I(G.target.value),disabled:p,form:b,children:[M===void 0?t.jsx("option",{value:""}):null,Array.from(K)]},ue):null]})})};pc.displayName=an;var hc="SelectTrigger",xc=l.forwardRef((e,n)=>{const{__scopeSelect:s,disabled:r=!1,...o}=e,a=gr(s),i=qt(hc,s),c=i.disabled||r,u=je(n,i.onTriggerChange),f=xr(s),m=l.useRef("touch"),[d,p,x]=$c(h=>{const g=f().filter(w=>!w.disabled),y=g.find(w=>w.value===i.value),v=Fc(g,h,y);v!==void 0&&i.onValueChange(v.value)}),b=h=>{c||(i.onOpenChange(!0),x()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return t.jsx(zo,{asChild:!0,...a,children:t.jsx(pe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Lc(i.value)?"":void 0,...o,ref:u,onClick:re(o.onClick,h=>{h.currentTarget.focus(),m.current!=="mouse"&&b(h)}),onPointerDown:re(o.onPointerDown,h=>{m.current=h.pointerType;const g=h.target;g.hasPointerCapture(h.pointerId)&&g.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(b(h),h.preventDefault())}),onKeyDown:re(o.onKeyDown,h=>{const g=d.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&p(h.key),!(g&&h.key===" ")&&cg.includes(h.key)&&(b(),h.preventDefault())})})})});xc.displayName=hc;var gc="SelectValue",vc=l.forwardRef((e,n)=>{const{__scopeSelect:s,className:r,style:o,children:a,placeholder:i="",...c}=e,u=qt(gc,s),{onValueNodeHasChildrenChange:f}=u,m=a!==void 0,d=je(n,u.onValueNodeChange);return Le(()=>{f(m)},[f,m]),t.jsx(pe.span,{...c,ref:d,style:{pointerEvents:"none"},children:Lc(u.value)?t.jsx(t.Fragment,{children:i}):a})});vc.displayName=gc;var hg="SelectIcon",yc=l.forwardRef((e,n)=>{const{__scopeSelect:s,children:r,...o}=e;return t.jsx(pe.span,{"aria-hidden":!0,...o,ref:n,children:r||"▼"})});yc.displayName=hg;var xg="SelectPortal",bc=e=>t.jsx(is,{asChild:!0,...e});bc.displayName=xg;var ln="SelectContent",wc=l.forwardRef((e,n)=>{const s=qt(ln,e.__scopeSelect),[r,o]=l.useState();if(Le(()=>{o(new DocumentFragment)},[]),!s.open){const a=r;return a?os.createPortal(t.jsx(jc,{scope:e.__scopeSelect,children:t.jsx(hr.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),a):null}return t.jsx(Sc,{...e,ref:n})});wc.displayName=ln;var mt=10,[jc,Jt]=$n(ln),gg="SelectContentImpl",vg=tn("SelectContent.RemoveScroll"),Sc=l.forwardRef((e,n)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:c,sideOffset:u,align:f,alignOffset:m,arrowPadding:d,collisionBoundary:p,collisionPadding:x,sticky:b,hideWhenDetached:h,avoidCollisions:g,...y}=e,v=qt(ln,s),[w,T]=l.useState(null),[j,C]=l.useState(null),A=je(n,R=>T(R)),[N,M]=l.useState(null),[I,z]=l.useState(null),V=xr(s),[K,ee]=l.useState(!1),ue=l.useRef(!1);l.useEffect(()=>{if(w)return ho(w)},[w]),po();const G=l.useCallback(R=>{const[W,...le]=V().map(D=>D.ref.current),[Y]=le.slice(-1),Q=document.activeElement;for(const D of R)if(D===Q||(D?.scrollIntoView({block:"nearest"}),D===W&&j&&(j.scrollTop=0),D===Y&&j&&(j.scrollTop=j.scrollHeight),D?.focus(),document.activeElement!==Q))return},[V,j]),oe=l.useCallback(()=>G([N,w]),[G,N,w]);l.useEffect(()=>{K&&oe()},[K,oe]);const{onOpenChange:E,triggerPointerDownPosRef:O}=v;l.useEffect(()=>{if(w){let R={x:0,y:0};const W=Y=>{R={x:Math.abs(Math.round(Y.pageX)-(O.current?.x??0)),y:Math.abs(Math.round(Y.pageY)-(O.current?.y??0))}},le=Y=>{R.x<=10&&R.y<=10?Y.preventDefault():w.contains(Y.target)||E(!1),document.removeEventListener("pointermove",W),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",le,{capture:!0})}}},[w,E,O]),l.useEffect(()=>{const R=()=>E(!1);return window.addEventListener("blur",R),window.addEventListener("resize",R),()=>{window.removeEventListener("blur",R),window.removeEventListener("resize",R)}},[E]);const[U,F]=$c(R=>{const W=V().filter(Q=>!Q.disabled),le=W.find(Q=>Q.ref.current===document.activeElement),Y=Fc(W,R,le);Y&&setTimeout(()=>Y.ref.current.focus())}),ge=l.useCallback((R,W,le)=>{const Y=!ue.current&&!le;(v.value!==void 0&&v.value===W||Y)&&(M(R),Y&&(ue.current=!0))},[v.value]),S=l.useCallback(()=>w?.focus(),[w]),P=l.useCallback((R,W,le)=>{const Y=!ue.current&&!le;(v.value!==void 0&&v.value===W||Y)&&z(R)},[v.value]),H=r==="popper"?eo:Nc,ie=H===eo?{side:c,sideOffset:u,align:f,alignOffset:m,arrowPadding:d,collisionBoundary:p,collisionPadding:x,sticky:b,hideWhenDetached:h,avoidCollisions:g}:{};return t.jsx(jc,{scope:s,content:w,viewport:j,onViewportChange:C,itemRefCallback:ge,selectedItem:N,onItemLeave:S,itemTextRefCallback:P,focusSelectedItem:oe,selectedItemText:I,position:r,isPositioned:K,searchRef:U,children:t.jsx(er,{as:vg,allowPinchZoom:!0,children:t.jsx(Zs,{asChild:!0,trapped:v.open,onMountAutoFocus:R=>{R.preventDefault()},onUnmountAutoFocus:re(o,R=>{v.trigger?.focus({preventScroll:!0}),R.preventDefault()}),children:t.jsx(as,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:R=>R.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:t.jsx(H,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:R=>R.preventDefault(),...y,...ie,onPlaced:()=>ee(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:re(y.onKeyDown,R=>{const W=R.ctrlKey||R.altKey||R.metaKey;if(R.key==="Tab"&&R.preventDefault(),!W&&R.key.length===1&&F(R.key),["ArrowUp","ArrowDown","Home","End"].includes(R.key)){let Y=V().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(R.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(R.key)){const Q=R.target,D=Y.indexOf(Q);Y=Y.slice(D+1)}setTimeout(()=>G(Y)),R.preventDefault()}})})})})})})});Sc.displayName=gg;var yg="SelectItemAlignedPosition",Nc=l.forwardRef((e,n)=>{const{__scopeSelect:s,onPlaced:r,...o}=e,a=qt(ln,s),i=Jt(ln,s),[c,u]=l.useState(null),[f,m]=l.useState(null),d=je(n,A=>m(A)),p=xr(s),x=l.useRef(!1),b=l.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=i,w=l.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&f&&h&&g&&y){const A=a.trigger.getBoundingClientRect(),N=f.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(a.dir!=="rtl"){const Q=I.left-N.left,D=M.left-Q,te=A.left-D,me=A.width+te,_e=Math.max(me,N.width),Ce=window.innerWidth-mt,Se=qr(D,[mt,Math.max(mt,Ce-_e)]);c.style.minWidth=me+"px",c.style.left=Se+"px"}else{const Q=N.right-I.right,D=window.innerWidth-M.right-Q,te=window.innerWidth-A.right-D,me=A.width+te,_e=Math.max(me,N.width),Ce=window.innerWidth-mt,Se=qr(D,[mt,Math.max(mt,Ce-_e)]);c.style.minWidth=me+"px",c.style.right=Se+"px"}const z=p(),V=window.innerHeight-mt*2,K=h.scrollHeight,ee=window.getComputedStyle(f),ue=parseInt(ee.borderTopWidth,10),G=parseInt(ee.paddingTop,10),oe=parseInt(ee.borderBottomWidth,10),E=parseInt(ee.paddingBottom,10),O=ue+G+K+E+oe,U=Math.min(g.offsetHeight*5,O),F=window.getComputedStyle(h),ge=parseInt(F.paddingTop,10),S=parseInt(F.paddingBottom,10),P=A.top+A.height/2-mt,H=V-P,ie=g.offsetHeight/2,R=g.offsetTop+ie,W=ue+G+R,le=O-W;if(W<=P){const Q=z.length>0&&g===z[z.length-1].ref.current;c.style.bottom="0px";const D=f.clientHeight-h.offsetTop-h.offsetHeight,te=Math.max(H,ie+(Q?S:0)+D+oe),me=W+te;c.style.height=me+"px"}else{const Q=z.length>0&&g===z[0].ref.current;c.style.top="0px";const te=Math.max(P,ue+h.offsetTop+(Q?ge:0)+ie)+le;c.style.height=te+"px",h.scrollTop=W-P+h.offsetTop}c.style.margin=`${mt}px 0`,c.style.minHeight=U+"px",c.style.maxHeight=V+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[p,a.trigger,a.valueNode,c,f,h,g,y,a.dir,r]);Le(()=>w(),[w]);const[T,j]=l.useState();Le(()=>{f&&j(window.getComputedStyle(f).zIndex)},[f]);const C=l.useCallback(A=>{A&&b.current===!0&&(w(),v?.(),b.current=!1)},[w,v]);return t.jsx(wg,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:C,children:t.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:t.jsx(pe.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Nc.displayName=yg;var bg="SelectPopperPosition",eo=l.forwardRef((e,n)=>{const{__scopeSelect:s,align:r="start",collisionPadding:o=mt,...a}=e,i=gr(s);return t.jsx(Uo,{...i,...a,ref:n,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eo.displayName=bg;var[wg,Ho]=$n(ln,{}),to="SelectViewport",Cc=l.forwardRef((e,n)=>{const{__scopeSelect:s,nonce:r,...o}=e,a=Jt(to,s),i=Ho(to,s),c=je(n,a.onViewportChange),u=l.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),t.jsx(hr.Slot,{scope:s,children:t.jsx(pe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:re(o.onScroll,f=>{const m=f.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=i;if(p?.current&&d){const x=Math.abs(u.current-m.scrollTop);if(x>0){const b=window.innerHeight-mt*2,h=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),y=Math.max(h,g);if(y<b){const v=y+x,w=Math.min(b,v),T=v-w;d.style.height=w+"px",d.style.bottom==="0px"&&(m.scrollTop=T>0?T:0,d.style.justifyContent="flex-end")}}}u.current=m.scrollTop})})})]})});Cc.displayName=to;var kc="SelectGroup",[jg,Sg]=$n(kc),Ng=l.forwardRef((e,n)=>{const{__scopeSelect:s,...r}=e,o=yt();return t.jsx(jg,{scope:s,id:o,children:t.jsx(pe.div,{role:"group","aria-labelledby":o,...r,ref:n})})});Ng.displayName=kc;var Tc="SelectLabel",Cg=l.forwardRef((e,n)=>{const{__scopeSelect:s,...r}=e,o=Sg(Tc,s);return t.jsx(pe.div,{id:o.id,...r,ref:n})});Cg.displayName=Tc;var Hs="SelectItem",[kg,Ac]=$n(Hs),Ec=l.forwardRef((e,n)=>{const{__scopeSelect:s,value:r,disabled:o=!1,textValue:a,...i}=e,c=qt(Hs,s),u=Jt(Hs,s),f=c.value===r,[m,d]=l.useState(a??""),[p,x]=l.useState(!1),b=je(n,v=>u.itemRefCallback?.(v,r,o)),h=yt(),g=l.useRef("touch"),y=()=>{o||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(kg,{scope:s,value:r,disabled:o,textId:h,isSelected:f,onItemTextChange:l.useCallback(v=>{d(w=>w||(v?.textContent??"").trim())},[]),children:t.jsx(hr.ItemSlot,{scope:s,value:r,disabled:o,textValue:m,children:t.jsx(pe.div,{role:"option","aria-labelledby":h,"data-highlighted":p?"":void 0,"aria-selected":f&&p,"data-state":f?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:b,onFocus:re(i.onFocus,()=>x(!0)),onBlur:re(i.onBlur,()=>x(!1)),onClick:re(i.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:re(i.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:re(i.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:re(i.onPointerMove,v=>{g.current=v.pointerType,o?u.onItemLeave?.():g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(i.onPointerLeave,v=>{v.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:re(i.onKeyDown,v=>{u.searchRef?.current!==""&&v.key===" "||(dg.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});Ec.displayName=Hs;var Hn="SelectItemText",Ic=l.forwardRef((e,n)=>{const{__scopeSelect:s,className:r,style:o,...a}=e,i=qt(Hn,s),c=Jt(Hn,s),u=Ac(Hn,s),f=pg(Hn,s),[m,d]=l.useState(null),p=je(n,y=>d(y),u.onItemTextChange,y=>c.itemTextRefCallback?.(y,u.value,u.disabled)),x=m?.textContent,b=l.useMemo(()=>t.jsx("option",{value:u.value,disabled:u.disabled,children:x},u.value),[u.disabled,u.value,x]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=f;return Le(()=>(h(b),()=>g(b)),[h,g,b]),t.jsxs(t.Fragment,{children:[t.jsx(pe.span,{id:u.textId,...a,ref:p}),u.isSelected&&i.valueNode&&!i.valueNodeHasChildren?os.createPortal(a.children,i.valueNode):null]})});Ic.displayName=Hn;var Pc="SelectItemIndicator",Rc=l.forwardRef((e,n)=>{const{__scopeSelect:s,...r}=e;return Ac(Pc,s).isSelected?t.jsx(pe.span,{"aria-hidden":!0,...r,ref:n}):null});Rc.displayName=Pc;var no="SelectScrollUpButton",Dc=l.forwardRef((e,n)=>{const s=Jt(no,e.__scopeSelect),r=Ho(no,e.__scopeSelect),[o,a]=l.useState(!1),i=je(n,r.onScrollButtonChange);return Le(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=u.scrollTop>0;a(f)};const u=s.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),o?t.jsx(Mc,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=s;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});Dc.displayName=no;var so="SelectScrollDownButton",_c=l.forwardRef((e,n)=>{const s=Jt(so,e.__scopeSelect),r=Ho(so,e.__scopeSelect),[o,a]=l.useState(!1),i=je(n,r.onScrollButtonChange);return Le(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=u.scrollHeight-u.clientHeight,m=Math.ceil(u.scrollTop)<f;a(m)};const u=s.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),o?t.jsx(Mc,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=s;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});_c.displayName=so;var Mc=l.forwardRef((e,n)=>{const{__scopeSelect:s,onAutoScroll:r,...o}=e,a=Jt("SelectScrollButton",s),i=l.useRef(null),c=xr(s),u=l.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return l.useEffect(()=>()=>u(),[u]),Le(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),t.jsx(pe.div,{"aria-hidden":!0,...o,ref:n,style:{flexShrink:0,...o.style},onPointerDown:re(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:re(o.onPointerMove,()=>{a.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:re(o.onPointerLeave,()=>{u()})})}),Tg="SelectSeparator",Ag=l.forwardRef((e,n)=>{const{__scopeSelect:s,...r}=e;return t.jsx(pe.div,{"aria-hidden":!0,...r,ref:n})});Ag.displayName=Tg;var ro="SelectArrow",Eg=l.forwardRef((e,n)=>{const{__scopeSelect:s,...r}=e,o=gr(s),a=qt(ro,s),i=Jt(ro,s);return a.open&&i.position==="popper"?t.jsx(Vo,{...o,...r,ref:n}):null});Eg.displayName=ro;var Ig="SelectBubbleInput",Oc=l.forwardRef(({__scopeSelect:e,value:n,...s},r)=>{const o=l.useRef(null),a=je(r,o),i=uc(n);return l.useEffect(()=>{const c=o.current;if(!c)return;const u=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==n&&m){const d=new Event("change",{bubbles:!0});m.call(c,n),c.dispatchEvent(d)}},[i,n]),t.jsx(pe.select,{...s,style:{...mc,...s.style},ref:a,defaultValue:n})});Oc.displayName=Ig;function Lc(e){return e===""||e===void 0}function $c(e){const n=ze(e),s=l.useRef(""),r=l.useRef(0),o=l.useCallback(i=>{const c=s.current+i;n(c),(function u(f){s.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(c)},[n]),a=l.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,o,a]}function Fc(e,n,s){const o=n.length>1&&Array.from(n).every(f=>f===n[0])?n[0]:n,a=s?e.indexOf(s):-1;let i=Pg(e,Math.max(a,0));o.length===1&&(i=i.filter(f=>f!==s));const u=i.find(f=>f.textValue.toLowerCase().startsWith(o.toLowerCase()));return u!==s?u:void 0}function Pg(e,n){return e.map((s,r)=>e[(n+r)%e.length])}var Rg=pc,Dg=xc,_g=vc,Mg=yc,Og=bc,Lg=wc,$g=Cc,Fg=Ec,Bg=Ic,zg=Rc,Ug=Dc,Vg=_c;function ft({...e}){return t.jsx(Rg,{"data-slot":"select",...e})}function pt({...e}){return t.jsx(_g,{"data-slot":"select-value",...e})}function ht({className:e,size:n="default",children:s,...r}){return t.jsxs(Dg,{"data-slot":"select-trigger","data-size":n,className:he("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[s,t.jsx(Mg,{asChild:!0,children:t.jsx(Ji,{className:"size-4 opacity-50"})})]})}function xt({className:e,children:n,position:s="popper",...r}){return t.jsx(Og,{children:t.jsxs(Lg,{"data-slot":"select-content",className:he("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[t.jsx(Hg,{}),t.jsx($g,{className:he("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),t.jsx(Wg,{})]})})}function Ae({className:e,children:n,...s}){return t.jsxs(Fg,{"data-slot":"select-item",className:he("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(zg,{children:t.jsx(jf,{className:"size-4"})})}),t.jsx(Bg,{children:n})]})}function Hg({className:e,...n}){return t.jsx(Ug,{"data-slot":"select-scroll-up-button",className:he("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(Cf,{className:"size-4"})})}function Wg({className:e,...n}){return t.jsx(Vg,{"data-slot":"select-scroll-down-button",className:he("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(Ji,{className:"size-4"})})}function Ws({className:e,...n}){return t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:he("w-full caption-bottom text-sm",e),...n})})}function Gs({className:e,...n}){return t.jsx("thead",{"data-slot":"table-header",className:he("[&_tr]:border-b",e),...n})}function Ks({className:e,...n}){return t.jsx("tbody",{"data-slot":"table-body",className:he("[&_tr:last-child]:border-0",e),...n})}function Ut({className:e,...n}){return t.jsx("tr",{"data-slot":"table-row",className:he("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...n})}function Ee({className:e,...n}){return t.jsx("th",{"data-slot":"table-head",className:he("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function Ie({className:e,...n}){return t.jsx("td",{"data-slot":"table-cell",className:he("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function gn(e,n,s,r,o,a={}){return new Promise(i=>{try{let c=o,u=o;try{const p=JSON.parse(localStorage.getItem("saga-user-info")||"null");p&&p.id&&(c=p.id),p&&p.name&&(u=p.name)}catch{}const f=JSON.parse(localStorage.getItem("saga-audit-logs")||"[]"),d=[{id:`audit-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),userId:c,userName:u,userRole:"Lab User",action:e,entityType:n,entityId:s,details:{description:typeof r=="string"?r:r.description,oldValues:a.oldValues,newValues:a.newValues,metadata:a.metadata},success:a.success!==!1},...f].slice(0,1e3);localStorage.setItem("saga-audit-logs",JSON.stringify(d)),i()}catch(c){console.error("Failed to store audit log locally:",c),i()}})}function Gg({currentUser:e}){const[n,s]=l.useState(25),[r,o]=l.useState(1),[a,i]=l.useState([]),[c,u]=l.useState(""),[f,m]=l.useState("all"),[d,p]=l.useState("all"),[x,b]=l.useState("all"),[h,g]=l.useState("all"),[y,v]=l.useState("all"),[w,T]=l.useState(null),[j,C]=l.useState(null),[A,N]=l.useState(null),[M,I]=l.useState("audit");l.useEffect(()=>{const S=()=>{try{const H=localStorage.getItem("saga-audit-logs");let ie=[];H&&(ie=JSON.parse(H),Array.isArray(ie)||(ie=[])),i(ie)}catch(H){console.error("Error loading audit logs:",H),i([])}};S();const P=setInterval(S,5e3);return()=>clearInterval(P)},[]);const z=l.useMemo(()=>{const S=[];a.forEach(P=>{if(P.action.includes("sample")||P.action.includes("scan")||P.action.includes("check")){const H={id:P.id,timestamp:P.timestamp,userId:P.userId,userName:P.userName,sampleId:P.details.metadata?.sampleId||P.entityId,actionType:P.action.includes("check-out")?"check-out":P.action.includes("move")?"move":P.action.includes("update")?"update":"check-in",fromContainerId:P.details.metadata?.fromContainerId,fromContainerName:P.details.metadata?.fromContainerName,fromPosition:P.details.metadata?.fromPosition,toContainerId:P.details.metadata?.toContainerId||P.details.metadata?.containerId,toContainerName:P.details.metadata?.toContainerName,toPosition:P.details.metadata?.toPosition||P.details.metadata?.position,notes:P.details.description,success:P.success};S.push(H)}});try{JSON.parse(localStorage.getItem("saga-containers")||"[]").forEach(H=>{const ie=`samples-${H.id}`,R=localStorage.getItem(ie);if(R){const W=JSON.parse(R);(Array.isArray(W)?W:Object.entries(W).map(([Y,Q])=>({position:Y,sampleId:Q.id||Q.sampleId,history:Q.history||[]}))).forEach(Y=>{Y.history&&Array.isArray(Y.history)&&Y.history.forEach(Q=>{const D={id:`${Y.sampleId}-${Q.timestamp}`,timestamp:Q.timestamp,userId:Q.user||"Unknown",userName:Q.user||"Unknown",sampleId:Y.sampleId,actionType:Q.action,toContainerId:H.id,toContainerName:H.name,toPosition:Y.position,notes:Q.notes,success:!0};S.find(te=>te.id===D.id)||S.push(D)})})}})}catch(P){console.error("Error loading sample movements:",P)}return Array.isArray(S)?S.sort((P,H)=>new Date(H.timestamp).getTime()-new Date(P.timestamp).getTime()):[]},[a]),V=l.useMemo(()=>z.filter(S=>{const P=c===""||S.sampleId&&S.sampleId.toLowerCase().includes(c.toLowerCase())||S.userName&&S.userName.toLowerCase().includes(c.toLowerCase())||S.notes&&S.notes.toLowerCase().includes(c.toLowerCase()),H=x==="all"||S.userId===x,ie=h==="all"||h==="success"&&S.success||h==="failure"&&!S.success;let R=!0;if(y!=="all"){const W=new Date(S.timestamp),le=new Date;switch(y){case"today":R=W.toDateString()===le.toDateString();break;case"week":const Y=new Date(le.getTime()-10080*60*1e3);R=W>=Y;break;case"month":const Q=new Date(le.getTime()-720*60*60*1e3);R=W>=Q;break}}return P&&H&&ie&&R}),[z,c,x,h,y]),K=l.useMemo(()=>Array.isArray(a)?a.filter(S=>{const P=c===""||S.action.toLowerCase().includes(c.toLowerCase())||S.entityId.toLowerCase().includes(c.toLowerCase())||S.userName.toLowerCase().includes(c.toLowerCase())||S.details.description?.toLowerCase().includes(c.toLowerCase()),H=f==="all"||S.action===f,ie=x==="all"||S.userId===x,R=h==="all"||h==="success"&&S.success||h==="failure"&&!S.success;let W=!0;if(y!=="all"){const le=new Date(S.timestamp),Y=new Date;switch(y){case"today":W=le.toDateString()===Y.toDateString();break;case"week":const Q=new Date(Y.getTime()-10080*60*1e3);W=le>=Q;break;case"month":const D=new Date(Y.getTime()-720*60*60*1e3);W=le>=D;break}}return P&&H&&ie&&R&&W}):[],[a,c,f,d,x,h,y]),ee=Array.isArray(a)?[...new Set(a.map(S=>S.action))]:[],ue=Array.isArray(a)?[...new Set(a.map(S=>S.userId))]:[],G=ee.filter(S=>S&&S!==""),oe=ue.filter(S=>S&&S!==""),E=S=>new Date(S).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),O=()=>{u(""),m("all"),p("all"),b("all"),g("all"),v("all")},U=()=>{if(M==="movements"){const S=JSON.parse(localStorage.getItem("saga-containers")||"[]");let P=[];const H={};V.forEach(Y=>{const Q=Y.toContainerId||Y.fromContainerId||"Unknown";H[Q]||(H[Q]=[]),H[Q].push(Y)}),Object.entries(H).forEach(([Y,Q])=>{const D=S.find(Ce=>Ce.id===Y),te=D?.name||Y;let me=[],_e=[];if(D?.containerType==="5x5-box")me=["1","2","3","4","5"],_e=["A","B","C","D","E"];else if(D?.containerType==="9x9-box")me=["1","2","3","4","5","6","7","8","9"],_e=["A","B","C","D","E","F","G","H","I"];else{const Ce=Q.map(Se=>Se.toPosition).filter(Se=>typeof Se=="string"&&Se.length>1);me=Array.from(new Set(Ce.map(Se=>Se[0]))).sort(),_e=Array.from(new Set(Ce.map(Se=>Se.slice(1)))).sort((Se,Ve)=>Number(Se)-Number(Ve))}P.push(`${te}`),P.push(["",...me].join(",")),_e.forEach(Ce=>{const Se=[Ce];me.forEach(Ve=>{const De=`${Ce}${Ve}`,Ft=Q.find(Xt=>Xt.toPosition===De);Se.push(Ft?Ft.sampleId:"")}),P.push(Se.join(","))}),P.push("")});const ie=P.join(`
`),R=new Blob([ie],{type:"text/csv"}),W=URL.createObjectURL(R),le=document.createElement("a");le.href=W,le.download=`saga-sample-movements-grid-${new Date().toISOString().split("T")[0]}.csv`,le.click(),URL.revokeObjectURL(W)}else{const S=[["Timestamp","User","Action","Entity Type","Entity ID","Success","Description"].join(","),...K.map(R=>[R.timestamp,R.userName,R.action,R.entityType,R.entityId,R.success,`"${R.details.description?vt(R.details.description,/"/g,'""'):""}"`].join(","))].join(`
`),P=new Blob([S],{type:"text/csv"}),H=URL.createObjectURL(P),ie=document.createElement("a");ie.href=H,ie.download=`saga-audit-log-${new Date().toISOString().split("T")[0]}.csv`,ie.click(),URL.revokeObjectURL(H)}},F=l.useMemo(()=>{const S=(r-1)*n;return K.slice(S,S+n)},[K,r,n]),ge=l.useMemo(()=>{const S=(r-1)*n;return V.slice(S,S+n)},[V,r,n]);return t.jsx("div",{className:"space-y-6",children:t.jsxs(ke,{children:[t.jsx(Xn,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Wt,{className:"w-5 h-5"}),t.jsx(Zn,{children:"System Audit Trail"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(be,{variant:"outline",children:[a.length," Total Entries"]}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:U,children:[t.jsx(wn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]})}),t.jsx(Pt,{children:t.jsxs(sn,{value:M,onValueChange:S=>I(S),children:[t.jsxs(rn,{className:"grid w-full grid-cols-2 max-w-md",children:[t.jsxs(Me,{value:"audit",className:"flex items-center gap-2",children:[t.jsx(Gi,{className:"w-4 h-4"}),"System Audit (",K.length,")"]}),t.jsxs(Me,{value:"movements",className:"flex items-center gap-2",children:[t.jsx(Aa,{className:"w-4 h-4"}),"Sample Movements (",V.length,")"]})]}),t.jsxs("div",{className:"mt-6 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:"Rows per page:"}),t.jsxs(ft,{value:String(n),onValueChange:S=>{s(Number(S)),o(1)},children:[t.jsx(ht,{className:"w-20 h-8",children:t.jsx(pt,{})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"25",children:"25"}),t.jsx(Ae,{value:"50",children:"50"}),t.jsx(Ae,{value:"100",children:"100"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(Ke,{placeholder:"Search logs, actions, users, or entities...",value:c,onChange:S=>u(S.target.value),className:"pl-10"})]}),t.jsxs(Z,{variant:"outline",onClick:O,children:[t.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:[t.jsxs(ft,{value:f,onValueChange:m,children:[t.jsx(ht,{children:t.jsx(pt,{placeholder:"Action"})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"all",children:"All Actions"}),G.map(S=>t.jsx(Ae,{value:S,children:S},S))]})]}),t.jsxs(ft,{value:x,onValueChange:b,children:[t.jsx(ht,{children:t.jsx(pt,{placeholder:"User"})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"all",children:"All Users"}),oe.map(S=>t.jsx(Ae,{value:S,children:S},S))]})]}),t.jsxs(ft,{value:h,onValueChange:g,children:[t.jsx(ht,{children:t.jsx(pt,{placeholder:"Status"})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"all",children:"All Status"}),t.jsx(Ae,{value:"success",children:"Success"}),t.jsx(Ae,{value:"failure",children:"Failure"})]})]}),t.jsxs(ft,{value:y,onValueChange:v,children:[t.jsx(ht,{children:t.jsx(pt,{placeholder:"Date Range"})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"all",children:"All Time"}),t.jsx(Ae,{value:"today",children:"Today"}),t.jsx(Ae,{value:"week",children:"This Week"}),t.jsx(Ae,{value:"month",children:"This Month"})]})]})]})]}),t.jsx(Oe,{value:"audit",className:"mt-6",children:K.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Wt,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No audit entries found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a.length===0?"No system activities have been logged yet":"Try adjusting your search or filter criteria"})]}):t.jsxs("div",{className:"rounded-md border",children:[t.jsxs(Ws,{children:[t.jsx(Gs,{children:t.jsxs(Ut,{children:[t.jsx(Ee,{children:"Timestamp"}),t.jsx(Ee,{children:"User"}),t.jsx(Ee,{children:"Action"}),t.jsx(Ee,{children:"Entity"}),t.jsx(Ee,{children:"Status"}),t.jsx(Ee,{children:"Description"})]})}),t.jsx(Ks,{children:F.map(S=>t.jsxs(Ut,{children:[t.jsx(Ie,{className:"font-mono text-xs",children:E(S.timestamp)}),t.jsx(Ie,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Gt,{className:"w-3 h-3 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:S.userName})]})}),t.jsx(Ie,{children:t.jsx(be,{variant:"outline",className:"font-mono text-xs",children:S.action})}),t.jsx(Ie,{children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Hf,{className:"w-3 h-3 text-muted-foreground"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:S.entityType})]}),t.jsx("div",{className:"font-mono text-xs",children:S.entityId})]})}),t.jsx(Ie,{children:S.success?t.jsx(st,{className:"w-4 h-4 text-green-600"}):t.jsx(Nn,{className:"w-4 h-4 text-red-600"})}),t.jsx(Ie,{className:"max-w-md",children:t.jsxs("div",{className:"text-sm",children:[typeof S.details?.description=="string"?S.details.description:S.details?.description?JSON.stringify(S.details.description):"",S.details?.metadata&&t.jsx("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:JSON.stringify(S.details.metadata,null,1)})]})})]},S.id))})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2",children:[t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>o(S=>Math.max(1,S-1)),disabled:r===1,children:"Prev"}),t.jsxs("span",{className:"text-xs",children:["Page ",r," of ",Math.max(1,Math.ceil(K.length/n))]}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>o(S=>S+1),disabled:r>=Math.ceil(K.length/n),children:"Next"})]})]})}),t.jsx(Oe,{value:"movements",className:"mt-6",children:V.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Aa,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No sample movements found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:z.length===0?"No sample movements have been tracked yet":"Try adjusting your search criteria"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"rounded-md border",children:t.jsxs(Ws,{children:[t.jsx(Gs,{children:t.jsxs(Ut,{children:[t.jsx(Ee,{children:"Timestamp"}),t.jsx(Ee,{children:"Sample ID"}),t.jsx(Ee,{children:"Action"}),t.jsx(Ee,{children:"Container"}),t.jsx(Ee,{children:"Position"}),t.jsx(Ee,{children:"User"}),t.jsx(Ee,{children:"Notes"})]})}),t.jsx(Ks,{children:ge.map(S=>t.jsxs(Ut,{children:[t.jsx(Ie,{className:"font-mono text-xs",children:E(S.timestamp)}),t.jsx(Ie,{className:"font-mono",children:S.sampleId}),t.jsx(Ie,{children:t.jsx(be,{variant:"outline",className:S.actionType==="check-in"?"bg-green-50 text-green-700 border-green-200":S.actionType==="check-out"?"bg-red-50 text-red-700 border-red-200":S.actionType==="move"?"bg-blue-50 text-blue-700 border-blue-200":"bg-yellow-50 text-yellow-700 border-yellow-200",children:S.actionType})}),t.jsx(Ie,{className:"font-mono text-sm",children:(()=>{const P=S.toContainerName||S.fromContainerName||S.toContainerId||"-";if(typeof P!="string")return P;const H=P.split("_");if(H.length>2&&/^\d+$/.test(H[H.length-1])){const R=H[H.length-1].slice(-3);return H.slice(0,-1).join("_")+"_"+R}return P})()}),t.jsx(Ie,{className:"font-mono text-sm",children:S.toPosition||S.fromPosition||"-"}),t.jsx(Ie,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Gt,{className:"w-3 h-3 text-muted-foreground"}),S.userName]})}),t.jsx(Ie,{className:"max-w-md text-sm",children:S.notes||"-"})]},S.id))})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2",children:[t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>o(S=>Math.max(1,S-1)),disabled:r===1,children:"Prev"}),t.jsxs("span",{className:"text-xs",children:["Page ",r," of ",Math.max(1,Math.ceil(V.length/n))]}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>o(S=>S+1),disabled:r>=Math.ceil(V.length/n),children:"Next"})]})]})})]})})]})})}function Kg({container:e,onContainerUpdate:n,initialSelectedSample:s,onSampleSelectionHandled:r,highlightSampleIds:o=[]}){const a=B.useRef(!1),i=B.useRef(!1),c=B.useRef(null),[u,f]=l.useState([]),[m,d]=l.useState(!1),[p,x]=l.useState("idle"),[b,h]=l.useState(null),[g,y]=l.useState(null),[v,w]=l.useState(null),[T,j]=l.useState("view"),[C,A]=l.useState(""),[N,M]=l.useState(()=>{try{return JSON.parse(localStorage.getItem("saga-user-initials")||"null")?.initials||""}catch{return""}}),[I,z]=l.useState(!1),[V,K]=l.useState(""),[ee,ue]=l.useState(null),[G,oe]=l.useState(null);l.useEffect(()=>{let _=!0;async function J(){try{const q=await Gn(e.id);console.log("[PlasmaBoxDashboard] fetched samples for container",e.id,Array.isArray(q)?q.length:0);const ae=k=>({position:Es(k.position||k.pos||"",e.containerType),sampleId:As(k.sample_id||k.sampleId||k.id||""),storageDate:k.storage_date||k.storageDate||"",lastAccessed:k.last_accessed||k.lastAccessed||"",history:k.history||[],isArchived:!!(k.data&&k.data.is_archived||k.is_archived)}),se=(q||[]).map(ae);_&&f(se)}catch(q){console.error("Error loading samples from Supabase:",q),_&&f([])}}return J(),()=>{_=!1}},[e.id]),l.useEffect(()=>{const _=nt.channel("samples-changes-"+e.id).on("postgres_changes",{event:"*",schema:"public",table:"samples",filter:`container_id=eq.${e.id}`},J=>{Gn(e.id).then(q=>{const ae=k=>({position:Es(k.position||k.pos||"",e.containerType),sampleId:As(k.sample_id||k.sampleId||k.id||""),storageDate:k.storage_date||k.storageDate||"",lastAccessed:k.last_accessed||k.lastAccessed||"",history:k.history||[],isArchived:!!(k.data&&k.data.is_archived||k.is_archived)}),se=(q||[]).map(ae);f(se)})}).subscribe();return()=>{nt.removeChannel(_)}},[e.id]),l.useEffect(()=>{if(!a.current){a.current=!0,c.current=u;return}const _=c.current;if(JSON.stringify(u)!==JSON.stringify(_)&&(c.current=u,!!i.current&&u.length>=0)){const J=setTimeout(()=>{async function q(){d(!0),x("saving"),h(null);try{const ae=await Promise.allSettled(u.map(L=>{const $={container_id:e.id,position:L.position,sample_id:L.sampleId,created_at:L.storageDate?new Date(L.storageDate).toISOString():void 0,updated_at:L.lastAccessed?new Date(L.lastAccessed).toISOString():void 0};return"history"in L&&($.history=L.history),"status"in L&&($.status=L.status),Ms($)})),se=ae.filter(L=>L.status==="fulfilled"),k=ae.filter(L=>L.status==="rejected");if(se.length>0)k.length>0&&console.debug("[autosave] Partial failures during samples upsert:",k),x("saved"),i.current=!1,setTimeout(()=>x("idle"),1200);else{const L=k[0]?.reason;x("error"),h(L?.message||"Failed to save samples to Supabase."),console.error("Error saving samples to Supabase (all failed):",k),S(L,"Failed to save samples to Supabase.")}}catch(ae){x("error"),h(ae?.message||"Failed to save samples to Supabase."),console.error("Unexpected error during autosave:",ae),S(ae,"Failed to save samples to Supabase.")}finally{d(!1)}}if(q(),n){const ae={...e,occupiedSlots:u.length,lastUpdated:vt(new Date().toISOString().slice(0,16),"T"," ")};n(ae)}},500);return()=>clearTimeout(J)}},[u,e,n]),l.useEffect(()=>{if(s&&u.length>0){const _=u.find(J=>J.sampleId===s);_&&(y(_.position),w(_),r&&r())}},[s,u,r]);const E=cn(e.containerType,e.sampleType),U=(()=>{const _=[];if(E.rows===14&&E.cols===7)for(let q=0;q<E.rows;q++){const ae=E.rows-q;for(let se=0;se<E.cols;se++){const L=`${String.fromCharCode(65+se)}${ae}`,$=u.find(X=>X.position===L);_.push({position:L,sample:$,isDisabled:!1})}}else for(let q=0;q<E.rows;q++)for(let ae=0;ae<E.cols;ae++){const se=`${String.fromCharCode(65+q)}${ae+1}`,k=u.find($=>$.position===se),L=e.sampleType==="DP Pools"&&e.containerType==="9x9-box"&&se==="I9";_.push({position:se,sample:k,isDisabled:L})}return _})(),F=v?.history||[],ge=async _=>{if(v)try{const J=await Mu(v.sampleId,e.id);if(!J){Ne.error("Unable to find authoritative sample record on server to archive.");return}const q={id:J.id,sample_id:J.sample_id,container_id:J.container_id,position:J.position,data:J.data||{}};q.data={...q.data||{},is_archived:_},await Ms(q),Ne.success(_?"Sample archived":"Sample unarchived");const se=(await Gn(e.id)||[]).map(L=>({position:Es(L.position||L.pos||"",e.containerType),sampleId:As(L.sample_id||L.sampleId||L.id||""),storageDate:L.storage_date||L.storageDate||"",lastAccessed:L.last_accessed||L.lastAccessed||"",history:L.history||[],isArchived:!!(L.data&&L.data.is_archived||L.is_archived)}));f(se);const k=se.find(L=>L.sampleId===v.sampleId);k&&w(k)}catch(J){console.error("Archive toggle failed",J),S(J,"Failed to update archive state")}};function S(_,J){const q=_&&(_.message||String(_))||J||"An error occurred",ae=_?.hint,se=_?.details||_?.stack||null;let k=J||"Something went wrong.",L="";const $=String(q).toLowerCase();$.includes("failed to fetch")||$.includes("networkerror")||$.includes("request timeout")||$.includes("fetcherror")?(k="Network or server unavailable. Please check your connection or try again.",L="If the problem persists, the backend may be down or unreachable."):$.includes("404")||$.includes("not found")?(k="Server endpoint not found. The backend route may be missing or misconfigured.",L="Try refreshing; if it continues, contact your administrator."):$.includes("row-level security")||$.includes("permission")||$.includes("policy")||$.includes("forbidden")||$.includes("403")?(k="Permission error. You do not have permission to perform this action.",L="Contact your administrator to request access."):$.includes("server")&&$.includes("failed")?(k="Server error while saving. Please try again.",L="If this repeats, check server logs or contact support."):(k=J||"An unexpected error occurred.",ae&&(L=String(ae))),console.debug("Detailed error (user toast):",{message:q,hint:ae,details:se,err:_});const ne=[k];L&&ne.push(L),Ne.error(ne.join(" — "))}const P=()=>E.rows===14&&E.cols===7?"flex-1 h-12 min-w-[48px]":E.rows<=5&&E.cols<=5?"w-32 h-14":E.rows<=7&&E.cols<=7?"w-28 h-12":"w-24 h-10",H=()=>E.rows===14&&E.cols===7?"flex-1 h-12 min-w-[48px]":E.rows<=5&&E.cols<=5?"w-32 h-14":E.rows<=7&&E.cols<=7?"w-28 h-12":"w-24 h-10",ie=P(),R=H(),W=E.rows===14||E.rows>7?"text-xs":E.rows>5?"text-sm":"text-base",le=(_,J)=>{U.find(ae=>ae.position===_)?.isDisabled||(y(_),w(J||null),T==="edit"&&K(_))},Y=_=>{const J=localStorage.getItem("saga-containers");let q=[];if(J)try{const k=JSON.parse(J);Array.isArray(k)&&(q=k)}catch(k){console.error("Error loading containers for duplicate check:",k)}const ae=[];if(q.forEach(k=>{if(k.id===e.id)return;const L=`samples-${k.id}`,$=localStorage.getItem(L);if($)try{const ne=JSON.parse($);typeof ne=="object"&&!Array.isArray(ne)?Object.entries(ne).forEach(([X,fe])=>{fe.id===_&&ae.push({container:k,position:X,sample:fe})}):Array.isArray(ne)&&ne.forEach(X=>{X.sampleId===_&&ae.push({container:k,position:X.position,sample:X})})}catch(ne){console.error(`Error checking samples in container ${k.id}:`,ne)}}),e.isArchived)return{allowed:!0,conflicts:[],foundInOtherContainers:ae};const se=ae.filter(k=>!k.container.isArchived);return se.length>0?{allowed:!0,conflicts:se,foundInOtherContainers:ae,shouldMove:!0}:{allowed:!0,conflicts:[],foundInOtherContainers:ae}},Q=()=>{if(!C.trim())return;if(!N.trim()){Ne.error("Please enter your initials before performing sample operations.");return}oe(null);let _=V||g;if(!_){const se=U.find(k=>!k.sample&&!k.isDisabled)?.position;if(!se){oe(`Container is full! Sample "${C.trim()}" was not saved.`),setTimeout(()=>oe(null),5e3);return}_=se,y(_),K(_)}const J=u.find(se=>se.sampleId===C.trim());if(J){J.position!==_&&(ue({from:J.position,to:_,sampleId:C.trim()}),setTimeout(()=>ue(null),3e3)),_e(J.position,_);return}const q=Y(C.trim());if(!q.allowed){const se=q.conflicts.map(k=>`${k.container.name} (${k.position})`).join(", ");oe(`Duplicate sample ID "${C.trim()}" already exists in general population container(s): ${se}. Archive containers allow duplicates, but general population containers can only duplicate samples from archive.`),setTimeout(()=>oe(null),8e3);return}if(q.shouldMove&&q.foundInOtherContainers.length>0){const se=q.foundInOtherContainers[0];Ce(se,_);return}if(q.foundInOtherContainers.length>0){const se=q.foundInOtherContainers[0];Ce(se,_);return}if(u.find(se=>se.position===_)){z(!0);return}me(_)},D=_=>{if(U.filter(se=>!se.sample&&!se.isDisabled).length===0)return null;if(!_)return te();const q=_.charCodeAt(0)-65,ae=parseInt(_.slice(1))-1;for(let se=0;se<E.cols;se++)for(let k=0;k<E.rows;k++){const L=`${String.fromCharCode(65+k)}${se+1}`,$=U.find(X=>X.position===L);if($?.sample||$?.isDisabled)continue;if(se>ae||se===ae&&k>q)return L}return te()},te=()=>{for(let _=0;_<E.cols;_++)for(let J=0;J<E.rows;J++){const q=`${String.fromCharCode(65+J)}${_+1}`,ae=U.find(se=>se.position===q);if(!ae?.sample&&!ae?.isDisabled)return q}return null},me=_=>{if(!C.trim())return;const J=new Date().toISOString(),q=u.find(X=>X.sampleId===C.trim());let ae=[];const se="checked-out-samples",k=localStorage.getItem(se);if(k)try{const X=JSON.parse(k),fe=X.find(we=>we.sampleId===C.trim());if(fe){ae=fe.history;const we=X.filter(Te=>Te.sampleId!==C.trim());localStorage.setItem(se,JSON.stringify(we))}}catch(X){console.error("Error loading checked out samples:",X)}const L=q?.history||ae,$={position:_,sampleId:C.trim(),storageDate:new Date().toISOString().split("T")[0],status:"in_container",history:L.length>0?[...L,{timestamp:J,action:"check-in",user:N.trim(),notes:`Sample checked into position ${_}`}]:[{timestamp:J,action:"check-in",user:N.trim(),notes:`Initial storage in position ${_}`}],isArchived:!1};i.current=!0,f(X=>[...X.filter(fe=>fe.position!==_),$]);try{let X=N.trim();try{const fe=JSON.parse(localStorage.getItem("saga-user-info")||"null");fe&&fe.id&&(X=fe.id)}catch{}gn("sample-check-in","sample",$.sampleId,{description:`Checked in sample ${$.sampleId} to ${e.name} (${e.id}) position ${_}`,metadata:{sampleId:$.sampleId,toContainerId:e.id,toContainerName:e.name,toPosition:_}},X)}catch(X){console.debug("Non-blocking: failed to create audit log for check-in",X)}A(""),K("");const ne=D(_);ne?(y(ne),K(ne)):(y(null),K("")),setTimeout(()=>{const X=document.querySelector('input[placeholder*="Scan or enter sample ID"]');X&&X.focus()},100)},_e=(_,J)=>{if(!C.trim())return;let q=u.find(L=>L.position===_);if(!q){const L="checked-out-samples",$=localStorage.getItem(L);if($)try{const ne=JSON.parse($),X=ne.find(fe=>fe.sampleId===C.trim());if(X){q=X;const fe=ne.filter(we=>we.sampleId!==C.trim());localStorage.setItem(L,JSON.stringify(fe))}}catch(ne){console.error("Error loading checked out samples:",ne)}}if(!q)return;const ae=new Date().toISOString(),se={...q,position:J,lastAccessed:new Date().toISOString().split("T")[0],status:"in_container",history:[...q.history,{timestamp:ae,action:"moved",user:N.trim(),fromPosition:_,toPosition:J,notes:`Sample moved from position ${_} to ${J}`}],isArchived:q.isArchived??!1};i.current=!0,f(L=>[...L.filter($=>$.position!==_&&$.position!==J),se]);try{let L=N.trim();try{const $=JSON.parse(localStorage.getItem("saga-user-info")||"null");$&&$.id&&(L=$.id)}catch{}gn("sample-move","sample",se.sampleId,{description:`Moved sample ${se.sampleId} from ${_} to ${J} in ${e.name} (${e.id})`,metadata:{sampleId:se.sampleId,fromContainerId:e.id,fromContainerName:e.name,fromPosition:_,toContainerId:e.id,toContainerName:e.name,toPosition:J}},L)}catch(L){console.debug("Non-blocking: failed to create audit log for move",L)}A(""),K("");const k=D(J);k?(y(k),K(k)):(y(J),w(se)),setTimeout(()=>{const L=document.querySelector('input[placeholder*="Scan or enter sample ID"]');L&&L.focus()},100)},Ce=(_,J)=>{if(!C.trim())return;const q=new Date().toISOString();let ae=_.sample,se;ae.sampleId?se=ae:se={position:_.position,sampleId:ae.id,storageDate:ae.timestamp?ae.timestamp.split("T")[0]:new Date().toISOString().split("T")[0],lastAccessed:ae.lastAccessed,history:ae.history||[{timestamp:ae.timestamp||new Date().toISOString(),action:"check-in",notes:`Initial storage in position ${_.position}`}]};const k={...se,position:J,lastAccessed:new Date().toISOString().split("T")[0],status:"in_container",history:[...se.history,{timestamp:q,action:"moved",user:N.trim(),fromPosition:_.position,toPosition:J,notes:`Sample moved from ${_.container.name} (${_.position}) to ${e.name} (${J})`}],isArchived:se.isArchived??!1},L=`samples-${_.container.id}`,$=localStorage.getItem(L);if($)try{const X=JSON.parse($);if(typeof X=="object"&&!Array.isArray(X))delete X[_.position],localStorage.setItem(L,JSON.stringify(X));else if(Array.isArray(X)){const fe=X.filter(we=>we.sampleId!==C.trim()||we.position!==_.position);localStorage.setItem(L,JSON.stringify(fe))}Se(_.container.id)}catch(X){console.error("Error removing sample from source container:",X)}i.current=!0,f(X=>[...X.filter(fe=>fe.position!==J),k]);try{let X=N.trim();try{const fe=JSON.parse(localStorage.getItem("saga-user-info")||"null");fe&&fe.id&&(X=fe.id)}catch{}gn("sample-move","sample",k.sampleId,{description:`Moved sample ${k.sampleId} from ${_.container.name} (${_.container.id}) ${_.position} to ${e.name} (${e.id}) ${J}`,metadata:{sampleId:k.sampleId,fromContainerId:_.container.id,fromContainerName:_.container.name,fromPosition:_.position,toContainerId:e.id,toContainerName:e.name,toPosition:J}},X)}catch(X){console.debug("Non-blocking: failed to create audit log for cross-container move",X)}ue({from:`${_.container.name} (${_.position})`,to:`${e.name} (${J})`,sampleId:C.trim()}),setTimeout(()=>ue(null),4e3),A(""),K("");const ne=D(J);ne?(y(ne),K(ne)):(y(J),w(k)),setTimeout(()=>{const X=document.querySelector('input[placeholder*="Scan or enter sample ID"]');X&&X.focus()},100)},Se=_=>{if(!n)return;const J=`samples-${_}`,q=localStorage.getItem(J);let ae=0;if(q)try{const k=JSON.parse(q);typeof k=="object"&&!Array.isArray(k)?ae=Object.keys(k).length:Array.isArray(k)&&(ae=k.length)}catch(k){console.error("Error counting samples in source container:",k)}const se=localStorage.getItem("saga-containers");if(se)try{const k=JSON.parse(se);if(Array.isArray(k)){const L=k.find($=>$.id===_);if(L){const $={...L,occupiedSlots:ae,lastUpdated:vt(new Date().toISOString().slice(0,16),"T"," ")},ne=k.map(X=>X.id===_?$:X);localStorage.setItem("saga-containers",JSON.stringify(ne))}}}catch(k){console.error("Error updating source container occupancy:",k)}},Ve=()=>{z(!1);const _=V||g;_&&me(_)};l.useEffect(()=>{T==="edit"&&setTimeout(()=>{const _=document.querySelector('input[placeholder*="Scan or enter sample ID"]');_&&_.focus()},100)},[T]);const De=()=>{if(g&&v){if(!N.trim()){Ne.error("Please enter your initials before checking out samples.");return}const _=new Date().toISOString(),J={...v,status:"checked_out",history:[...v.history,{timestamp:_,action:"check-out",user:N.trim(),notes:`Sample checked out from position ${g}`}]},q="checked-out-samples",ae=localStorage.getItem(q);let se=[];if(ae)try{se=JSON.parse(ae)}catch($){console.error("Error loading checked out samples:",$)}se=se.filter($=>$.sampleId!==J.sampleId),se.push(J),localStorage.setItem(q,JSON.stringify(se));let k=N.trim(),L=N.trim();try{const $=JSON.parse(localStorage.getItem("saga-user-info")||"null");$&&$.id&&(k=$.id),$&&$.name&&(L=$.name)}catch{}gn("sample-check-out","sample",v.sampleId,{description:`Checked out sample ${v.sampleId} from ${e.name} (${e.id}) position ${g}`,metadata:{sampleId:v.sampleId,fromContainerId:e.id,fromContainerName:e.name,fromPosition:g}},k),i.current=!0,f($=>$.map(ne=>ne.sampleId===J.sampleId?J:ne)),w(null)}},Ft=()=>{if(g&&v){if(!N.trim()){Ne.error("Please enter your initials before clearing this position.");return}if(confirm(`Are you sure you want to permanently delete sample ${v.sampleId}? This will remove the sample and all its history permanently.`)){let _=N.trim(),J=N.trim();try{const q=JSON.parse(localStorage.getItem("saga-user-info")||"null");q&&q.id&&(_=q.id),q&&q.name&&(J=q.name)}catch{}gn("sample-clear-position","sample",v.sampleId,{description:`Cleared sample ${v.sampleId} from ${e.name} (${e.id}) position ${g}`,metadata:{sampleId:v.sampleId,fromContainerId:e.id,fromContainerName:e.name,fromPosition:g}},_),i.current=!0,f(q=>q.filter(ae=>ae.position!==g)),w(null),y(null)}}},Xt=()=>{if(confirm("Are you sure you want to clear all samples from this container?")){let _=N.trim(),J=N.trim();try{const q=JSON.parse(localStorage.getItem("saga-user-info")||"null");q&&q.id&&(_=q.id),q&&q.name&&(J=q.name)}catch{}gn("container-clear-box","container",e.id,{description:`Cleared all samples from container ${e.name} (${e.id})`,metadata:{containerId:e.id,containerName:e.name}},_),i.current=!0,f([]),w(null),y(null)}},Fe=T==="edit";return t.jsxs("div",{className:"flex h-full",children:[t.jsxs("div",{className:"flex-1 p-6 space-y-6",children:[t.jsxs(ke,{className:"p-4",children:[t.jsxs("div",{className:"mb-2 min-h-[24px]",children:[m&&t.jsx("span",{className:"text-xs text-blue-600",children:"Saving..."}),p==="saved"&&!m&&t.jsx("span",{className:"text-xs text-green-600",children:"Saved"}),p==="error"&&b&&t.jsx("span",{className:"text-xs text-red-600",children:b})]}),ee&&t.jsxs(kt,{className:"mb-4 border-blue-200 bg-blue-50",children:[t.jsx(Ge,{className:"h-4 w-4 text-blue-600"}),t.jsxs(Tt,{className:"text-blue-800",children:["Sample ",t.jsx("strong",{children:ee.sampleId})," moved from position ",t.jsx("strong",{children:ee.from})," to ",t.jsx("strong",{children:ee.to})]})]}),G&&t.jsxs(kt,{className:"mb-4 border-red-200 bg-red-50",children:[t.jsx(Ge,{className:"h-4 w-4 text-red-600"}),t.jsx(Tt,{className:"text-red-800",children:G})]}),T==="edit"&&t.jsxs(kt,{className:"mb-4 border-blue-200 bg-blue-50",children:[t.jsx(Uf,{className:"h-4 w-4 text-blue-600"}),t.jsxs(Tt,{className:"text-blue-800",children:[t.jsx("strong",{children:"Sample Movement Policy:"})," ",e.isArchived?t.jsx(t.Fragment,{children:"Archive containers allow duplicate sample IDs without restrictions. Scanning an existing sample ID will move it to the new position."}):t.jsx(t.Fragment,{children:"General population containers prevent duplicates but allow sample movement. Scanning an existing sample ID will automatically move it from its current location to the new position."})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Z,{variant:T==="view"?"default":"outline",size:"sm",onClick:()=>{j("view"),A(""),M("")},children:"View Mode"}),t.jsxs(Z,{variant:T==="edit"?"default":"outline",size:"sm",onClick:()=>j("edit"),children:[t.jsx(jo,{className:"w-4 h-4 mr-2"}),"Scan Mode"]})]}),T==="edit"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ke,{placeholder:"Scan or enter sample ID",value:C,onChange:_=>A(_.target.value),onKeyPress:_=>_.key==="Enter"&&Q(),className:"w-48"}),t.jsx(Z,{size:"sm",onClick:Q,disabled:!C.trim()||!N.trim(),children:u.find(_=>_.sampleId===C.trim())?"Move Sample":"Add Sample"}),v&&t.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{if(!N.trim()){Ne.error("Please enter your initials before checking out samples.");return}De()},children:[t.jsx(yn,{className:"w-4 h-4 mr-2"}),"Checkout"]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(Z,{variant:"outline",size:"sm",onClick:Xt,children:[t.jsx(yn,{className:"w-4 h-4 mr-2"}),"Clear Box"]}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>j("edit"),children:[t.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Edit Box"]})]})]})]}),t.jsxs(ke,{className:"p-6 overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("h3",{className:"text-lg font-semibold",children:[e.name," ",t.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.location,")"]})]})}),g&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-primary bg-primary/20 rounded"}),t.jsxs("span",{className:"text-sm",children:["Selected: ",g]})]})]}),t.jsx("div",{className:"overflow-auto",children:t.jsxs("div",{className:`flex flex-col gap-1 ${E.rows===14&&E.cols===7?"w-full":"w-fit min-w-full"}`,children:[E.rows===14&&E.cols===7?t.jsxs("div",{className:"flex gap-1 mb-2",children:[t.jsx("div",{className:R}),Array.from({length:E.cols},(J,q)=>t.jsx("div",{className:`${R} flex items-center justify-center font-medium ${W}`,children:String.fromCharCode(65+q)},q))]}):t.jsxs("div",{className:"flex gap-1 mb-2",children:[t.jsx("div",{className:R}),Array.from({length:E.cols},(J,q)=>t.jsx("div",{className:`${R} flex items-center justify-center font-medium ${W}`,children:q+1},q))]}),Array.from({length:E.rows}).map((_,J)=>{const q=E.rows===14&&E.cols===7,ae=q?String(E.rows-J):String.fromCharCode(65+J);return t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:`${R} flex items-center justify-center font-medium ${W}`,children:ae}),Array.from({length:E.cols}).map((se,k)=>{const L=q?`${String.fromCharCode(65+k)}${E.rows-J}`:`${String.fromCharCode(65+J)}${k+1}`,$=U.find(Ze=>Ze.position===L),ne=$?.sample,X=$?.isDisabled,fe=g===L,we=!!(ne&&o.includes(ne.sampleId)),Te=!!(ne&&(ne.isArchived||ne.is_archived));return t.jsx("div",{className:`${ie} border-2 rounded transition-all duration-200 flex items-center justify-center ${X?"bg-gray-800 border-gray-600 cursor-not-allowed opacity-50":ne?we?"bg-yellow-500 text-black border-yellow-600 cursor-pointer hover:scale-105":Te?"bg-blue-500/30 text-white/70 cursor-pointer hover:scale-105 filter grayscale opacity-70":"bg-blue-500 text-white cursor-pointer hover:scale-105":"bg-gray-100 border-gray-300 hover:bg-gray-200 cursor-pointer hover:scale-105"} ${fe?"ring-2 ring-primary":""} ${we?"ring-2 ring-yellow-400":""}`,onClick:()=>!X&&le(L,ne),title:X?`Position ${L} disabled - DP Pools come in sets of 4 (effective capacity: 80)`:ne?`${ne.sampleId}${we?" (From Worklist)":""}`:`Empty position ${L}`,children:X?t.jsx("div",{className:`${W} font-medium leading-tight text-center px-1 text-gray-400`,children:"✕"}):ne?t.jsxs("div",{className:`${W} font-medium leading-tight text-center px-1 whitespace-nowrap relative`,children:[ne.sampleId,Te&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-muted text-xs px-1 rounded border",children:"arch"})]}):null},L)})]},J)})]})})]})]}),t.jsx("div",{className:"w-96 border-l bg-muted/30",children:v?t.jsxs("div",{className:"p-6 h-full flex flex-col",children:[t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{children:"Sample Details"}),v&&t.jsx("div",{className:"flex items-center gap-2",children:v.isArchived?t.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>ge(!1),children:"Unarchive"}):t.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>ge(!0),children:"Archive"})})]}),t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-muted-foreground",children:"Sample ID"}),t.jsx("p",{className:"font-medium",children:v.sampleId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-muted-foreground",children:"Position"}),t.jsx("p",{className:"font-medium",children:v.position})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-muted-foreground",children:"Storage Date"}),t.jsx("p",{className:"font-medium",children:v.storageDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-muted-foreground",children:"Archived"}),t.jsx("p",{className:"font-medium",children:v.isArchived?"Yes":"No"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-muted-foreground",children:"Last Accessed"}),t.jsx("div",{className:"flex gap-2",children:v.isArchived?t.jsx(Z,{variant:"ghost",size:"sm",className:"w-1/2",onClick:()=>ge(!1),children:"Unarchive"}):t.jsx(Z,{variant:"ghost",size:"sm",className:"w-1/2",onClick:()=>ge(!0),children:"Archive"})}),v.lastAccessed&&t.jsx("p",{className:"font-medium",children:v.lastAccessed})]})]})})]}),t.jsx(Jr,{}),t.jsxs("div",{className:"flex-1 mt-6",children:[t.jsxs("h4",{className:"mb-4",children:["Sample History (",F.length," entries) ",v.isArchived?"(Archived)":""]}),t.jsx(Qn,{className:"h-full",children:t.jsxs("div",{className:"space-y-4",children:[F.map((_,J)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"mt-1",children:[_.action==="check-in"&&t.jsx(qi,{className:"w-4 h-4 text-green-600"}),_.action==="check-out"&&t.jsx(yn,{className:"w-4 h-4 text-red-600"}),_.action==="moved"&&t.jsx(Kn,{className:"w-4 h-4 text-blue-600"}),_.action==="accessed"&&t.jsx(Zi,{className:"w-4 h-4 text-orange-600"})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"font-medium text-sm capitalize",children:vt(_.action,"-"," ")}),t.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(_.timestamp).toLocaleString()})]}),_.user&&t.jsx("p",{className:"text-sm text-muted-foreground",children:_.user}),_.notes&&/archive/i.test(_.notes)&&t.jsx("p",{className:"text-sm text-muted-foreground",children:_.notes}),_.fromPosition&&_.toPosition&&t.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.fromPosition," → ",_.toPosition]}),_.notes&&t.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic",children:_.notes})]})]}),J<F.length-1&&t.jsx(Jr,{})]},J)),F.length===0&&t.jsx("div",{className:"text-center py-8",children:t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx(wo,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No history available for this sample"})]})})]})})]}),t.jsx("div",{className:"mt-6 space-y-2",children:t.jsxs(Z,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{if(!Xe(N)){Ne.error("Please enter your initials in scan mode to clear this position.");return}Ft()},disabled:!v,children:[t.jsx(yn,{className:"w-4 h-4 mr-2"}),"Clear Position"]})})]}):t.jsx("div",{className:"p-6 flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-center text-muted-foreground",children:[t.jsx(Kn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),T==="edit"?t.jsxs("div",{children:[t.jsx("p",{className:"mb-2",children:"Scan Mode Active"}),t.jsx("p",{className:"text-sm",children:g?`Ready to add sample to position ${g}`:"Select a position or scan to add samples"})]}):t.jsxs("div",{children:[t.jsx("p",{className:"mb-2",children:"Select a sample to view its details and history"}),Fe&&C.trim()!==""&&t.jsx("div",{className:"text-sm text-muted-foreground",children:u.find(_=>_.sampleId===C.trim())?t.jsx("p",{children:"⚠️ Sample exists - will be moved to new position"}):t.jsx("p",{children:"✓ New sample ready to add"})})]})]})})}),t.jsx(qn,{open:I,onOpenChange:z,children:t.jsxs(Tn,{children:[t.jsxs(Jn,{children:[t.jsxs(An,{className:"flex items-center gap-2",children:[t.jsx(Ge,{className:"w-5 h-5 text-orange-500"}),"Position Already Occupied"]}),t.jsx(En,{children:"Confirm whether you want to replace the existing sample in this position."})]}),t.jsx("div",{className:"py-4",children:t.jsxs(kt,{children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsxs(Tt,{children:["Position ",V||g," already contains a sample. Do you want to replace the existing sample with the new one?"]})]})}),t.jsxs(Co,{children:[t.jsx(Z,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),t.jsx(Z,{variant:"destructive",onClick:Ve,children:"Replace Sample"})]})]})})]})}function Ya(e){return Array.isArray(e)?e.length:0}function Bc({...e}){return t.jsx(Hi,{"data-slot":"sheet",...e})}const Yg=l.forwardRef(({...e},n)=>t.jsx(yo,{"data-slot":"sheet-trigger",ref:n,...e}));Yg.displayName=yo.displayName;const qg=l.forwardRef(({...e},n)=>t.jsx(ar,{"data-slot":"sheet-close",ref:n,...e}));qg.displayName=ar.displayName;const zc=l.forwardRef(({...e},n)=>t.jsx(bo,{"data-slot":"sheet-portal",ref:n,...e}));zc.displayName=bo.displayName;const Uc=l.forwardRef(({className:e,...n},s)=>t.jsx(nr,{"data-slot":"sheet-overlay",className:he("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),ref:s,...n}));Uc.displayName=nr.displayName;const Wo=l.forwardRef(({className:e,children:n,side:s="right",...r},o)=>t.jsxs(zc,{children:[t.jsx(Uc,{}),t.jsxs(sr,{"data-slot":"sheet-content",ref:o,className:he("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[n,t.jsxs(ar,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[t.jsx(So,{className:"size-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wo.displayName=sr.displayName;const Go=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{"data-slot":"sheet-header",ref:s,className:he("flex flex-col gap-1.5 p-4",e),...n}));Go.displayName="SheetHeader";const Jg=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{"data-slot":"sheet-footer",ref:s,className:he("mt-auto flex flex-col gap-2 p-4",e),...n}));Jg.displayName="SheetFooter";const Ko=l.forwardRef(({className:e,...n},s)=>t.jsx(rr,{"data-slot":"sheet-title",ref:s,className:he("text-foreground font-semibold",e),...n}));Ko.displayName=rr.displayName;const Vc=l.forwardRef(({className:e,...n},s)=>t.jsx(or,{"data-slot":"sheet-description",ref:s,className:he("text-muted-foreground text-sm",e),...n}));Vc.displayName=or.displayName;var Xg="Label",Hc=l.forwardRef((e,n)=>t.jsx(pe.label,{...e,ref:n,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));Hc.displayName=Xg;var Zg=Hc;function Re({className:e,...n}){return t.jsx(Zg,{"data-slot":"label",className:he("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...n})}var vr="Switch",[Qg]=it(vr),[ev,tv]=Qg(vr),Wc=l.forwardRef((e,n)=>{const{__scopeSwitch:s,name:r,checked:o,defaultChecked:a,required:i,disabled:c,value:u="on",onCheckedChange:f,form:m,...d}=e,[p,x]=l.useState(null),b=je(n,w=>x(w)),h=l.useRef(!1),g=p?m||!!p.closest("form"):!0,[y,v]=Ht({prop:o,defaultProp:a??!1,onChange:f,caller:vr});return t.jsxs(ev,{scope:s,checked:y,disabled:c,children:[t.jsx(pe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":qc(y),"data-disabled":c?"":void 0,disabled:c,value:u,...d,ref:b,onClick:re(e.onClick,w=>{v(T=>!T),g&&(h.current=w.isPropagationStopped(),h.current||w.stopPropagation())})}),g&&t.jsx(Yc,{control:p,bubbles:!h.current,name:r,value:u,checked:y,required:i,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});Wc.displayName=vr;var Gc="SwitchThumb",Kc=l.forwardRef((e,n)=>{const{__scopeSwitch:s,...r}=e,o=tv(Gc,s);return t.jsx(pe.span,{"data-state":qc(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:n})});Kc.displayName=Gc;var nv="SwitchBubbleInput",Yc=l.forwardRef(({__scopeSwitch:e,control:n,checked:s,bubbles:r=!0,...o},a)=>{const i=l.useRef(null),c=je(i,a),u=uc(s),f=tc(n);return l.useEffect(()=>{const m=i.current;if(!m)return;const d=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(d,"checked").set;if(u!==s&&x){const b=new Event("click",{bubbles:r});x.call(m,s),m.dispatchEvent(b)}},[u,s,r]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:c,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Yc.displayName=nv;function qc(e){return e?"checked":"unchecked"}var sv=Wc,rv=Kc;function Ys({className:e,...n}){return t.jsx(sv,{"data-slot":"switch",className:he("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:t.jsx(rv,{"data-slot":"switch-thumb",className:he("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const qa=e=>{switch(e){case"Plasma Tubes":return"5x5-box";case"IDT Plates":return"7x14-rack";case"DP Pools":case"cfDNA Tubes":case"DTC Tubes":case"MNC Tubes":case"PA Pool Tubes":case"BC Tubes":default:return"9x9-box"}};function ov({open:e,onOpenChange:n,onCreateContainer:s}){const[r,o]=l.useState({name:"",location:"",containerType:"9x9-box",temperature:"-80°C",sampleType:"DP Pools",isTraining:!1,isArchived:!1}),a=["9x9-box","5x5-box","5x4-rack","9x9-rack","7x14-rack"],i=["DP Pools","cfDNA Tubes","DTC Tubes","MNC Tubes","PA Pool Tubes","Plasma Tubes","BC Tubes","IDT Plates"],c=p=>{const x=qa(p);o({...r,sampleType:p,containerType:x})},u=p=>{if(p.preventDefault(),!r.name.trim()||!r.location.trim()){Ne.error("Please fill in all required fields (Name and Location)");return}const x=cn(r.containerType,r.sampleType);s({...r,totalSlots:x.total}),o({name:"",location:"",containerType:"9x9-box",temperature:"-80°C",sampleType:"DP Pools",isTraining:!1,isArchived:!1}),n(!1)},f=()=>{o({name:"",location:"",containerType:"9x9-box",temperature:"-80°C",sampleType:"DP Pools",isTraining:!1,isArchived:!1}),n(!1)},m=cn(r.containerType,r.sampleType),d=qa(r.sampleType);return t.jsx(Bc,{open:e,onOpenChange:n,children:t.jsxs(Wo,{className:"w-[400px] sm:w-[500px] overflow-y-auto",children:[t.jsxs(Go,{children:[t.jsxs(Ko,{className:"flex items-center gap-2",children:["Create New Container",r.isArchived&&t.jsxs("span",{className:"text-xs bg-archive text-archive-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Et,{className:"w-3 h-3"}),"Archived"]}),r.isTraining&&t.jsxs("span",{className:"text-xs bg-training text-training-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Ot,{className:"w-3 h-3"}),"Training"]})]}),t.jsx(Vc,{children:"Create a new plasma storage container. Choose the appropriate container type based on your sample requirements."})]}),t.jsx("div",{className:"mt-6 pb-20",children:t.jsxs("form",{onSubmit:u,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"name",children:"Container Name"}),t.jsx(Ke,{id:"name",placeholder:"e.g., Plasma Box Alpha",value:r.name,onChange:p=>o({...r,name:p.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"location",children:"Location"}),t.jsx(Ke,{id:"location",placeholder:"e.g., Freezer A - Rack 1",value:r.location,onChange:p=>o({...r,location:p.target.value}),required:!0})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs(Re,{htmlFor:"archive-mode",className:"flex items-center gap-2",children:[t.jsx(Et,{className:"w-4 h-4 text-archive"}),"Archive Container"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Create this container in the archive (for long-term storage)"})]}),t.jsx(Ys,{id:"archive-mode",checked:r.isArchived,onCheckedChange:p=>o({...r,isArchived:p})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs(Re,{htmlFor:"training-mode",className:"flex items-center gap-2",children:[t.jsx(Ot,{className:"w-4 h-4 text-training"}),"Training Container"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this container as a training container (highlighted in orange)"})]}),t.jsx(Ys,{id:"training-mode",checked:r.isTraining,onCheckedChange:p=>o({...r,isTraining:p})})]})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"sampleType",children:"Sample Type"}),t.jsxs(ft,{value:r.sampleType,onValueChange:c,children:[t.jsx(ht,{children:t.jsx(pt,{})}),t.jsx(xt,{children:i.map(p=>t.jsx(Ae,{value:p,children:p},p))})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["🤖 Recommended container type: ",Sn(d)]})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"containerType",children:"Container Type"}),t.jsxs(ft,{value:r.containerType,onValueChange:p=>o({...r,containerType:p}),children:[t.jsx(ht,{children:t.jsx(pt,{})}),t.jsx(xt,{children:a.map(p=>t.jsxs(Ae,{value:p,children:[Sn(p),p===d&&t.jsx("span",{className:"text-green-600 ml-2",children:"🤖 Recommended"})]},p))})]})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"temperature",children:"Storage Temperature"}),t.jsxs(ft,{value:r.temperature,onValueChange:p=>o({...r,temperature:p}),children:[t.jsx(ht,{children:t.jsx(pt,{})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"-80°C",children:"-80°C (Ultra-low freezer)"}),t.jsx(Ae,{value:"-20°C",children:"-20°C (Standard freezer)"}),t.jsx(Ae,{value:"4°C",children:"4°C (Refrigerator)"}),t.jsx(Ae,{value:"RT",children:"RT (Room temperature)"})]})]})]})]}),t.jsxs(ke,{className:`p-4 ${r.isArchived?"border-archive-border bg-archive-background":r.isTraining?"border-training-border bg-training-background":""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("h4",{children:"Container Preview"}),r.isArchived&&t.jsxs("span",{className:"text-xs bg-archive text-archive-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Et,{className:"w-3 h-3"}),"Archived"]}),r.isTraining&&t.jsxs("span",{className:"text-xs bg-training text-training-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Ot,{className:"w-3 h-3"}),"Training"]}),r.containerType===d&&t.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-1 rounded",children:"🤖 Recommended"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Type:"}),t.jsx("span",{children:Sn(r.containerType)})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Grid Size:"}),t.jsxs("span",{children:[m.rows,"×",m.cols]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Total Capacity:"}),t.jsxs("span",{children:[m.total," positions"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Sample Type:"}),t.jsx("span",{children:r.sampleType})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Temperature:"}),t.jsx("span",{children:r.temperature})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Purpose:"}),t.jsx("span",{className:r.isArchived?"text-archive":r.isTraining?"text-training":"",children:r.isArchived?"Archived Container":r.isTraining?"Training Container":"Production Container"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Grid Layout Preview:"}),t.jsxs("div",{className:"flex flex-col gap-1",style:{maxWidth:"fit-content"},children:[Array.from({length:Math.min(m.rows,5)},(p,x)=>t.jsxs("div",{className:"flex gap-1",children:[Array.from({length:Math.min(m.cols,5)},(b,h)=>t.jsx("div",{className:`w-3 h-3 border rounded-sm ${r.isArchived?"bg-archive-background border-archive-border":r.isTraining?"bg-training-background border-training-border":"bg-gray-200 border-gray-300"}`},h)),m.cols>5&&t.jsx("div",{className:"flex items-center text-xs text-muted-foreground ml-1",children:"..."})]},x)),m.rows>5&&t.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"..."})]})]})]}),t.jsxs("div",{className:"flex gap-3 pt-6",children:[t.jsx(Z,{type:"button",variant:"outline",onClick:f,className:"flex-1",children:"Cancel"}),t.jsx(Z,{type:"submit",className:"flex-1",children:"Create Container"})]})]})})]})})}const av=e=>{switch(e){case"Plasma Tubes":return"5x5-box";case"DP Pools":case"cfDNA Tubes":case"DTC Tubes":case"MNC Tubes":case"PA Pool Tubes":case"BC Tubes":default:return"9x9-box"}};function iv({open:e,onOpenChange:n,container:s,onUpdateContainer:r}){const o=["DP Pools","Plasma Tubes","cfDNA Tubes","DTC Tubes","MNC Tubes","PA Pool Tubes","BC Tubes","IDT Plates"],a=["9x9-box","5x5-box","7x14-rack"],i=g=>{d(y=>({...y,sampleType:g}))},c=g=>{d(y=>({...y,containerType:g})),h(!0)},u=()=>{h(!1),n(!1)},f=g=>{if(g.preventDefault(),!s?.id)return;const y=cn(m.containerType,m.sampleType),v={...s,...m,id:s.id,totalSlots:y.total};r(v),n(!1)};s===void 0&&(s=null),console.log("EditContainerDialog received props:",{open:e,container:s?.id,onUpdateContainer:typeof r});const[m,d]=l.useState({name:"",location:"",containerType:"9x9-box",temperature:"-20°C",sampleType:"DP Pools",isTraining:!1,isArchived:!1});if(l.useEffect(()=>{s&&(d({name:Xe(s.name||""),location:Xe(s.location||""),containerType:s.containerType||"9x9-box",temperature:s.temperature||"-20°C",sampleType:s.sampleType||"DP Pools",isTraining:!!s.isTraining,isArchived:!!s.isArchived}),h(!1))},[s]),!s)return null;const p=cn(m.containerType,m.sampleType),x=av(m.sampleType),[b,h]=l.useState(!1);return t.jsx(Bc,{open:e,onOpenChange:n,children:t.jsxs(Wo,{className:"w-[400px] sm:w-[500px] overflow-y-auto",children:[t.jsxs(Go,{children:[t.jsxs(Ko,{className:"flex items-center gap-2",children:["Edit Container: ",s.name,m.isArchived&&t.jsxs("span",{className:"text-xs bg-archive text-archive-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Et,{className:"w-3 h-3"}),"Archived"]}),m.isTraining&&t.jsxs("span",{className:"text-xs bg-training text-training-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Ot,{className:"w-3 h-3"}),"Training"]})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Update the container settings. Be careful when changing container type if samples are already stored."})]}),t.jsx("div",{className:"mt-6 pb-20",children:t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"name",children:"Container Name"}),t.jsx(Ke,{id:"name",placeholder:"e.g., Plasma Box Alpha",value:m.name,onChange:g=>d({...m,name:g.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"location",children:"Location"}),t.jsx(Ke,{id:"location",placeholder:"e.g., Freezer A - Rack 1",value:m.location,onChange:g=>d({...m,location:g.target.value}),required:!0})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs(Re,{htmlFor:"archive-mode",className:"flex items-center gap-2",children:[t.jsx(Et,{className:"w-4 h-4 text-archive"}),"Archive Container"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Move this container to the archive (for long-term storage)"})]}),t.jsx(Ys,{id:"archive-mode",checked:m.isArchived,onCheckedChange:g=>d({...m,isArchived:g})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs(Re,{htmlFor:"training-mode",className:"flex items-center gap-2",children:[t.jsx(Ot,{className:"w-4 h-4 text-training"}),"Training Container"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this container as a training container (highlighted in orange)"})]}),t.jsx(Ys,{id:"training-mode",checked:m.isTraining,onCheckedChange:g=>d({...m,isTraining:g})})]})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"sampleType",children:"Sample Type"}),t.jsxs(ft,{value:m.sampleType,onValueChange:i,children:[t.jsx(ht,{children:t.jsx(pt,{})}),t.jsx(xt,{children:o.map(g=>t.jsx(Ae,{value:g,children:g},g))})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["🤖 Recommended container type: ",Sn(x)]})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"containerType",children:"Container Type"}),t.jsxs(ft,{value:m.containerType,onValueChange:c,children:[t.jsx(ht,{children:t.jsx(pt,{})}),t.jsx(xt,{children:a.map(g=>t.jsxs(Ae,{value:g,children:[Sn(g),g===x&&t.jsx("span",{className:"text-green-600 ml-2",children:"🤖 Recommended"})]},g))})]})]}),t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"temperature",children:"Storage Temperature"}),t.jsxs(ft,{value:m.temperature,onValueChange:g=>d({...m,temperature:g}),children:[t.jsx(ht,{children:t.jsx(pt,{})}),t.jsxs(xt,{children:[t.jsx(Ae,{value:"-80°C",children:"-80°C (Ultra-low freezer)"}),t.jsx(Ae,{value:"-20°C",children:"-20°C (Standard freezer)"}),t.jsx(Ae,{value:"4°C",children:"4°C (Refrigerator)"}),t.jsx(Ae,{value:"RT",children:"RT (Room temperature)"})]})]})]})]}),b&&t.jsxs(kt,{variant:"destructive",children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsxs(Tt,{children:[t.jsx("strong",{children:"Warning:"})," This container has ",s.occupiedSlots," samples. Changing the container type may affect sample positions and grid layout."]})]}),t.jsxs(ke,{className:`p-4 ${m.isArchived?"border-archive-border bg-archive-background":m.isTraining?"border-training-border bg-training-background":""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("h4",{children:"Container Preview"}),m.isArchived&&t.jsxs("span",{className:"text-xs bg-archive text-archive-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Et,{className:"w-3 h-3"}),"Archived"]}),m.isTraining&&t.jsxs("span",{className:"text-xs bg-training text-training-foreground px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Ot,{className:"w-3 h-3"}),"Training"]}),m.containerType===x&&t.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-1 rounded",children:"🤖 Recommended"}),s.containerType!==m.containerType&&t.jsx("span",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded",children:"⚠️ Type Changed"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Type:"}),t.jsx("span",{children:Sn(m.containerType)})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Grid Size:"}),t.jsxs("span",{children:[p.rows,"×",p.cols]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Total Capacity:"}),t.jsxs("span",{children:[p.total," positions"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Current Samples:"}),t.jsxs("span",{children:[s.occupiedSlots," samples"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Sample Type:"}),t.jsx("span",{children:m.sampleType})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Temperature:"}),t.jsx("span",{children:m.temperature})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Purpose:"}),t.jsx("span",{className:m.isArchived?"text-archive":m.isTraining?"text-training":"",children:m.isArchived?"Archived Container":m.isTraining?"Training Container":"Production Container"})]})]}),m.sampleType==="IDT Plates"&&t.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Note: IDT Plates use a 7×14 layout (columns lettered A–G). Rows are numbered 1–14 with 1 at the bottom and 14 at the top."}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Grid Layout Preview:"}),t.jsx("div",{className:"flex flex-col gap-1",style:{maxWidth:"fit-content"},children:(()=>{const g=p.rows,y=p.cols;let v=[],w=[];m.containerType==="7x14-rack"?(v=Array.from({length:y},(C,A)=>String.fromCharCode(65+A)),w=Array.from({length:g},(C,A)=>String(g-A))):(v=Array.from({length:y},(C,A)=>String(A+1)),w=Array.from({length:g},(C,A)=>String.fromCharCode(65+A)));const T=w.slice(0,Math.min(w.length,5)),j=v.slice(0,Math.min(v.length,5));return t.jsxs("div",{children:[t.jsxs("div",{className:"flex gap-1 mb-1",children:[t.jsx("div",{className:"w-4"}),j.map(C=>t.jsx("div",{className:"text-xs text-muted-foreground text-center w-3",children:C},C)),v.length>5&&t.jsx("div",{className:"text-xs text-muted-foreground ml-1",children:"..."})]}),T.map(C=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"text-xs text-muted-foreground w-4 text-right",children:C}),j.map((A,N)=>t.jsx("div",{className:`w-3 h-3 border rounded-sm ${m.isArchived?"bg-archive-background border-archive-border":m.isTraining?"bg-training-background border-training-border":"bg-gray-200 border-gray-300"}`},N)),v.length>5&&t.jsx("div",{className:"text-xs text-muted-foreground ml-1",children:"..."})]},C)),w.length>5&&t.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"..."})]})})()})]})]}),t.jsxs("div",{className:"flex gap-3 pt-6",children:[t.jsx(Z,{type:"button",variant:"outline",onClick:u,className:"flex-1",children:"Cancel"}),t.jsx(Z,{type:"submit",className:"flex-1",children:"Save Changes"})]})]})})]})})}function lv({samples:e,searchQuery:n,onNavigateToSample:s}){const[r,o]=l.useState(25),[a,i]=l.useState(1),c=Math.ceil(e.length/r)||1,u=e.slice((a-1)*r,a*r),f=n.split(",").map(d=>d.trim()).filter(d=>d.length>0),m=f.length>1;return e.length===0?t.jsx(ke,{className:"p-12 text-center",children:t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx(Kn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-2",children:"No samples found"}),t.jsxs("p",{className:"text-sm",children:["No samples match your search for"," ",m?t.jsxs(t.Fragment,{children:[t.jsxs("strong",{children:[f.length," terms"]}),": ",f.map((d,p)=>t.jsxs("span",{children:[t.jsxs("strong",{children:['"',d,'"']}),p<f.length-1&&(p===f.length-2?" or ":", ")]},p))]}):t.jsxs("strong",{children:['"',n,'"']})]}),t.jsxs("p",{className:"text-sm mt-2",children:["Try searching by sample ID, container name, or location",m&&", or separate multiple terms with commas"]})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-2",children:"Search for samples"}),t.jsx("p",{className:"text-sm",children:"Enter a sample ID, container name, or location to find samples"}),t.jsx("p",{className:"text-sm mt-1 text-xs",children:"Tip: Use commas to search for multiple samples at once"})]})]})}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[t.jsxs("div",{children:[t.jsxs("h3",{children:["Search Results",t.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.length," samples found",m?` for ${f.length} search terms`:"",")"]})]}),m&&t.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Searching: ",f.map((d,p)=>t.jsx("span",{className:"bg-muted px-2 py-1 rounded mr-1",children:d},p))]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{htmlFor:"page-size",className:"text-sm text-muted-foreground",children:"Per page:"}),t.jsxs("select",{id:"page-size",className:"border rounded px-2 py-1 text-sm",value:r,onChange:d=>{o(Number(d.target.value)),i(1)},children:[t.jsx("option",{value:25,children:"25"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]})]}),t.jsx("div",{className:"grid gap-4",children:u.map((d,p)=>{const x=Math.floor((new Date().getTime()-new Date(d.storageDate).getTime())/864e5),b=d.lastAccessed?Math.floor((new Date().getTime()-new Date(d.lastAccessed).getTime())/(1e3*60*60*24)):null,h=m?f.find(g=>{const y=g.toLowerCase();return d.sampleId.toLowerCase().includes(y)||d.position.toLowerCase().includes(y)||d.containerName.toLowerCase().includes(y)||d.containerLocation.toLowerCase().includes(y)||d.containerId.toLowerCase().includes(y)}):null;return t.jsx(ke,{className:"p-4 hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Kn,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:d.sampleId}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Position ",d.position]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:h&&t.jsxs(be,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:['Matched: "',h,'"']})})]}),t.jsx("div",{className:"flex items-center gap-4 text-sm",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Jf,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:d.containerName}),t.jsx("span",{className:"text-muted-foreground",children:"•"}),t.jsx("span",{className:"text-muted-foreground",children:d.containerLocation})]})}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(qi,{className:"w-4 h-4"}),t.jsxs("span",{children:["Stored ",x===0?"today":`${x} days ago`]}),t.jsxs("span",{children:["(",d.storageDate,")"]})]}),d.lastAccessed&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"•"}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsxs("span",{children:["Last accessed ",b===0?"today":`${b} days ago`]})})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[x>90&&t.jsxs(be,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[t.jsx(Tf,{className:"w-3 h-3"}),"Long-term storage (",x," days)"]}),d.lastAccessed&&b&&b<7&&t.jsx(be,{variant:"outline",className:"text-xs text-green-600",children:"Recently accessed"}),!d.lastAccessed&&t.jsx(be,{variant:"outline",className:"text-xs text-orange-600",children:"Never accessed"}),t.jsxs(be,{variant:"outline",className:"text-xs text-blue-600",children:[d.history?.length||0," history entries"]})]})]}),t.jsx("div",{className:"flex items-center gap-2 ml-4",children:t.jsxs(Z,{size:"sm",onClick:()=>s(d.containerId,d.sampleId),className:"flex items-center gap-2",children:["View Sample",t.jsx(Yi,{className:"w-4 h-4"})]})})]})},`${d.containerId}-${d.position}-${p}`)})}),c>1&&t.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>i(1),disabled:a===1,children:"« First"}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>i(a-1),disabled:a===1,children:"‹ Prev"}),t.jsxs("span",{className:"text-sm",children:["Page ",a," of ",c]}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>i(a+1),disabled:a===c,children:"Next ›"}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>i(c),disabled:a===c,children:"Last »"})]})]})}function cv({onSamplesExtracted:e,onClearWorklist:n,className:s}){const[r,o]=l.useState(null),[a,i]=l.useState(!1),[c,u]=l.useState(null),f=l.useRef(null),m=async h=>{const g=h.target.files?.[0];if(g){i(!0),u(null),o(null);try{const y=await d(g),v=p(y,g.name);o(v),e(v.sampleIds,v.duplicateIds)}catch(y){u(y instanceof Error?y.message:"Failed to parse file")}finally{i(!1)}}},d=h=>new Promise((g,y)=>{const v=new FileReader;v.onload=w=>{const T=w.target?.result;typeof T=="string"?g(T):y(new Error("Failed to read file content"))},v.onerror=()=>y(new Error("Failed to read file")),v.readAsText(h)}),p=(h,g)=>{const y=h.split(`
`).map(V=>Xe(V)).filter(V=>V.length>0);if(y.length===0)throw new Error("File appears to be empty");const v=y[0],w=v.includes("	")?"	":",",T=v.split(w).map(V=>vt(Xe(V),/"/g,"")),j=/dpq|dpc/i.test(g);let C=-1;if(j)if(T.length>15)C=15;else throw new Error("Expected at least 16 columns (A-P) for DPQ/DPc worklists");else{const V=["Sample_SampleID","SampleID","Sample ID","Sample_ID","sampleid","sample_id","ID","Sample","Barcode","sample_barcode","Sample_Barcode"];for(const K of V){const ee=T.findIndex(ue=>ue.toLowerCase()===K.toLowerCase()||ue.toLowerCase().includes(K.toLowerCase()));if(ee!==-1){C=ee;break}}}C===-1&&(C=0);const A=[],N=new Map;let M=0;for(let V=1;V<y.length;V++){const K=y[V].split(w).map(G=>vt(Xe(G),/"/g,""));if(K.length<=C){M++;continue}const ee=K[C];if(!ee||ee.length===0){M++;continue}A.push(ee);const ue=N.get(ee)||0;N.set(ee,ue+1)}const I=Array.from(new Set(A)),z=Array.from(N.entries()).filter(([V,K])=>K>1).map(([V,K])=>V);if(I.length===0)throw new Error("No valid sample IDs found in the file");return{totalRows:y.length-1,sampleIds:I,duplicateIds:z,invalidRows:M,fileName:g}},x=()=>{o(null),u(null),e([],[]),f.current&&(f.current.value=""),typeof n=="function"&&n()},b=()=>{const h=`Sample_SampleID,Sample_Type,Source_Plate,Source_Well,Destination_Plate,Destination_Well,Volume
M00H4FAD,Plasma,MagPlate,A1,M00H4FAFP,A1,
M00H4FBD,Plasma,MagPlate,A2,M00H4FAFP,A2,
M00H4FCD,Plasma,MagPlate,A3,M00H4FAFP,A3,`,g=new Blob([h],{type:"text/csv"}),y=window.URL.createObjectURL(g),v=document.createElement("a");v.href=y,v.download="worklist_template.csv",document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(y)};return t.jsx(ke,{className:`p-6 ${s}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"flex items-center gap-2",children:[t.jsx(en,{className:"w-5 h-5"}),"Upload Worklist"]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload a CSV or TSV file containing sample IDs to search for multiple samples at once"})]}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-2",children:[t.jsx(wn,{className:"w-4 h-4"}),"Download Template"]})]}),!r&&t.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/20 rounded-lg p-8 text-center",children:[t.jsx("input",{ref:f,type:"file",accept:".csv,.tsv,.txt",onChange:m,className:"hidden",id:"worklist-upload"}),t.jsxs("label",{htmlFor:"worklist-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[t.jsx("div",{className:"flex items-center justify-center w-16 h-16 border-2 border-dashed border-muted-foreground/20 rounded-full",children:t.jsx(Wt,{className:"w-8 h-8 text-muted-foreground"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Click to upload worklist file"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Supports CSV, TSV, and TXT files"})]})]})]}),a&&t.jsxs(kt,{children:[t.jsx(en,{className:"h-4 w-4"}),t.jsx(Tt,{children:"Processing worklist file..."})]}),c&&t.jsxs(kt,{variant:"destructive",children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsxs(Tt,{children:[t.jsx("strong",{children:"Error:"})," ",c]})]}),r&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs(kt,{children:[t.jsx(st,{className:"h-4 w-4 text-green-600"}),t.jsxs(Tt,{children:[t.jsx("strong",{children:"Worklist processed successfully!"}),t.jsx("br",{}),"Found ",r.sampleIds.length," unique sample IDs from ",r.fileName]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-medium text-green-600",children:r.sampleIds.length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Unique Samples"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-medium",children:r.totalRows}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Rows"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-medium text-blue-600",children:r.duplicateIds.length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Multi-Use"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-medium text-red-600",children:r.invalidRows}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Invalid Rows"})]})]}),r.duplicateIds.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Ge,{className:"w-4 h-4 text-blue-600"}),"Samples with Multiple Entries (",r.duplicateIds.length,")"]}),t.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"These samples appear multiple times in the worklist (likely used in multiple process steps)"}),t.jsx(Qn,{className:"h-20 border rounded p-2",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:r.duplicateIds.map((h,g)=>t.jsx(be,{variant:"secondary",className:"text-xs",children:h},g))})})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"mb-2",children:["Sample IDs to Search (",r.sampleIds.length,")"]}),t.jsx(Qn,{className:"h-32 border rounded p-2",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:r.sampleIds.map((h,g)=>t.jsx(be,{variant:"secondary",className:"text-xs",children:h},g))})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(Z,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[t.jsx(Nn,{className:"w-4 h-4"}),"Clear Worklist"]}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>f.current?.click(),className:"flex items-center gap-2",children:[t.jsx(en,{className:"w-4 h-4"}),"Upload New File"]})]})]})]})})}const dv=({searchedSampleIds:e,searchResults:n,duplicateIds:s,analysis:r,onNavigateToSample:o,onClearWorklist:a})=>{const i=r??{missing:[]},c=Object.values(n??{}).filter(v=>v&&v.sample&&v.container),u=c.length>0,[f,m]=B.useState([]),[d,p]=B.useState([]),[x,b]=B.useState(null),h=v=>{m(w=>w.includes(v)?w.filter(T=>T!==v):[...w,v])},g=v=>{if(!v.length)return;let w="",T="",j="";try{w=JSON.parse(localStorage.getItem("saga-user-initials")||"null")?.initials||"";const I=JSON.parse(localStorage.getItem("saga-user-info")||"null");T=I?.name||w||"Unknown",j=I?.id||w||"Unknown"}catch{}const C=[],A=new Date().toISOString();let N=[];try{N=JSON.parse(localStorage.getItem("saga-audit-logs")||"[]"),Array.isArray(N)||(N=[])}catch{N=[]}c.forEach(M=>{const{sample:I,container:z}=M;if(v.includes(I.sampleId)){const V=`samples-${z.id}`,K=localStorage.getItem(V);if(K){const ee=JSON.parse(K);ee[I.position]&&(C.push({sampleId:I.sampleId,containerId:z.id,position:I.position,sampleData:ee[I.position]}),delete ee[I.position],ee[`_audit_${I.position}`]={action:"checkout",by:w,at:A,sampleId:I.sampleId},localStorage.setItem(V,JSON.stringify(ee)),N.push({id:`${I.sampleId}-${A}`,timestamp:A,userId:j,userName:T,userRole:"",action:"sample-check-out",entityType:"sample",entityId:I.sampleId,details:{description:`Checked out sample ${I.sampleId} from ${z.name} (${z.id}) position ${I.position}`,metadata:{sampleId:I.sampleId,fromContainerId:z.id,fromContainerName:z.name,fromPosition:I.position}},severity:"medium",success:!0}))}}}),localStorage.setItem("saga-audit-logs",JSON.stringify(N)),b(C),p(M=>[...M,...v.filter(I=>!M.includes(I))]),m([])},y=v=>{x&&(x.forEach(({sampleId:w,containerId:T,position:j,sampleData:C})=>{const A=`samples-${T}`,N=localStorage.getItem(A);let M={};N&&(M=JSON.parse(N)),M[j]=C,M[`_audit_${j}`]&&delete M[`_audit_${j}`],localStorage.setItem(A,JSON.stringify(M))}),p(w=>w.filter(T=>!v.includes(T))),b(null))};return t.jsxs("div",{className:"space-y-8",children:[i.missing.length>0&&t.jsxs(ke,{className:"p-6",children:[t.jsxs("h3",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Nn,{className:"w-5 h-5 text-red-600"}),"Missing Samples (",r.missing.length,")"]}),t.jsx(Qn,{className:"h-32",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:r.missing.map((v,w)=>t.jsx(be,{variant:"destructive",className:"text-xs",children:v},w))})}),t.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[t.jsx("p",{children:"These samples were not found in any container. They may be:"}),t.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.jsx("li",{children:"Currently checked out of storage"}),t.jsx("li",{children:"Stored in containers not in the system"}),t.jsx("li",{children:"Have different sample IDs than expected"})]})]})]}),u&&t.jsx("div",{className:"w-full",children:t.jsxs(ke,{className:"p-6",children:[(()=>{const v=Array.from(new Map(c.map(w=>[w.container.id,w.container])).values());return v.length===0?null:t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"font-semibold text-sm mb-1",children:["Containers to Pull (",v.length,"):"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(w=>t.jsxs(be,{variant:"outline",className:"text-xs",children:[w.name," ",t.jsxs("span",{className:"text-muted-foreground",children:["(",w.location,")"]})]},w.id))})]})})(),t.jsxs("h3",{className:"flex items-center gap-2 mb-4",children:[t.jsx(st,{className:"w-5 h-5 text-green-600"}),"Found Samples (",c.length,")"]}),t.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[t.jsx(Z,{size:"sm",variant:"default",onClick:()=>g(f),disabled:f.length===0,children:"Checkout Selected"}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>y(d),disabled:d.length===0,children:"Undo"})]}),t.jsxs(Qn,{className:"h-64",children:[t.jsx("div",{className:"flex items-center gap-2 mb-2",children:(()=>{const v=B.useRef(null),w=c.filter(C=>!d.includes(C.sample.sampleId)).map(C=>C.sample.sampleId),T=w.length>0&&w.every(C=>f.includes(C)),j=f.length>0&&w.some(C=>f.includes(C))&&!T;return B.useEffect(()=>{v.current&&(v.current.indeterminate=j)},[j,f,c,d]),t.jsxs(t.Fragment,{children:[t.jsx("input",{ref:v,type:"checkbox",checked:T,onChange:C=>{C.target.checked?m(w):m([])},disabled:c.length===0}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"Select All"})]})})()}),t.jsx("div",{className:"flex flex-col gap-2 w-full",children:c.map((v,w)=>{const T=v.sample.sampleId,j=d.includes(T);return t.jsxs("div",{className:`flex items-center gap-3 bg-muted/30 rounded px-2 py-1 ${j?"opacity-50":""}`,style:{width:"100%"},children:[t.jsx("input",{type:"checkbox",checked:f.includes(T),onChange:()=>h(T),disabled:j}),t.jsx(be,{variant:"secondary",className:"text-xs",children:T}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["in ",t.jsx("strong",{children:v.container.name})," (",t.jsx("span",{className:"font-mono",children:v.container.location}),")"]}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Position: ",t.jsx("strong",{children:v.sample.position})]}),t.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>o(v.container.id,T),className:"h-6 w-6 p-0","aria-label":`Go to ${T}`,children:t.jsx(Yi,{className:"w-3 h-3"})})]},w)})})]})]})})]})};function _s({className:e,...n}){return t.jsx("textarea",{"data-slot":"textarea",className:he("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...n})}function uv({allSamples:e,onNavigateToSample:n}){const[s,r]=l.useState(""),[o,a]=l.useState([]),[i,c]=l.useState(!1),[u,f]=l.useState("paste"),m=l.useCallback(v=>{const w=Xe(v).split(`
`),T=[];return w.forEach((j,C)=>{if(C===0&&(Xe(j).toLowerCase().includes("sample")||Xe(j).toLowerCase().includes("id")||Xe(j).toLowerCase().includes("tube")))return;const A=j.split(","),N=vt(Xe(A[0]),/['"]/g,"");N&&N.length>0&&T.push(N)}),T},[]),d=l.useCallback(v=>{const w=v.target.files?.[0];if(!w)return;if(!w.name.toLowerCase().endsWith(".csv")){Ne.error("Please upload a CSV file");return}const T=new FileReader;T.onload=j=>{const C=j.target?.result;r(C),Ne.success(`Loaded ${w.name}`)},T.readAsText(w)},[]),p=l.useCallback(()=>{if(!s.trim()){Ne.error("Please enter sample IDs or upload a CSV file");return}c(!0);try{let v;if(s.includes(",")&&s.includes(`
`)?v=m(s):v=s.split(/[\n,]/).map(A=>A.trim()).filter(A=>A.length>0),v.length===0){Ne.error("No valid sample IDs found in input"),c(!1);return}const T=[...new Set(v)].map(A=>{const N=e.filter(({sample:I})=>I.sampleId.toLowerCase()===A.toLowerCase());if(N.length===0)return{sampleId:A,found:!1,error:"Sample not found"};let M=N[0];if(N.length>1){const I=N.find(z=>!z.container.isArchived);I&&(M=I)}return{sampleId:A,found:!0,containerId:M.container.id,containerName:M.container.name,containerLocation:M.container.location,position:M.sample.position,sampleType:M.container.sampleType,isArchived:M.container.isArchived}});a(T);const j=T.filter(A=>A.found).length,C=T.length-j;C===0?Ne.success(`All ${j} samples found!`):Ne.warning(`Found ${j} samples, ${C} not found`)}catch(v){console.error("Error performing bulk search:",v),Ne.error("Error processing search. Please check your input format.")}finally{c(!1)}},[s,e,m]),x=l.useCallback(()=>{if(o.length===0){Ne.error("No results to export");return}const v=["Sample ID,Status,Container ID,Container Name,Location,Position,Sample Type,Archived,Notes",...o.map(C=>[C.sampleId,C.found?"Found":"Not Found",C.containerId||"",C.containerName||"",C.containerLocation||"",C.position||"",C.sampleType||"",C.isArchived?"Yes":"No",C.error||""].map(A=>`"${A}"`).join(","))].join(`
`),w=new Blob([v],{type:"text/csv"}),T=URL.createObjectURL(w),j=document.createElement("a");j.href=T,j.download=`bulk-sample-search-results-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(T),Ne.success("Results exported to CSV")},[o]),b=l.useCallback(()=>{r(""),a([])},[]),h=o.filter(v=>v.found).length,g=o.length-h,y=o.filter(v=>v.found&&v.isArchived).length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(ke,{children:[t.jsxs(Xn,{children:[t.jsxs(Zn,{className:"flex items-center gap-2",children:[t.jsx(Gf,{className:"h-5 w-5"}),"Bulk Sample Search"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file or paste a list of sample IDs to locate multiple samples at once. Archive samples may have duplicate IDs."})]}),t.jsxs(Pt,{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(Z,{variant:u==="paste"?"default":"outline",size:"sm",onClick:()=>f("paste"),children:[t.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Paste List"]}),t.jsxs(Z,{variant:u==="upload"?"default":"outline",size:"sm",onClick:()=>f("upload"),children:[t.jsx(en,{className:"h-4 w-4 mr-2"}),"Upload CSV"]})]}),u==="upload"?t.jsxs("div",{className:"space-y-2",children:[t.jsx(Re,{htmlFor:"csv-upload",children:"CSV File Upload"}),t.jsx(Ke,{id:"csv-upload",type:"file",accept:".csv",onChange:d,className:"cursor-pointer"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload a CSV file with sample IDs in the first column. Headers are automatically detected."})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsx(Re,{htmlFor:"sample-list",children:"Sample IDs"}),t.jsx(_s,{id:"sample-list",placeholder:`Enter sample IDs separated by commas or new lines:
SAMPLE001
SAMPLE002
SAMPLE003

Or paste CSV content directly...`,value:s,onChange:v=>r(v.target.value),rows:8,className:"font-mono text-sm"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter one sample ID per line, or separate with commas. You can also paste CSV content directly."})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Z,{onClick:p,disabled:i||!s.trim(),className:"flex-1",children:i?t.jsxs(t.Fragment,{children:[t.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Searching..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Search Samples"]})}),t.jsxs(Z,{variant:"outline",onClick:b,disabled:i,children:[t.jsx(So,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})]}),o.length>0&&t.jsxs(ke,{children:[t.jsxs(Xn,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(Zn,{className:"flex items-center gap-2",children:["Search Results",t.jsxs(be,{variant:"outline",children:[o.length," samples searched"]})]}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:x,children:[t.jsx(wn,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),t.jsxs("div",{className:"flex gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(st,{className:"h-4 w-4 text-green-600"}),t.jsxs("span",{className:"text-green-600",children:[h," found"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Nn,{className:"h-4 w-4 text-red-600"}),t.jsxs("span",{className:"text-red-600",children:[g," not found"]})]}),y>0&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),t.jsxs("span",{className:"text-orange-600",children:[y," in archive"]})]})]})]}),t.jsx(Pt,{children:t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map((v,w)=>t.jsxs("div",{children:[t.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${v.found?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[v.found?t.jsx(st,{className:"h-5 w-5 text-green-600"}):t.jsx(Nn,{className:"h-5 w-5 text-red-600"}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:v.sampleId}),v.isArchived&&t.jsx(be,{variant:"secondary",className:"text-xs",children:"Archived"})]}),v.found?t.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.containerName," • ",v.containerLocation," • Position ",v.position]}):t.jsx("p",{className:"text-sm text-red-600",children:v.error})]})]}),v.found&&v.containerId&&t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>n(v.containerId,v.sampleId),children:"View Sample"})]}),w<o.length-1&&t.jsx(Jr,{className:"my-1"})]},w))})})]})]})}function mv({sampleSearchQuery:e,setSampleSearchQuery:n,sampleSearchMode:s,setSampleSearchMode:r,worklistSampleIds:o,worklistDuplicateIds:a,filteredSamples:i,allSamples:c,clearSampleFilters:u,handleWorklistSamplesExtracted:f,handleClearWorklist:m,handleNavigateToSample:d,onBulkSearchFromCSV:p}){const[x,b]=l.useState("search"),h=c.map(({sample:g,container:y})=>({sample:{sampleId:g.sampleId,position:g.position},container:{id:y.id,name:y.name,location:y.location,sampleType:y.sampleType,isArchived:y.isArchived}}));return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(sn,{value:x,onValueChange:g=>b(g),children:[t.jsxs(rn,{className:"grid w-full grid-cols-3 max-w-lg",children:[t.jsxs(Me,{value:"search",className:"flex items-center gap-2",children:[t.jsx(Vt,{className:"w-4 h-4"}),"Manual Search"]}),t.jsxs(Me,{value:"worklist",className:"flex items-center gap-2",children:[t.jsx(Wt,{className:"w-4 h-4"}),"Worklist Upload"]}),t.jsxs(Me,{value:"bulk",className:"flex items-center gap-2",children:[t.jsx(en,{className:"w-4 h-4"}),"Bulk CSV Search"]})]}),t.jsxs(Oe,{value:"search",className:"space-y-4",children:[t.jsx(ke,{className:"p-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(Ke,{placeholder:"Search samples by ID, position, container...",value:e,onChange:g=>{n(g.target.value),s!=="manual"&&r("manual")},className:"pl-10"})]}),(e||s!=="manual")&&t.jsx(Z,{variant:"ghost",size:"sm",onClick:u,className:"text-muted-foreground",children:"Clear"})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Search by sample ID, position, container name, or location. Use commas to search multiple terms."})]})}),s==="manual"&&t.jsx(lv,{samples:(e?i:c).map(({sample:g,container:y})=>({...g,containerId:y.id,containerName:y.name,containerLocation:y.location})),onNavigateToSample:d,searchQuery:e})]}),t.jsxs(Oe,{value:"worklist",className:"space-y-4",children:[t.jsx(cv,{onSamplesExtracted:f,onClearWorklist:m}),o.length>0&&t.jsx(dv,{searchedSampleIds:o,duplicateIds:a,searchResults:Object.fromEntries(o.map(g=>{const y=i.find(({sample:v})=>v.sampleId===g);return y?[g,{sample:y.sample,container:y.container}]:[g,null]})),analysis:{missing:o.filter(g=>!i.some(({sample:y})=>y.sampleId===g))},onNavigateToSample:d,onClearWorklist:m})]}),t.jsx(Oe,{value:"bulk",className:"space-y-4",children:t.jsx(uv,{allSamples:h,onNavigateToSample:d})})]}),s==="manual"&&e&&i.length===0&&t.jsx(ke,{className:"p-12 text-center",children:t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx(Vt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No samples found"}),t.jsx("p",{className:"text-sm",children:"No samples match your search criteria. Try adjusting your search terms or check the archive tab."})]})})]})}var oo=["Enter"," "],fv=["ArrowDown","PageUp","Home"],Jc=["ArrowUp","PageDown","End"],pv=[...fv,...Jc],hv={ltr:[...oo,"ArrowRight"],rtl:[...oo,"ArrowLeft"]},xv={ltr:["ArrowLeft"],rtl:["ArrowRight"]},us="Menu",[ns,gv,vv]=To(us),[dn,Xc]=it(us,[vv,Ln,ir]),yr=Ln(),Zc=ir(),[yv,un]=dn(us),[bv,ms]=dn(us),Qc=e=>{const{__scopeMenu:n,open:s=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,c=yr(n),[u,f]=l.useState(null),m=l.useRef(!1),d=ze(a),p=ls(o);return l.useEffect(()=>{const x=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),t.jsx(Bo,{...c,children:t.jsx(yv,{scope:n,open:s,onOpenChange:d,content:u,onContentChange:f,children:t.jsx(bv,{scope:n,onClose:l.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:m,dir:p,modal:i,children:r})})})};Qc.displayName=us;var wv="MenuAnchor",Yo=l.forwardRef((e,n)=>{const{__scopeMenu:s,...r}=e,o=yr(s);return t.jsx(zo,{...o,...r,ref:n})});Yo.displayName=wv;var qo="MenuPortal",[jv,ed]=dn(qo,{forceMount:void 0}),td=e=>{const{__scopeMenu:n,forceMount:s,children:r,container:o}=e,a=un(qo,n);return t.jsx(jv,{scope:n,forceMount:s,children:t.jsx(Ye,{present:s||a.open,children:t.jsx(is,{asChild:!0,container:o,children:r})})})};td.displayName=qo;var at="MenuContent",[Sv,Jo]=dn(at),nd=l.forwardRef((e,n)=>{const s=ed(at,e.__scopeMenu),{forceMount:r=s.forceMount,...o}=e,a=un(at,e.__scopeMenu),i=ms(at,e.__scopeMenu);return t.jsx(ns.Provider,{scope:e.__scopeMenu,children:t.jsx(Ye,{present:r||a.open,children:t.jsx(ns.Slot,{scope:e.__scopeMenu,children:i.modal?t.jsx(Nv,{...o,ref:n}):t.jsx(Cv,{...o,ref:n})})})})}),Nv=l.forwardRef((e,n)=>{const s=un(at,e.__scopeMenu),r=l.useRef(null),o=je(n,r);return l.useEffect(()=>{const a=r.current;if(a)return ho(a)},[]),t.jsx(Xo,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:re(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),Cv=l.forwardRef((e,n)=>{const s=un(at,e.__scopeMenu);return t.jsx(Xo,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),kv=tn("MenuContent.ScrollLock"),Xo=l.forwardRef((e,n)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:p,onDismiss:x,disableOutsideScroll:b,...h}=e,g=un(at,s),y=ms(at,s),v=yr(s),w=Zc(s),T=gv(s),[j,C]=l.useState(null),A=l.useRef(null),N=je(n,A,g.onContentChange),M=l.useRef(0),I=l.useRef(""),z=l.useRef(0),V=l.useRef(null),K=l.useRef("right"),ee=l.useRef(0),ue=b?er:l.Fragment,G=b?{as:kv,allowPinchZoom:!0}:void 0,oe=O=>{const U=I.current+O,F=T().filter(R=>!R.disabled),ge=document.activeElement,S=F.find(R=>R.ref.current===ge)?.textValue,P=F.map(R=>R.textValue),H=$v(P,U,S),ie=F.find(R=>R.textValue===H)?.ref.current;(function R(W){I.current=W,window.clearTimeout(M.current),W!==""&&(M.current=window.setTimeout(()=>R(""),1e3))})(U),ie&&setTimeout(()=>ie.focus())};l.useEffect(()=>()=>window.clearTimeout(M.current),[]),po();const E=l.useCallback(O=>K.current===V.current?.side&&Bv(O,V.current?.area),[]);return t.jsx(Sv,{scope:s,searchRef:I,onItemEnter:l.useCallback(O=>{E(O)&&O.preventDefault()},[E]),onItemLeave:l.useCallback(O=>{E(O)||(A.current?.focus(),C(null))},[E]),onTriggerLeave:l.useCallback(O=>{E(O)&&O.preventDefault()},[E]),pointerGraceTimerRef:z,onPointerGraceIntentChange:l.useCallback(O=>{V.current=O},[]),children:t.jsx(ue,{...G,children:t.jsx(Zs,{asChild:!0,trapped:o,onMountAutoFocus:re(a,O=>{O.preventDefault(),A.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:t.jsx(as,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:p,onDismiss:x,children:t.jsx(gl,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:C,onEntryFocus:re(u,O=>{y.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(Uo,{role:"menu","aria-orientation":"vertical","data-state":vd(g.open),"data-radix-menu-content":"",dir:y.dir,...v,...h,ref:N,style:{outline:"none",...h.style},onKeyDown:re(h.onKeyDown,O=>{const F=O.target.closest("[data-radix-menu-content]")===O.currentTarget,ge=O.ctrlKey||O.altKey||O.metaKey,S=O.key.length===1;F&&(O.key==="Tab"&&O.preventDefault(),!ge&&S&&oe(O.key));const P=A.current;if(O.target!==P||!pv.includes(O.key))return;O.preventDefault();const ie=T().filter(R=>!R.disabled).map(R=>R.ref.current);Jc.includes(O.key)&&ie.reverse(),Ov(ie)}),onBlur:re(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(M.current),I.current="")}),onPointerMove:re(e.onPointerMove,ss(O=>{const U=O.target,F=ee.current!==O.clientX;if(O.currentTarget.contains(U)&&F){const ge=O.clientX>ee.current?"right":"left";K.current=ge,ee.current=O.clientX}}))})})})})})})});nd.displayName=at;var Tv="MenuGroup",Zo=l.forwardRef((e,n)=>{const{__scopeMenu:s,...r}=e;return t.jsx(pe.div,{role:"group",...r,ref:n})});Zo.displayName=Tv;var Av="MenuLabel",sd=l.forwardRef((e,n)=>{const{__scopeMenu:s,...r}=e;return t.jsx(pe.div,{...r,ref:n})});sd.displayName=Av;var qs="MenuItem",Ja="menu.itemSelect",br=l.forwardRef((e,n)=>{const{disabled:s=!1,onSelect:r,...o}=e,a=l.useRef(null),i=ms(qs,e.__scopeMenu),c=Jo(qs,e.__scopeMenu),u=je(n,a),f=l.useRef(!1),m=()=>{const d=a.current;if(!s&&d){const p=new CustomEvent(Ja,{bubbles:!0,cancelable:!0});d.addEventListener(Ja,x=>r?.(x),{once:!0}),xi(d,p),p.defaultPrevented?f.current=!1:i.onClose()}};return t.jsx(rd,{...o,ref:u,disabled:s,onClick:re(e.onClick,m),onPointerDown:d=>{e.onPointerDown?.(d),f.current=!0},onPointerUp:re(e.onPointerUp,d=>{f.current||d.currentTarget?.click()}),onKeyDown:re(e.onKeyDown,d=>{const p=c.searchRef.current!=="";s||p&&d.key===" "||oo.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});br.displayName=qs;var rd=l.forwardRef((e,n)=>{const{__scopeMenu:s,disabled:r=!1,textValue:o,...a}=e,i=Jo(qs,s),c=Zc(s),u=l.useRef(null),f=je(n,u),[m,d]=l.useState(!1),[p,x]=l.useState("");return l.useEffect(()=>{const b=u.current;b&&x((b.textContent??"").trim())},[a.children]),t.jsx(ns.ItemSlot,{scope:s,disabled:r,textValue:o??p,children:t.jsx(vl,{asChild:!0,...c,focusable:!r,children:t.jsx(pe.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:f,onPointerMove:re(e.onPointerMove,ss(b=>{r?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(e.onPointerLeave,ss(b=>i.onItemLeave(b))),onFocus:re(e.onFocus,()=>d(!0)),onBlur:re(e.onBlur,()=>d(!1))})})})}),Ev="MenuCheckboxItem",od=l.forwardRef((e,n)=>{const{checked:s=!1,onCheckedChange:r,...o}=e;return t.jsx(dd,{scope:e.__scopeMenu,checked:s,children:t.jsx(br,{role:"menuitemcheckbox","aria-checked":Js(s)?"mixed":s,...o,ref:n,"data-state":ea(s),onSelect:re(o.onSelect,()=>r?.(Js(s)?!0:!s),{checkForDefaultPrevented:!1})})})});od.displayName=Ev;var ad="MenuRadioGroup",[Iv,Pv]=dn(ad,{value:void 0,onValueChange:()=>{}}),id=l.forwardRef((e,n)=>{const{value:s,onValueChange:r,...o}=e,a=ze(r);return t.jsx(Iv,{scope:e.__scopeMenu,value:s,onValueChange:a,children:t.jsx(Zo,{...o,ref:n})})});id.displayName=ad;var ld="MenuRadioItem",cd=l.forwardRef((e,n)=>{const{value:s,...r}=e,o=Pv(ld,e.__scopeMenu),a=s===o.value;return t.jsx(dd,{scope:e.__scopeMenu,checked:a,children:t.jsx(br,{role:"menuitemradio","aria-checked":a,...r,ref:n,"data-state":ea(a),onSelect:re(r.onSelect,()=>o.onValueChange?.(s),{checkForDefaultPrevented:!1})})})});cd.displayName=ld;var Qo="MenuItemIndicator",[dd,Rv]=dn(Qo,{checked:!1}),ud=l.forwardRef((e,n)=>{const{__scopeMenu:s,forceMount:r,...o}=e,a=Rv(Qo,s);return t.jsx(Ye,{present:r||Js(a.checked)||a.checked===!0,children:t.jsx(pe.span,{...o,ref:n,"data-state":ea(a.checked)})})});ud.displayName=Qo;var Dv="MenuSeparator",md=l.forwardRef((e,n)=>{const{__scopeMenu:s,...r}=e;return t.jsx(pe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});md.displayName=Dv;var _v="MenuArrow",fd=l.forwardRef((e,n)=>{const{__scopeMenu:s,...r}=e,o=yr(s);return t.jsx(Vo,{...o,...r,ref:n})});fd.displayName=_v;var Mv="MenuSub",[Py,pd]=dn(Mv),Wn="MenuSubTrigger",hd=l.forwardRef((e,n)=>{const s=un(Wn,e.__scopeMenu),r=ms(Wn,e.__scopeMenu),o=pd(Wn,e.__scopeMenu),a=Jo(Wn,e.__scopeMenu),i=l.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=a,f={__scopeMenu:e.__scopeMenu},m=l.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return l.useEffect(()=>m,[m]),l.useEffect(()=>{const d=c.current;return()=>{window.clearTimeout(d),u(null)}},[c,u]),t.jsx(Yo,{asChild:!0,...f,children:t.jsx(rd,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":o.contentId,"data-state":vd(s.open),...e,ref:Xs(n,o.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:re(e.onPointerMove,ss(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!s.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{s.onOpenChange(!0),m()},100))})),onPointerLeave:re(e.onPointerLeave,ss(d=>{m();const p=s.content?.getBoundingClientRect();if(p){const x=s.content?.dataset.side,b=x==="right",h=b?-5:5,g=p[b?"left":"right"],y=p[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+h,y:d.clientY},{x:g,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:g,y:p.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:re(e.onKeyDown,d=>{const p=a.searchRef.current!=="";e.disabled||p&&d.key===" "||hv[r.dir].includes(d.key)&&(s.onOpenChange(!0),s.content?.focus(),d.preventDefault())})})})});hd.displayName=Wn;var xd="MenuSubContent",gd=l.forwardRef((e,n)=>{const s=ed(at,e.__scopeMenu),{forceMount:r=s.forceMount,...o}=e,a=un(at,e.__scopeMenu),i=ms(at,e.__scopeMenu),c=pd(xd,e.__scopeMenu),u=l.useRef(null),f=je(n,u);return t.jsx(ns.Provider,{scope:e.__scopeMenu,children:t.jsx(Ye,{present:r||a.open,children:t.jsx(ns.Slot,{scope:e.__scopeMenu,children:t.jsx(Xo,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:f,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{i.isUsingKeyboardRef.current&&u.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:re(e.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:re(e.onEscapeKeyDown,m=>{i.onClose(),m.preventDefault()}),onKeyDown:re(e.onKeyDown,m=>{const d=m.currentTarget.contains(m.target),p=xv[i.dir].includes(m.key);d&&p&&(a.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});gd.displayName=xd;function vd(e){return e?"open":"closed"}function Js(e){return e==="indeterminate"}function ea(e){return Js(e)?"indeterminate":e?"checked":"unchecked"}function Ov(e){const n=document.activeElement;for(const s of e)if(s===n||(s.focus(),document.activeElement!==n))return}function Lv(e,n){return e.map((s,r)=>e[(n+r)%e.length])}function $v(e,n,s){const o=n.length>1&&Array.from(n).every(f=>f===n[0])?n[0]:n,a=s?e.indexOf(s):-1;let i=Lv(e,Math.max(a,0));o.length===1&&(i=i.filter(f=>f!==s));const u=i.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return u!==s?u:void 0}function Fv(e,n){const{x:s,y:r}=e;let o=!1;for(let a=0,i=n.length-1;a<n.length;i=a++){const c=n[a],u=n[i],f=c.x,m=c.y,d=u.x,p=u.y;m>r!=p>r&&s<(d-f)*(r-m)/(p-m)+f&&(o=!o)}return o}function Bv(e,n){if(!n)return!1;const s={x:e.clientX,y:e.clientY};return Fv(s,n)}function ss(e){return n=>n.pointerType==="mouse"?e(n):void 0}var zv=Qc,Uv=Yo,Vv=td,Hv=nd,Wv=Zo,Gv=sd,Kv=br,Yv=od,qv=id,Jv=cd,Xv=ud,Zv=md,Qv=fd,e0=hd,t0=gd,wr="DropdownMenu",[n0]=it(wr,[Xc]),qe=Xc(),[s0,yd]=n0(wr),bd=e=>{const{__scopeDropdownMenu:n,children:s,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:c=!0}=e,u=qe(n),f=l.useRef(null),[m,d]=Ht({prop:o,defaultProp:a??!1,onChange:i,caller:wr});return t.jsx(s0,{scope:n,triggerId:yt(),triggerRef:f,contentId:yt(),open:m,onOpenChange:d,onOpenToggle:l.useCallback(()=>d(p=>!p),[d]),modal:c,children:t.jsx(zv,{...u,open:m,onOpenChange:d,dir:r,modal:c,children:s})})};bd.displayName=wr;var wd="DropdownMenuTrigger",jd=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...o}=e,a=yd(wd,s),i=qe(s);return t.jsx(Uv,{asChild:!0,...i,children:t.jsx(pe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Xs(n,a.triggerRef),onPointerDown:re(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:re(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});jd.displayName=wd;var r0="DropdownMenuPortal",Sd=e=>{const{__scopeDropdownMenu:n,...s}=e,r=qe(n);return t.jsx(Vv,{...r,...s})};Sd.displayName=r0;var Nd="DropdownMenuContent",Cd=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=yd(Nd,s),a=qe(s),i=l.useRef(!1);return t.jsx(Hv,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:n,onCloseAutoFocus:re(e.onCloseAutoFocus,c=>{i.current||o.triggerRef.current?.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:re(e.onInteractOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,m=u.button===2||f;(!o.modal||m)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Cd.displayName=Nd;var o0="DropdownMenuGroup",a0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Wv,{...o,...r,ref:n})});a0.displayName=o0;var i0="DropdownMenuLabel",l0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Gv,{...o,...r,ref:n})});l0.displayName=i0;var c0="DropdownMenuItem",kd=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Kv,{...o,...r,ref:n})});kd.displayName=c0;var d0="DropdownMenuCheckboxItem",u0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Yv,{...o,...r,ref:n})});u0.displayName=d0;var m0="DropdownMenuRadioGroup",f0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(qv,{...o,...r,ref:n})});f0.displayName=m0;var p0="DropdownMenuRadioItem",h0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Jv,{...o,...r,ref:n})});h0.displayName=p0;var x0="DropdownMenuItemIndicator",g0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Xv,{...o,...r,ref:n})});g0.displayName=x0;var v0="DropdownMenuSeparator",y0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Zv,{...o,...r,ref:n})});y0.displayName=v0;var b0="DropdownMenuArrow",w0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(Qv,{...o,...r,ref:n})});w0.displayName=b0;var j0="DropdownMenuSubTrigger",S0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(e0,{...o,...r,ref:n})});S0.displayName=j0;var N0="DropdownMenuSubContent",C0=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...r}=e,o=qe(s);return t.jsx(t0,{...o,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C0.displayName=N0;var k0=bd,Td=jd,T0=Sd,A0=Cd,E0=kd;function I0({...e}){return t.jsx(k0,{"data-slot":"dropdown-menu",...e})}const Ad=l.forwardRef(({...e},n)=>t.jsx(Td,{ref:n,"data-slot":"dropdown-menu-trigger",...e}));Ad.displayName=Td.displayName;function P0({className:e,sideOffset:n=4,...s}){return t.jsx(T0,{children:t.jsx(A0,{"data-slot":"dropdown-menu-content",sideOffset:n,className:he("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...s})})}function Vn({className:e,inset:n,variant:s="default",...r}){return t.jsx(E0,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":s,className:he("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}var Lr={exports:{}},$r={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xa;function R0(){if(Xa)return $r;Xa=1;var e=co();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var s=typeof Object.is=="function"?Object.is:n,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function c(d,p){var x=p(),b=r({inst:{value:x,getSnapshot:p}}),h=b[0].inst,g=b[1];return a(function(){h.value=x,h.getSnapshot=p,u(h)&&g({inst:h})},[d,x,p]),o(function(){return u(h)&&g({inst:h}),d(function(){u(h)&&g({inst:h})})},[d]),i(x),x}function u(d){var p=d.getSnapshot;d=d.value;try{var x=p();return!s(d,x)}catch{return!0}}function f(d,p){return p()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return $r.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,$r}var Za;function D0(){return Za||(Za=1,Lr.exports=R0()),Lr.exports}var _0=D0();function M0(){return _0.useSyncExternalStore(O0,()=>!0,()=>!1)}function O0(){return()=>{}}var ta="Avatar",[L0]=it(ta),[$0,Ed]=L0(ta),Id=l.forwardRef((e,n)=>{const{__scopeAvatar:s,...r}=e,[o,a]=l.useState("idle");return t.jsx($0,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:t.jsx(pe.span,{...r,ref:n})})});Id.displayName=ta;var Pd="AvatarImage",F0=l.forwardRef((e,n)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=Ed(Pd,s),c=B0(r,a),u=ze(f=>{o(f),i.onImageLoadingStatusChange(f)});return Le(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?t.jsx(pe.img,{...a,ref:n,src:r}):null});F0.displayName=Pd;var Rd="AvatarFallback",Dd=l.forwardRef((e,n)=>{const{__scopeAvatar:s,delayMs:r,...o}=e,a=Ed(Rd,s),[i,c]=l.useState(r===void 0);return l.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),i&&a.imageLoadingStatus!=="loaded"?t.jsx(pe.span,{...o,ref:n}):null});Dd.displayName=Rd;function Qa(e,n){return e?n?(e.src!==n&&(e.src=n),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function B0(e,{referrerPolicy:n,crossOrigin:s}){const r=M0(),o=l.useRef(null),a=r?(o.current||(o.current=new window.Image),o.current):null,[i,c]=l.useState(()=>Qa(a,e));return Le(()=>{c(Qa(a,e))},[a,e]),Le(()=>{const u=d=>()=>{c(d)};if(!a)return;const f=u("loaded"),m=u("error");return a.addEventListener("load",f),a.addEventListener("error",m),n&&(a.referrerPolicy=n),typeof s=="string"&&(a.crossOrigin=s),()=>{a.removeEventListener("load",f),a.removeEventListener("error",m)}},[a,s,n]),i}var z0=Id,U0=Dd;function _d({className:e,...n}){return t.jsx(z0,{"data-slot":"avatar",className:he("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...n})}function Md({className:e,...n}){return t.jsx(U0,{"data-slot":"avatar-fallback",className:he("bg-muted flex size-full items-center justify-center rounded-full",e),...n})}function ei(e){const{container:n,onSelect:s,onEdit:r,onDelete:o,onArchive:a,onRestore:i,onToggleTraining:c,liveOccupiedSlots:u,userActivities:f=[],lockedBy:m,isOnline:d=!0,broadcastUserActivity:p,broadcastSampleUpdate:x,userId:b,userName:h}=e,g=(f||[]).filter(I=>I.containerId===n.id),y=new Set(g.map(I=>I.userId)).size,v=!!m,w=I=>{I.stopPropagation(),r&&(p&&p(n.id,"editing"),r(n))},T=I=>Xe(I).split(" ").map(z=>z[0]).join("").toUpperCase().slice(0,2),j=I=>{switch(I){case"viewing":return t.jsx(Xi,{className:"h-3 w-3"});case"editing":return t.jsx(Cn,{className:"h-3 w-3"});case"scanning":return t.jsx(jo,{className:"h-3 w-3"});default:return t.jsx(Gt,{className:"h-3 w-3"})}},C=n.totalSlots??0,A=n.occupiedSlots??0,N=C>0?Math.round(A/C*100):0,M=I=>{switch(I){case"DP Pools":return"bg-green-100 text-green-800 border-green-200";case"cfDNA Tubes":return"bg-gray-100 text-gray-800 border-gray-200";case"DTC Tubes":return"bg-purple-100 text-purple-800 border-purple-200";case"MNC Tubes":return"bg-red-100 text-red-800 border-red-200";case"PA Pool Tubes":return"bg-orange-100 text-orange-800 border-orange-200";case"Plasma Tubes":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"BC Tubes":return"bg-blue-100 text-blue-800 border-blue-200";case"IDT Plates":return"bg-teal-100 text-teal-800 border-teal-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return t.jsxs(ke,{className:`cursor-pointer transition-all duration-200 hover:shadow-md relative ${v?"ring-2 ring-orange-200 bg-orange-50/50":""} ${d?"":"opacity-75"}`,onClick:()=>s(n),children:[t.jsx("div",{className:"absolute top-2 right-2 z-10",children:d?t.jsx(Yn,{className:"h-4 w-4 text-green-500"}):t.jsx(kn,{className:"h-4 w-4 text-red-500"})}),v&&t.jsx("div",{className:"absolute top-2 left-2 z-10",children:t.jsxs("div",{className:"flex items-center gap-1 bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs",children:[t.jsx(Ca,{className:"h-3 w-3"}),t.jsx("span",{children:m?.userName})]})}),t.jsx(Xn,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(Zn,{className:"truncate",children:n.name}),t.jsx(sh,{className:"truncate",children:n.location})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[y>0&&t.jsxs("div",{className:"flex items-center gap-1",children:[g.slice(0,3).map((I,z)=>t.jsxs("div",{className:"relative",children:[t.jsx(_d,{className:"h-6 w-6 border-2 border-background",children:t.jsx(Md,{className:"text-xs",children:T(I.userName)})}),t.jsx("div",{className:"absolute -bottom-1 -right-1 bg-background rounded-full p-0.5",children:j(I.action)})]},I.userId)),y>3&&t.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",y-3]})]}),t.jsxs(I0,{children:[t.jsx(Ad,{asChild:!0,onClick:I=>I.stopPropagation(),children:t.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:t.jsx(Of,{className:"h-4 w-4"})})}),t.jsxs(P0,{align:"end",children:[r&&t.jsxs(Vn,{onClick:w,disabled:v,children:[t.jsx(dp,{className:"h-4 w-4 mr-2"}),"Edit"]}),c&&t.jsxs(Vn,{onClick:I=>{I.stopPropagation(),c(n)},disabled:v,children:[t.jsx(Ot,{className:"h-4 w-4 mr-2"}),n.isTraining?"Remove Training":"Mark as Training"]}),a&&!n.isArchived&&t.jsxs(Vn,{onClick:I=>{I.stopPropagation(),a(n)},disabled:v,children:[t.jsx(Et,{className:"h-4 w-4 mr-2"}),"Archive"]}),i&&n.isArchived&&t.jsxs(Vn,{onClick:I=>{I.stopPropagation(),i(n)},children:[t.jsx(xf,{className:"h-4 w-4 mr-2"}),"Restore"]}),o&&t.jsxs(Vn,{onClick:I=>{I.stopPropagation(),o(n)},className:"text-destructive",disabled:v,children:[t.jsx(yn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})}),t.jsxs(Pt,{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Rs,{className:"h-4 w-4 text-blue-500"}),t.jsx("span",{className:"text-sm",children:n.temperature})]}),t.jsx(be,{variant:"outline",className:"text-xs",children:vt(n.containerType,"-"," ")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Capacity"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("span",{className:"text-sm font-medium",children:[A,"/",C]})})]}),t.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${N===100?"bg-red-500":N>=80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(N,100)}%`}})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(be,{variant:N===100?"destructive":N>=80?"secondary":"default",className:"text-xs",children:N===100?"Full":N>=80?"Nearly Full":N>=50?"Half Full":"Available"}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[N,"% full"]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(be,{className:`text-xs ${M(n.sampleType)}`,children:n.sampleType}),n.isTraining&&t.jsxs(be,{className:"text-xs bg-training text-training-foreground",children:[t.jsx(Ot,{className:"w-3 h-3 mr-1"}),"Training"]}),n.isArchived&&t.jsxs(be,{className:"text-xs bg-archive text-archive-foreground",children:[t.jsx(Et,{className:"w-3 h-3 mr-1"}),"Archived"]})]}),(y>0||v)&&t.jsx("div",{className:"pt-2 border-t",children:v?t.jsxs("div",{className:"text-xs text-orange-600 flex items-center gap-1",children:[t.jsx(Ca,{className:"h-3 w-3"}),"Being edited by ",m?.userName]}):t.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[t.jsx(Gt,{className:"h-3 w-3"}),y," active ",y===1?"user":"users"]})}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last updated: ",n.lastUpdated]})]})]})}const V0="/assets/64588e517bd125623e5f91d657806eafe8768d13-B9ZrFAQz.png";function ao({actions:e}){return t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("img",{src:V0,alt:"SAGA Diagnostics",className:"h-8 md:h-10"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Laboratory Storage System"})]})}),e&&t.jsx("div",{className:"flex items-center gap-2",children:e})]})}const cn=(e,n)=>{switch(e){case"9x9-box":return{rows:9,cols:9,total:n==="DP Pools"?80:81};case"5x5-box":return{rows:5,cols:5,total:25};case"5x4-rack":return{rows:5,cols:4,total:20};case"9x9-rack":return{rows:9,cols:9,total:n==="DP Pools"?80:81};case"7x14-rack":return{rows:14,cols:7,total:98};default:return{rows:5,cols:5,total:25}}},Sn=e=>{switch(e){case"9x9-box":return"9×9 Box";case"5x5-box":return"5×5 Box";case"5x4-rack":return"5×4 Rack";case"9x9-rack":return"9×9 Rack";case"7x14-rack":return"7×14 Rack";default:return"Unknown"}},ti=e=>{switch(e){case"DP Pools":return"bg-green-100 text-green-800 border-green-200";case"cfDNA Tubes":return"bg-gray-100 text-gray-800 border-gray-200";case"DTC Tubes":return"bg-purple-100 text-purple-800 border-purple-200";case"MNC Tubes":return"bg-red-100 text-red-800 border-red-200";case"PA Pool Tubes":return"bg-orange-100 text-orange-800 border-orange-200";case"Plasma Tubes":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"BC Tubes":return"bg-blue-100 text-blue-800 border-blue-200";case"IDT Plates":return"bg-teal-100 text-teal-800 border-teal-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ni=["DP Pools","cfDNA Tubes","DTC Tubes","MNC Tubes","PA Pool Tubes","Plasma Tubes","BC Tubes","IDT Plates"];function H0(e){const[n,s]=l.useState(0),r=localStorage.getItem("currentUser")||"Unknown User",[o,a]=l.useState([]);typeof e.onContainersChange=="function"&&e.onContainersChange,l.useEffect(()=>{Array.isArray(e.containers)&&e.containers!==o&&a(e.containers)},[e.containers]);const[i,c]=l.useState([]);l.useEffect(()=>{Array.isArray(o)&&console.log("All containers loaded from Supabase:",o)},[o]);const u=B.useRef(Array.isArray(o)?o:[]);B.useEffect(()=>{u.current=Array.isArray(o)?o:[]},[o]),B.useEffect(()=>{const k=()=>{const X=new Date,we=new Intl.DateTimeFormat("en-US",{timeZone:"America/New_York",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(X),Te=Ze=>{const Pe=we.find(Qe=>Qe.type===Ze)?.value??"0";return Number.parseInt(Pe,10)};return new Date(Date.UTC(Te("year"),Te("month")-1,Te("day"),Te("hour"),Te("minute"),Te("second")))};let L=null,$=!1;const ne=()=>{const X=k(),fe=new Date(X);fe.setHours(2,0,0,0),X>fe&&fe.setDate(fe.getDate()+1);const we=Math.max(fe.getTime()-X.getTime(),0);L=setTimeout(()=>{const Pe=`nightly-backup-${k().toISOString().slice(0,10)}`,Qe=u.current,We=(Array.isArray(Qe)?Qe:[]).map(ct=>{const mn=`samples-${ct.id}`,Bn=localStorage.getItem(mn);return{container:ct,samples:Bn?JSON.parse(Bn):[]}});console.log("[SNAPSHOT] Nightly backup: writing to",Pe,We),localStorage.setItem(Pe,JSON.stringify(We));const Fn=Object.keys(localStorage).filter(ct=>ct.startsWith("nightly-backup-")).sort();if(Fn.length>7){const ct=Fn.slice(0,Fn.length-7);ct.forEach(mn=>localStorage.removeItem(mn)),console.log("[SNAPSHOT] Deleted old backups:",ct)}s(ct=>ct+1),$||ne()},we)};return ne(),()=>{$=!0,L!==null&&clearTimeout(L)}},[]);const[f,m]=l.useState(!1),[d,p]=l.useState(null),x=async()=>{if(d)try{const k=await Os();if(!k||!Array.isArray(k.data)){Ne.error("No backup found in Supabase."),m(!1);return}const L=k.data.find(ne=>ne.id===d||ne.container?.id===d);if(!L){Ne.error("No backup found for this container."),m(!1);return}await Ts(L.container||L);const $=await Nt();a($),m(!1),Ne.success("Container reverted to last backup from Supabase.")}catch(k){Ne.error("Failed to restore from Supabase backup."),m(!1),console.error(k)}};l.useEffect(()=>{Nt().then(L=>{if(Array.isArray(L)&&(a(L),typeof e.onContainersChange=="function"))try{e.onContainersChange(L)}catch($){console.warn("onContainersChange callback failed",$)}}).catch(L=>{console.error("Error loading containers from Supabase:",L)});const k=nt.channel("public:containers").on("postgres_changes",{event:"*",schema:"public",table:"containers"},L=>{Nt().then($=>{Array.isArray($)&&a($)})}).subscribe();return()=>{nt.removeChannel(k)}},[]);const[b,h]=l.useState(null),[g,y]=l.useState(null),[v,w]=l.useState(!1),[T,j]=l.useState(!1),[C,A]=l.useState(null),[N,M]=l.useState(""),[I,z]=l.useState(""),[V,K]=l.useState(null),[ee,ue]=l.useState(!1),[G,oe]=l.useState(!1),[E,O]=l.useState("containers"),[U,F]=l.useState([]),[ge,S]=l.useState([]),[P,H]=l.useState("manual"),[ie,R]=l.useState([]),[W,le]=l.useState([]),Y=l.useMemo(()=>(Array.isArray(o)?o:[]).filter(k=>!k.isArchived),[o]),Q=l.useMemo(()=>(Array.isArray(o)?o:[]).filter(k=>k.isArchived),[o]),D=l.useMemo(()=>E==="archive"?Q:Y,[E,Y,Q]),te=l.useMemo(()=>(Array.isArray(D)?D:[]).filter(k=>{const L=N===""||k.name?.toLowerCase().includes(N.toLowerCase())||k.id?.toLowerCase().includes(N.toLowerCase())||k.location?.toLowerCase().includes(N.toLowerCase()),$=V===null||k.sampleType===V,ne=cn(k.containerType,k.sampleType).total,X=Array.isArray(i)?i.filter(({container:Pe})=>String(Pe.id)===String(k.id)).length:0,fe=Number(k.occupiedSlots),we=X>0?X:Number.isNaN(fe)?0:fe,Te=!ee||we<ne,Ze=!G||k.isTraining===!0;return L&&$&&Te&&Ze}),[D,N,V,ee,G,i]);l.useEffect(()=>{async function k(){try{if(!Array.isArray(o))return;const L=[];await Promise.all(o.map(async $=>{const ne=async()=>{try{const fe=await Gn($.id);console.debug("[loadAllSamples] container",$.id,"samples fetched",Array.isArray(fe)?fe.length:0);for(const we of fe)L.push({sample:{position:Es(we.position||we.pos||"",$.containerType),sampleId:As(we.sample_id||we.sampleId||we.id||""),storageDate:we.storage_date||we.storageDate||"",lastAccessed:we.last_accessed||we.lastAccessed||"",history:we.history||[]},container:$});return!0}catch(fe){return fe}},X=await ne();if(X!==!0){await new Promise(we=>setTimeout(we,250));const fe=await ne();fe!==!0&&console.warn("[loadAllSamples] persistent failure fetching samples for container",$.id,X||fe)}})),c(L)}catch(L){c([]),console.error("Error loading samples from Supabase:",L)}}k()},[o]);const me=l.useMemo(()=>{if(P==="worklist")return!Array.isArray(U)||U.length===0?[]:(Array.isArray(i)?i:[]).filter(({sample:k})=>{const L=(Array.isArray(U)?U:[]).includes(k.sampleId),$=k,ne=!!($.is_archived??$.isArchived??$.data?.is_archived??$.data?.isArchived);return L&&!ne});if(P==="bulk")return!Array.isArray(W)||W.length===0?[]:(Array.isArray(i)?i:[]).filter(({sample:k})=>{const L=(Array.isArray(W)?W:[]).includes(k.sampleId),$=k,ne=!!($.is_archived??$.isArchived??$.data?.is_archived??$.data?.isArchived);return L&&!ne});{if(!Xe(I))return R([]),[];const k=I.split(",").map(ne=>Xe(ne).toLowerCase()).filter(ne=>ne.length>0),L=(Array.isArray(i)?i:[]).filter(({sample:ne,container:X})=>k.some(fe=>ne.sampleId?.toLowerCase().includes(fe)||ne.position?.toLowerCase().includes(fe)||X.name?.toLowerCase().includes(fe)||X.location?.toLowerCase().includes(fe)||X.id?.toLowerCase().includes(fe)||X.sampleType?.toLowerCase().includes(fe))),$=L.map(({sample:ne})=>ne.sampleId);return R($),L}},[i,I,P,U,W]),_e=async k=>{if((await Nt()).some(Pe=>Pe.name.trim().toLowerCase()===k.name.trim().toLowerCase())){Ne.error("A container with this name already exists. Please choose a unique name.");return}let $;typeof crypto<"u"&&typeof crypto.randomUUID=="function"?$=crypto.randomUUID():$="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Pe){const Qe=Math.random()*16|0;return(Pe==="x"?Qe:Qe&3|8).toString(16)});const ne=k.containerType,X=cn(ne,k.sampleType).total,fe=new Date,we={...k,id:$,containerType:ne,occupiedSlots:0,totalSlots:X,lastUpdated:vt(fe.toISOString().slice(0,16),"T"," "),history:[{timestamp:fe.toISOString(),action:"create",user:r,notes:"Container created"}]},{history:Te,...Ze}=we;try{await Ts(Ze);const Pe=await Nt();a(Pe),w(!1)}catch(Pe){const Qe=Pe&&typeof Pe=="object"?Pe.code:void 0,We=Pe&&typeof Pe=="object"?Pe.message:void 0;Qe==="23505"||typeof We=="string"&&We.includes("unique")?Ne.error("A container with this name already exists. Please choose a unique name."):Ne.error("Error creating container in Supabase."),console.error("Error creating container in Supabase:",Pe)}},Ce=async k=>{const $={timestamp:new Date().toISOString(),action:"edit",user:r,notes:"Container edited"};let ne=Array.isArray(k.history)?[...k.history]:[];ne.push($);const X={...k,history:ne},{history:fe,...we}=X;try{await Ts(we);const Te=await Nt();a(Te),j(!1)}catch(Te){const Ze=Te&&typeof Te=="object"?Te.code:void 0,Pe=Te&&typeof Te=="object"?Te.message:void 0;Ze==="23505"||typeof Pe=="string"&&Pe.includes("unique")?Ne.error("A container with this name already exists. Please choose a unique name."):Ne.error("Error updating container in Supabase."),console.error("Error updating container in Supabase:",Te)}},[Se,Ve]=l.useState([]);l.useEffect(()=>{Os().then(k=>{k&&Array.isArray(k.data)?Ve(k.data):Ve([])}).catch(()=>Ve([]))},[n]);const De=k=>{A(k),j(!0)},Ft=()=>{j(!1),A(null)},Xt=(k,L)=>{const $=o.find(ne=>ne.id===k);$&&(h($),y(L))},Fe=()=>{M(""),K(null),ue(!1),oe(!1)},_=()=>{z(""),F([]),S([]),R([]),le([]),H("manual")},J=(k=[],L=[])=>{F(k),S(L),k.length>0?(H("worklist"),z(""),R([])):H("manual")},q=()=>{F([]),S([]),H("manual")},ae=k=>{le(k),k.length>0?(H("bulk"),z(""),F([]),R([])):H("manual")},se=i.length;return b?t.jsxs("div",{className:"h-screen flex flex-col",children:[t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(ao,{}),t.jsx("div",{className:"flex-1"}),t.jsxs(Z,{variant:"ghost",onClick:()=>h(null),className:"ml-auto",children:[t.jsx(Ki,{className:"w-4 h-4 mr-2"}),"Back to Containers"]})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx(be,{variant:"outline",children:b.sampleType}),t.jsxs(be,{variant:"outline",children:["Last Updated: ",b.lastUpdated]})]})]}),t.jsx("div",{className:"flex-1",children:t.jsx(Kg,{container:b,onContainerUpdate:Ce,initialSelectedSample:g,onSampleSelectionHandled:()=>y(null),highlightSampleIds:P==="worklist"?U:P==="bulk"?W:ie})}),t.jsx(qn,{open:f,onOpenChange:m,children:t.jsxs(Tn,{children:[t.jsxs(Jn,{children:[t.jsx(An,{children:"Revert Container?"}),t.jsxs(En,{children:["This will restore the container's samples to the last nightly backup. This action cannot be undone.",t.jsx("br",{}),"Are you sure you want to revert?"]})]}),t.jsxs(Co,{children:[t.jsx(Z,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),t.jsx(Z,{variant:"destructive",onClick:x,children:"Revert"})]})]})})]}):t.jsxs("div",{className:"p-6",children:[t.jsx(ao,{actions:t.jsxs(Z,{onClick:()=>w(!0),children:[t.jsx(ka,{className:"w-4 h-4 mr-2"}),"Create New Container"]})}),t.jsx(ov,{open:v,onOpenChange:w,onCreateContainer:_e}),C&&t.jsx(iv,{open:T,onOpenChange:Ft,container:C,onUpdateContainer:Ce}),o.length===0?t.jsx(ke,{className:"p-12 text-center",children:t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx(Rs,{className:"w-16 h-16 mx-auto mb-6 opacity-30"}),t.jsx("h3",{className:"mb-3",children:"Welcome to SAGA Sample Storage Management Systems"}),t.jsx("p",{className:"text-sm mb-6 max-w-md mx-auto",children:"Get started by creating your first storage container. You can organize different sample types including DP Pools, cfDNA Tubes, DTC Tubes, MNC Tubes, PA Pool Tubes, Plasma Tubes, BC Tubes, and IDT Plates."}),t.jsxs(Z,{onClick:()=>w(!0),children:[t.jsx(ka,{className:"w-4 h-4 mr-2"}),"Create Your First Container"]})]})}):t.jsxs(sn,{value:E,onValueChange:k=>O(k),children:[t.jsxs(rn,{className:"grid w-full grid-cols-3 max-w-lg mb-6",children:[t.jsxs(Me,{value:"containers",className:"flex items-center gap-2",children:[t.jsx(Rs,{className:"w-4 h-4"}),"Containers (",Y.length,")"]}),t.jsxs(Me,{value:"archive",className:"flex items-center gap-2",children:[t.jsx(Et,{className:"w-4 h-4"}),"Archive (",Q.length,")"]}),t.jsxs(Me,{value:"samples",className:"flex items-center gap-2",children:[t.jsx(Kn,{className:"w-4 h-4"}),"Samples (",se,")"]})]}),t.jsxs(Oe,{value:"containers",className:"space-y-6",children:[t.jsx(ke,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(Ke,{placeholder:"Search active containers by ID, name, or location...",value:N,onChange:k=>M(k.target.value),className:"pl-10"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Hr,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by sample type:"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(Z,{variant:V===null?"default":"outline",size:"sm",onClick:()=>K(null),children:"All Types"}),ni.map(k=>t.jsx(Z,{variant:V===k?"default":"outline",size:"sm",onClick:()=>K(k),className:V===k?"":ti(k),children:k},k)),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"•"}),t.jsx(Z,{variant:ee?"default":"outline",size:"sm",onClick:()=>ue(!ee),className:"flex items-center gap-2",children:"Available Slots Only"}),t.jsxs(Z,{variant:G?"default":"outline",size:"sm",onClick:()=>oe(!G),className:"flex items-center gap-2",style:G?{backgroundColor:"var(--training)",color:"var(--training-foreground)",borderColor:"var(--training)"}:{},children:[t.jsx(Ot,{className:"w-4 h-4"}),"Training Only"]})]}),(N||V||ee||G)&&t.jsx(Z,{variant:"ghost",size:"sm",onClick:Fe,className:"text-muted-foreground",children:"Clear Filters"})]})]})}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",te.length," of ",Y.length," active containers",N&&` matching "${N}"`,V&&` filtered by ${V}`,ee&&" with available slots",G&&" marked as training"]})}),te.length===0?t.jsx(ke,{className:"p-12 text-center",children:t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx(Rs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No active containers found"}),t.jsx("p",{className:"text-sm",children:Y.length===0?"No active containers available. Try creating a new container or check the Archive tab.":"Try adjusting your search or filter criteria"}),t.jsx(Z,{variant:"outline",size:"sm",onClick:Fe,className:"mt-4",children:"Clear Filters"})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:te.map(k=>t.jsx("div",{children:t.jsx(ei,{container:k,liveOccupiedSlots:Ya([k]),onSelect:h,onEdit:De})},k.id))})]}),t.jsxs(Oe,{value:"archive",className:"space-y-6",children:[t.jsx(ke,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(Ke,{placeholder:"Search archived containers by ID, name, or location...",value:N,onChange:k=>M(k.target.value),className:"pl-10"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Hr,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by sample type:"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(Z,{variant:V===null?"default":"outline",size:"sm",onClick:()=>K(null),children:"All Types"}),ni.map(k=>t.jsx(Z,{variant:V===k?"default":"outline",size:"sm",onClick:()=>K(k),className:V===k?"":ti(k),children:k},k)),(N||V)&&t.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>{M(""),K(null)},className:"text-muted-foreground ml-4",children:"Clear Filters"})]})]})}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",te.length," of ",Q.length," archived containers",N&&` matching "${N}"`,V&&` filtered by ${V}`]})}),te.length===0?t.jsx(ke,{className:"p-12 text-center",children:t.jsxs("div",{className:"text-muted-foreground",children:[t.jsx(Et,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No archived containers found"}),t.jsx("p",{className:"text-sm",children:Q.length===0?"No archived containers available.":"Try adjusting your search or filter criteria"}),t.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{M(""),K(null)},className:"mt-4",children:"Clear Filters"})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:te.map(k=>t.jsx("div",{children:t.jsx(ei,{container:k,liveOccupiedSlots:Ya([k]),onSelect:h,onEdit:De})},k.id))})]}),t.jsx(Oe,{value:"samples",className:"space-y-6",children:t.jsx(mv,{sampleSearchQuery:I,setSampleSearchQuery:z,sampleSearchMode:P,setSampleSearchMode:H,worklistSampleIds:U,worklistDuplicateIds:ge,filteredSamples:me,allSamples:i,clearSampleFilters:_,handleWorklistSamplesExtracted:J,handleClearWorklist:q,handleNavigateToSample:Xt,onBulkSearchFromCSV:ae})})]})]})}function W0(e){return Array.from(new Set(e.map(n=>n.sampleType)))}function G0(e,n){return e.filter(s=>s.sampleType===n)}function K0(e){if(typeof e!="string")return{row:null,column:null};const n=e.trim().toUpperCase();if(!n)return{row:null,column:null};const s=n.match(/^([A-Z]+)(\d+)$/);if(!s)return{row:null,column:null};const[,r,o]=s;return{row:r,column:String(Number(o))}}function Y0(e){if(e.length===0)return{columns:[],rows:[]};const n=e[0].containerType;if(n==="5x5-box")return{columns:["1","2","3","4","5"],rows:["A","B","C","D","E"]};if(n==="9x9-box")return{columns:["1","2","3","4","5","6","7","8","9"],rows:["A","B","C","D","E","F","G","H","I"]};{const s=new Set,r=new Set;return e.forEach(o=>{(Array.isArray(o.samples)?o.samples:[]).forEach(i=>{const{row:c,column:u}=K0(i&&(i.position??i.pos)||i?.position);c&&r.add(c),u&&s.add(u)})}),{columns:Array.from(s).sort((o,a)=>Number(o)-Number(a)),rows:Array.from(r).sort((o,a)=>o.localeCompare(a))}}}const q0=({containers:e,onConvert:n})=>{const[s,r]=l.useState(null),[o,a]=l.useState(null),i=W0(e);return t.jsx("div",{children:i.map(c=>{const u=G0(e,c);return t.jsxs("div",{style:{marginBottom:32},children:[t.jsx("h2",{style:{fontWeight:"bold",fontSize:18},children:c}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16},children:u.map(f=>{const m=Y0([f]),d=m.columns,p=m.rows,x=s===f.id;return t.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,marginBottom:8,background:"#fafbfc"},children:[t.jsxs("div",{style:{cursor:"pointer",padding:12,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:()=>r(x?null:f.id),children:[t.jsx("span",{children:f.name}),t.jsx("span",{style:{fontSize:18},children:x?"▲":"▼"})]}),x&&t.jsxs("div",{style:{padding:16,background:"#fff",borderTop:"1px solid #eee"},children:[t.jsx("div",{style:{overflowX:"auto",marginBottom:16},children:t.jsxs("table",{style:{borderCollapse:"collapse",minWidth:400,maxWidth:"100%"},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{}),d.map(b=>t.jsx("th",{style:{background:"#f5f5f5",textAlign:"center"},children:b},b))]})}),t.jsx("tbody",{children:p.map(b=>t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"bold"},children:b}),d.map(h=>{const g=`${b}${h}`,y=f.samples.find(v=>v.position===g);return t.jsx("td",{style:{border:"1px solid #ccc",textAlign:"center",minWidth:40,maxWidth:80,overflow:"hidden",textOverflow:"ellipsis"},children:y?y.id||y.sampleId:""},g)})]},b))})]})}),t.jsx("div",{style:{textAlign:"right"},children:t.jsx("button",{style:{background:"#2563eb",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",fontWeight:600,cursor:"pointer",marginRight:8},onClick:()=>a(f.id),children:"Convert"})}),o===f.id&&t.jsxs("div",{style:{marginTop:12,background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:4,padding:12},children:[t.jsx("div",{style:{marginBottom:8},children:"Are you sure you want to convert and overwrite this container with the above snapshot?"}),t.jsx("button",{style:{background:"#16a34a",color:"#fff",border:"none",borderRadius:4,padding:"6px 14px",fontWeight:600,marginRight:8,cursor:"pointer"},onClick:()=>{a(null),n&&n(f)},children:"Yes, Convert"}),t.jsx("button",{style:{background:"#e11d48",color:"#fff",border:"none",borderRadius:4,padding:"6px 14px",fontWeight:600,cursor:"pointer"},onClick:()=>a(null),children:"Cancel"})]})]})]},f.id)})})]},c)})})},J0=({containers:e=[],onContainersChange:n,onExitAdmin:s})=>{const[r,o]=B.useState([]),[a,i]=B.useState(!0),[c,u]=B.useState(null),[f,m]=B.useState(null),d=B.useCallback(async()=>{i(!0),u(null);try{const O=await Os();O&&Array.isArray(O.data)?(o(O.data.map(U=>({...U.container,samples:U.samples||[]}))),m(O?.created_at||null)):(o([]),m(null))}catch(O){u(O.message||"Failed to load snapshot from Supabase"),o([]),m(null)}i(!1)},[]);B.useEffect(()=>{d()},[d]);function p(O){function U(P){if(typeof P!="string"){if(P==null)return"";P=String(P)}try{return P.replace(/\u00A0/g,"").trim()}catch{return""}}console.log("--- Grid Import Debug Start ---");const F=O.split(/\r?\n/).map(U),ge=[];let S=0;for(;S<F.length;)if(typeof F[S]=="string"&&F[S].includes("Box Name:")){console.log(`Parsing container block at line ${S}:`,F[S]);let P=typeof F[S]=="string"?F[S].includes(",")?F[S].split(","):F[S].split(/\t|\s{2,}/):[];P=P.map(U),console.log("Header parts:",P);let H=P[0]&&!P[0].includes("Box Name:")?P[0]:"",ie="";const R=P.findIndex(D=>typeof D=="string"&&D.includes("Box Name:"));R!==-1&&P.length>R+1?ie=U(P[R+1]):P.length>2&&(ie=U(P[2]));let W=H||"",le=[];for(S++;S<F.length&&typeof F[S]=="string"&&U(F[S])==="";)S++;const Y=typeof F[S]=="string"?F[S]:"";let Q=[];for(typeof Y=="string"&&Y.includes(",")?Q=Y.split(",").slice(2).map(U).filter(Boolean):typeof Y=="string"?Q=Y.split(/\t|\s{2,}/).slice(2).map(U).filter(Boolean):Q=[],console.log("Column headers:",Q),S++;S<F.length&&typeof F[S]=="string"&&F[S]&&!F[S].includes("Box Name:");){let D=[];typeof F[S]=="string"&&F[S].includes(",")?D=F[S].split(","):typeof F[S]=="string"?D=F[S].split(/\t|\s{2,}/):D=[],D=D.map(U),console.log(`Row ${S} (${F[S]}):`,D);let te=D[0]||String(S),me=1;D[0]===""&&/^[A-I]$/.test(D[1]||"")&&(te=D[1],me=2);const _e=/^[A-I]$/.test(te);for(let Ce=0;Ce<Q.length;Ce++){let Se=U(D[me+Ce]);if(_e&&Ce===0&&Se===te)continue;const Ve=Array.isArray(Q)&&typeof Q[Ce]=="string"?Q[Ce]:String(Ce+1),De=/^[A-I]$/.test(te)&&/^\d+$/.test(Ve)?`${te}${Ve}`:"";Se&&De&&(le.push({sampleId:Se,position:De,containerName:ie,location:W}),console.log(`Parsed sample: ${Se} at ${De} in ${ie}`))}S++}ge.push({rackId:H,containerName:ie,location:W,samples:le}),console.log(`Parsed ${le.length} samples for container ${ie}`)}else S++;return console.log("--- Grid Import Debug End ---"),{containers:ge}}const x=O=>{const U=O.target.files?.[0];if(U){const F=new FileReader;F.onload=()=>{const ge=F.result,S=p(ge);if(S.containers.length>0){h({valid:!0,data:S.containers,errors:[]});const P=S.containers.flatMap(H=>H.samples);v({valid:!0,data:P,errors:[]})}else h({valid:!1,data:[],errors:["No containers found in grid import."]})},F.readAsText(U)}},[b,h]=l.useState(null),g=O=>{const U=O.target.files?.[0];if(U){const F=new FileReader;F.onload=()=>{const ge=F.result;console.log("Sample file content:",ge)},F.readAsText(U)}},[y,v]=l.useState(null),[w,T]=l.useState(!1),[j,C]=l.useState(""),A=l.useRef(null),N=l.useRef(null),M=async()=>{if(console.log("Importing samples to Supabase..."),!y||!y.valid){alert("No valid sample data to import.");return}const O={};e.forEach(F=>{O[F.name]=F.id});let U=0;for(const F of y.data){const ge=F.containerName||F.container||F.box||F.name,S=F.sampleId||F.id||F.sample||F.code,P=F.position||F.pos||F.slot,H=O[ge];if(!H||!S||!P){console.warn("Missing required fields for sample:",F);continue}const ie={container_id:H,sample_id:S,position:P,data:F.data||null};try{await Ms(ie),U++}catch(R){console.error("Failed to upsert sample:",R)}}alert(`Imported ${U} samples to Supabase.`)},I=async()=>{if(!b||!b.valid){alert("No valid container data to import.");return}T(!0);let O=0;for(const U of b.data){const F=U.containerName||U.name||U.box||U.id,ge=U.location||U.rackId||U.rack||"",S=U.samples||[],P=(F||"").toLowerCase();let H="Unknown";P.includes("dp pool")||P.includes("dp_pools")||P.includes("dp")?H="DP Pools":P.includes("cfdna")?H="cfDNA Tubes":P.includes("dtc")?H="DTC Tubes":P.includes("mnc")?H="MNC Tubes":P.includes("pa pool")||P.includes("pap")?H="PA Pool Tubes":P.includes("plasma")?H="Plasma Tubes":P.includes("bc")?H="BC Tubes":P.includes("idt")&&(H="IDT Plates");const ie=S.length===25?"5x5-box":"9x9-box";let R="-80°C";["dp pools","dp","mnc","pa pool tubes","pa","idt","cfdna"].some(Y=>P.includes(Y))?R="-20°C":P.includes("dtc")?R="4°C":(P.includes("plasma")||P.includes("bc"))&&(R="-80°C");const W=S.map(Y=>({...Y,temperature:R})),le={name:F,containerType:ie,sampleType:H,status:"active",location:ge,temperature:R,occupiedSlots:W.length,totalSlots:ie==="5x5-box"?25:81,samples:W.length>0?W:null};if(!le.name||!le.containerType){console.warn("Skipping container with missing required fields:",le);continue}try{const Y=await Ts(le);O++;let Q=null;if(Array.isArray(Y)&&Y.length>0&&Y[0].id)Q=Y[0].id;else{const te=(await Nt()).find(me=>me.name===F);te&&(Q=te.id)}if(Q&&W.length>0)for(const D of W){const te={container_id:Q,sample_id:D.sampleId||D.id||D.sample||D.code,position:D.position||D.pos||D.slot,data:D};if(te.sample_id&&te.position)try{await Ms(te)}catch(me){console.error("Failed to upsert sample:",me)}}}catch(Y){console.error("Failed to upsert container:",Y)}}if(T(!1),alert(`Imported ${O} containers to Supabase.`),typeof n=="function"){const U=await Nt();n(U)}},z=`name,location,containerType,sampleType,temperature
"Plasma Box Alpha","Freezer A - Rack 1","5x5-box","DP Pools","-80°C"
"cfDNA Storage Unit","Freezer B - Rack 2","9x9-box","cfDNA Tubes","-80°C"`,V=`cfDNA_RACK_001,Box Name:,cfDNA_BOX_001,,,,,,,,,,
,,1,2,3,4,5,6,7,8,9
,A,C00388cD010,C00395cD008,C00304cD005,C00397cD036,C00402cD006,C00411cD016,C00554cD002,C00405cD018,C00394cD016
,B,C00552cD001,C00394cD008,C00411cD014,C00375cD016,C00403cD006,C00386cD014,C00397cD014,C00403cD018,C00386cD018
,C,C00558cD004,C00853cD004,C00372cD014,C00394cD006,C00553cD001,C00553cD002,C00396cD014,C00402cD018,C00411cD016
,D,C00394cD010,C00400cD010,C00477cD016,C00398cD006,C00405cD006,C00386cD008,C00400cD014,C00304cD004,C00397cD008
,E,C00395cD010,C00487cD011,C00411cD010,C00336cD002,C00406cD006,C00553cD003,C00402cD014,C00400cD018,C00396cD008
,F,C00552cD002,C00402cD010,C00386cD006,C00397cD006,C00446cD018,C00640cD003,C00403cD014,C00396cD018,C00403cD008
,G,C00397cD010,C00403cD010,C00554cD001,C00396cD006,C00555cD002,C00336cD002,C00554cD003,C00397cD018,C00556cD019
,H,C00396cD010,C00552cD003,C00395cD036,C00400cD006,C00558cD006,C00394cD014,C00405cD014,C00416cD020,C00402cD008
,I,C00406cD010,C00405cD010,C00330cD004,C00487cD012,C00555cD001,C00395cD014,C00406cD014,C00395cD018,C00403cD008


PLASMA_RACK_001,Box Name:,PLASMA_BOX_001,,,,,

,,1,2,3,4,5
,A,C03001PL1A,C03002PL2A,C03003PL3A,C03004PL4A,C03005PL5A
,B,C03006PL6A,C03007PL7A,C03008PL8A,C03009PL9A,C03010PL10A
,C,C03011PL11A,C03012PL12A,C03013PL13A,C03014PL14A,C03015PL15A
,D,C03016PL16A,C03017PL17A,C03018PL18A,C03019PL19A,C03020PL20A
,E,C03021PL21A,C03022PL22A,C03023PL23A,C03024PL24A,C03025PL25A


DP_POOL_RACK_001,Box Name:,DP_POOL_BOX_001,,,,,,,,,,
,,1,2,3,4,5,6,7,8,9
,A,C01039DPP1B,C01040DPP2B,C01041DPP3B,C01042DPP4B,C01043DPP5B,C01044DPP6B,C01045DPP7B,C01046DPP8B,C01047DPP9B
,B,C01048DPP10B,C01049DPP11B,C01050DPP12B,C01051DPP13B,C01052DPP14B,C01053DPP15B,C01054DPP16B,C01055DPP17B,C01056DPP18B
,C,C01057DPP19B,C01058DPP20B,C01059DPP21B,C01060DPP22B,C01061DPP23B,C01062DPP24B,C01063DPP25B,C01064DPP26B,C01065DPP27B`,K=`containerName,sampleId,position
"cfDNA_BOX_001","C01039DPP1B","A1"
"cfDNA_BOX_001","C01040DPP2B","A2"`,ee=async()=>{try{const O=await Nt(),U=await Gn(),F={};U.forEach(R=>{F[R.containerId]||(F[R.containerId]=[]),F[R.containerId].push(R)});const ge=O.map(R=>({container:R,samples:F[R.id]||[]})),S=R=>R.map(W=>({container:W.container&&W.container.id?{id:W.container.id,name:W.container.name,location:W.container.location}:W.container,samples:Array.isArray(W.samples)?W.samples.map(le=>({sample_id:le.sample_id||le.id||le.sampleId,position:le.position})).sort((le,Y)=>String(le.sample_id).localeCompare(String(Y.sample_id))):[]})).sort((W,le)=>String(W.container?.id||"").localeCompare(String(le.container?.id||""))),P=JSON.stringify(S(ge));let H=null;try{H=await Os()}catch{H=null}const ie=H&&Array.isArray(H.data)?JSON.stringify(S(H.data)):null;if(ie!==null&&ie===P)return;await Ou(ge,"admin"),alert("Manual backup completed to Supabase."),await d()}catch(O){alert("Failed to save backup to Supabase: "+(O.message||O))}},[ue,G]=l.useState(!1),[oe,E]=l.useState("All");return t.jsx("div",{className:"p-6 min-h-screen bg-background",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx(ao,{actions:t.jsxs(t.Fragment,{children:[t.jsx(be,{variant:"destructive",children:"Admin Only"}),t.jsxs(Z,{variant:"outline",onClick:s,children:[t.jsx(Ki,{className:"w-4 h-4 mr-2"}),"Exit Admin Mode"]})]})}),t.jsxs(sn,{defaultValue:"import",className:"w-full mt-6",children:[t.jsxs(rn,{className:"grid w-full grid-cols-3",children:[t.jsx(Me,{value:"import",children:"Import"}),t.jsx(Me,{value:"export",children:"Export"}),t.jsx(Me,{value:"manage",children:"Manage"})]}),t.jsxs(Oe,{value:"import",className:"space-y-6",children:[t.jsx(ke,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vn,{className:"w-5 h-5"}),t.jsx("h3",{children:"Import Containers"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{htmlFor:"containerFile",children:"Upload Container CSV"}),t.jsx(Ke,{ref:A,id:"containerFile",type:"file",accept:".csv",onChange:x}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Grid format auto-detects sample type from rack ID (e.g., cfDNA_RACK_001 → cfDNA Tubes) and container size from sample type (Plasma → 5x5 box, others → 9x9 box). Imports containers AND samples together."})]}),t.jsxs(sn,{defaultValue:"grid",className:"w-full",children:[t.jsxs(rn,{className:"grid w-full grid-cols-2",children:[t.jsx(Me,{value:"grid",children:"Grid Format"}),t.jsx(Me,{value:"standard",children:"Standard CSV"})]}),t.jsxs(Oe,{value:"grid",className:"space-y-2",children:[t.jsx(Re,{children:"Grid CSV Template (Your Format)"}),t.jsx(_s,{value:V,readOnly:!0,className:"font-mono text-xs h-32"}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{const O=new Blob([V],{type:"text/csv"}),U=window.URL.createObjectURL(O),F=document.createElement("a");F.href=U,F.download="grid-template.csv",F.click(),window.URL.revokeObjectURL(U)},children:[t.jsx(wn,{className:"w-4 h-4 mr-2"}),"Download Grid Template"]})]}),t.jsxs(Oe,{value:"standard",className:"space-y-2",children:[t.jsx(Re,{children:"Standard CSV Template"}),t.jsx(_s,{value:z,readOnly:!0,className:"font-mono text-xs h-20"}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{const O=new Blob([z],{type:"text/csv"}),U=window.URL.createObjectURL(O),F=document.createElement("a");F.href=U,F.download="container-template.csv",F.click(),window.URL.revokeObjectURL(U)},children:[t.jsx(wn,{className:"w-4 h-4 mr-2"}),"Download Standard Template"]})]})]}),b&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[b.valid?t.jsx(st,{className:"w-4 h-4 text-green-600"}):t.jsx(Ge,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"text-sm",children:b.valid?`${b.data.length} containers ready to import`:`${b.errors.length} errors found`})]}),y&&y.data.length>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(st,{className:"w-4 h-4 text-blue-600"}),t.jsxs("span",{className:"text-sm text-blue-600",children:["+ ",y.data.length," samples detected in grid"]})]}),!b.valid&&t.jsxs(kt,{variant:"destructive",children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsx(Tt,{children:t.jsx("ul",{className:"list-disc list-inside space-y-1",children:b.errors.map((O,U)=>t.jsx("li",{className:"text-xs",children:O},U))})})]}),b.valid&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Z,{onClick:I,disabled:w,className:"w-full",children:[t.jsx(en,{className:"w-4 h-4 mr-2"}),w?"Importing...":"Import All (Containers + Samples)"]}),t.jsxs("p",{className:"text-xs text-blue-700 text-center font-semibold",children:["This will import ",t.jsx("b",{children:"all containers and all samples"})," from the grid file in one step."]})]})]})]})}),t.jsx(ke,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Wt,{className:"w-5 h-5"}),t.jsx("h3",{children:"Import Samples"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{htmlFor:"sampleFile",children:"Upload Sample CSV"}),t.jsx(Ke,{ref:N,id:"sampleFile",type:"file",accept:".csv",onChange:g}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV format: containerId, sampleId, position"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Re,{children:"CSV Template"}),t.jsx(_s,{value:K,readOnly:!0,className:"font-mono text-xs h-16"}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{const O=new Blob([K],{type:"text/csv"}),U=window.URL.createObjectURL(O),F=document.createElement("a");F.href=U,F.download="sample-template.csv",F.click(),window.URL.revokeObjectURL(U)},children:[t.jsx(wn,{className:"w-4 h-4 mr-2"}),"Download Template"]})]}),y&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[y.valid?t.jsx(st,{className:"w-4 h-4 text-green-600"}):t.jsx(Ge,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"text-sm",children:y.valid?`${y.data.length} samples ready to import`:`${y.errors.length} errors found`})]}),!y.valid&&t.jsxs(kt,{variant:"destructive",children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsx(Tt,{children:t.jsx("ul",{className:"list-disc list-inside space-y-1",children:y.errors.map((O,U)=>t.jsx("li",{className:"text-xs",children:O},U))})})]}),y.valid&&t.jsxs(Z,{onClick:M,disabled:w,className:"w-full",children:[t.jsx(en,{className:"w-4 h-4 mr-2"}),w?"Importing...":"Import Samples"]})]})]})})]}),t.jsxs(Oe,{value:"export",className:"space-y-6",children:[t.jsx(ke,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{children:"Export & Backup Data"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Download your current container and sample data, or perform a manual backup of the current state. Manual backup will be overwritten at the next 2am snapshot."}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last snapshot: ",t.jsx("b",{children:f?new Date(f).toLocaleString():"None"})]}),t.jsx("div",{className:"flex gap-4 flex-wrap items-center",children:t.jsxs(Z,{onClick:ee,disabled:a,children:[t.jsx(vn,{className:"w-4 h-4 mr-2"}),"Manual Backup"]})}),c&&t.jsx("div",{className:"text-red-600 text-xs mt-2",children:c})]})}),t.jsxs(ke,{className:"p-6 mt-6",children:[t.jsx("h3",{className:"mb-4",children:"Snapshot Grid View"}),a?t.jsx("div",{className:"text-muted-foreground",children:"Loading snapshot from Supabase..."}):t.jsx(q0,{containers:r})]})]}),t.jsx(Oe,{value:"manage",className:"space-y-6",children:t.jsx(ke,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{children:"Danger Zone"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"This will permanently delete all containers and samples from the database. This action cannot be undone."}),t.jsxs(qn,{open:ue,onOpenChange:G,children:[t.jsx(th,{asChild:!0,children:t.jsxs(Z,{variant:"destructive",children:[t.jsx(yn,{className:"w-4 h-4 mr-2"}),"Clear All Data"]})}),t.jsxs(Tn,{children:[t.jsxs(Jn,{children:[t.jsx(An,{children:"Confirm Data Deletion"}),t.jsxs(En,{children:["Are you sure you want to delete ",t.jsx("b",{children:"ALL"})," containers and samples? This cannot be undone."]})]}),t.jsxs(Co,{children:[t.jsx(Z,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),t.jsx(Z,{variant:"destructive",onClick:()=>{Object.keys(localStorage).forEach(O=>{(O.startsWith("samples-")||O.startsWith("nightly-backup-"))&&localStorage.removeItem(O)}),typeof n=="function"&&n([]),G(!1),alert("All data cleared.")},children:"Yes, Delete Everything"})]})]})]})]})})})]})]})})};var[jr]=it("Tooltip",[Ln]),Sr=Ln(),Od="TooltipProvider",X0=700,io="tooltip.open",[Z0,na]=jr(Od),Ld=e=>{const{__scopeTooltip:n,delayDuration:s=X0,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,i=l.useRef(!0),c=l.useRef(!1),u=l.useRef(0);return l.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),t.jsx(Z0,{scope:n,isOpenDelayedRef:i,delayDuration:s,onOpen:l.useCallback(()=>{window.clearTimeout(u.current),i.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:l.useCallback(f=>{c.current=f},[]),disableHoverableContent:o,children:a})};Ld.displayName=Od;var rs="Tooltip",[Q0,fs]=jr(rs),$d=e=>{const{__scopeTooltip:n,children:s,open:r,defaultOpen:o,onOpenChange:a,disableHoverableContent:i,delayDuration:c}=e,u=na(rs,e.__scopeTooltip),f=Sr(n),[m,d]=l.useState(null),p=yt(),x=l.useRef(0),b=i??u.disableHoverableContent,h=c??u.delayDuration,g=l.useRef(!1),[y,v]=Ht({prop:r,defaultProp:o??!1,onChange:A=>{A?(u.onOpen(),document.dispatchEvent(new CustomEvent(io))):u.onClose(),a?.(A)},caller:rs}),w=l.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),T=l.useCallback(()=>{window.clearTimeout(x.current),x.current=0,g.current=!1,v(!0)},[v]),j=l.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v(!1)},[v]),C=l.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{g.current=!0,v(!0),x.current=0},h)},[h,v]);return l.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),t.jsx(Bo,{...f,children:t.jsx(Q0,{scope:n,contentId:p,open:y,stateAttribute:w,trigger:m,onTriggerChange:d,onTriggerEnter:l.useCallback(()=>{u.isOpenDelayedRef.current?C():T()},[u.isOpenDelayedRef,C,T]),onTriggerLeave:l.useCallback(()=>{b?j():(window.clearTimeout(x.current),x.current=0)},[j,b]),onOpen:T,onClose:j,disableHoverableContent:b,children:s})})};$d.displayName=rs;var lo="TooltipTrigger",Fd=l.forwardRef((e,n)=>{const{__scopeTooltip:s,...r}=e,o=fs(lo,s),a=na(lo,s),i=Sr(s),c=l.useRef(null),u=je(n,c,o.onTriggerChange),f=l.useRef(!1),m=l.useRef(!1),d=l.useCallback(()=>f.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),t.jsx(zo,{asChild:!0,...i,children:t.jsx(pe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:u,onPointerMove:re(e.onPointerMove,p=>{p.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),m.current=!0)}),onPointerLeave:re(e.onPointerLeave,()=>{o.onTriggerLeave(),m.current=!1}),onPointerDown:re(e.onPointerDown,()=>{o.open&&o.onClose(),f.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:re(e.onFocus,()=>{f.current||o.onOpen()}),onBlur:re(e.onBlur,o.onClose),onClick:re(e.onClick,o.onClose)})})});Fd.displayName=lo;var sa="TooltipPortal",[ey,ty]=jr(sa,{forceMount:void 0}),Bd=e=>{const{__scopeTooltip:n,forceMount:s,children:r,container:o}=e,a=fs(sa,n);return t.jsx(ey,{scope:n,forceMount:s,children:t.jsx(Ye,{present:s||a.open,children:t.jsx(is,{asChild:!0,container:o,children:r})})})};Bd.displayName=sa;var Rn="TooltipContent",zd=l.forwardRef((e,n)=>{const s=ty(Rn,e.__scopeTooltip),{forceMount:r=s.forceMount,side:o="top",...a}=e,i=fs(Rn,e.__scopeTooltip);return t.jsx(Ye,{present:r||i.open,children:i.disableHoverableContent?t.jsx(Ud,{side:o,...a,ref:n}):t.jsx(ny,{side:o,...a,ref:n})})}),ny=l.forwardRef((e,n)=>{const s=fs(Rn,e.__scopeTooltip),r=na(Rn,e.__scopeTooltip),o=l.useRef(null),a=je(n,o),[i,c]=l.useState(null),{trigger:u,onClose:f}=s,m=o.current,{onPointerInTransitChange:d}=r,p=l.useCallback(()=>{c(null),d(!1)},[d]),x=l.useCallback((b,h)=>{const g=b.currentTarget,y={x:b.clientX,y:b.clientY},v=ay(y,g.getBoundingClientRect()),w=iy(y,v),T=ly(h.getBoundingClientRect()),j=dy([...w,...T]);c(j),d(!0)},[d]);return l.useEffect(()=>()=>p(),[p]),l.useEffect(()=>{if(u&&m){const b=g=>x(g,m),h=g=>x(g,u);return u.addEventListener("pointerleave",b),m.addEventListener("pointerleave",h),()=>{u.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",h)}}},[u,m,x,p]),l.useEffect(()=>{if(i){const b=h=>{const g=h.target,y={x:h.clientX,y:h.clientY},v=u?.contains(g)||m?.contains(g),w=!cy(y,i);v?p():w&&(p(),f())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[u,m,i,f,p]),t.jsx(Ud,{...e,ref:a})}),[sy,ry]=jr(rs,{isInside:!1}),oy=Wu("TooltipContent"),Ud=l.forwardRef((e,n)=>{const{__scopeTooltip:s,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...c}=e,u=fs(Rn,s),f=Sr(s),{onClose:m}=u;return l.useEffect(()=>(document.addEventListener(io,m),()=>document.removeEventListener(io,m)),[m]),l.useEffect(()=>{if(u.trigger){const d=p=>{p.target?.contains(u.trigger)&&m()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[u.trigger,m]),t.jsx(as,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:m,children:t.jsxs(Uo,{"data-state":u.stateAttribute,...f,...c,ref:n,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(oy,{children:r}),t.jsx(sy,{scope:s,isInside:!0,children:t.jsx(lg,{id:u.contentId,role:"tooltip",children:o||r})})]})})});zd.displayName=Rn;var Vd="TooltipArrow",Hd=l.forwardRef((e,n)=>{const{__scopeTooltip:s,...r}=e,o=Sr(s);return ry(Vd,s).isInside?null:t.jsx(Vo,{...o,...r,ref:n})});Hd.displayName=Vd;function ay(e,n){const s=Math.abs(n.top-e.y),r=Math.abs(n.bottom-e.y),o=Math.abs(n.right-e.x),a=Math.abs(n.left-e.x);switch(Math.min(s,r,o,a)){case a:return"left";case o:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function iy(e,n,s=5){const r=[];switch(n){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return r}function ly(e){const{top:n,right:s,bottom:r,left:o}=e;return[{x:o,y:n},{x:s,y:n},{x:s,y:r},{x:o,y:r}]}function cy(e,n){const{x:s,y:r}=e;let o=!1;for(let a=0,i=n.length-1;a<n.length;i=a++){const c=n[a],u=n[i],f=c.x,m=c.y,d=u.x,p=u.y;m>r!=p>r&&s<(d-f)*(r-m)/(p-m)+f&&(o=!o)}return o}function dy(e){const n=e.slice();return n.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),uy(n)}function uy(e){if(e.length<=1)return e.slice();const n=[];for(let r=0;r<e.length;r++){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}n.pop();const s=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;s.length>=2;){const a=s[s.length-1],i=s[s.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))s.pop();else break}s.push(o)}return s.pop(),n.length===1&&s.length===1&&n[0].x===s[0].x&&n[0].y===s[0].y?n:n.concat(s)}var my=Ld,fy=$d,py=Fd,hy=Bd,xy=zd,gy=Hd;function Wd({delayDuration:e=0,...n}){return t.jsx(my,{"data-slot":"tooltip-provider",delayDuration:e,...n})}function vy({...e}){return t.jsx(Wd,{children:t.jsx(fy,{"data-slot":"tooltip",...e})})}function yy({...e}){return t.jsx(py,{"data-slot":"tooltip-trigger",...e})}function by({className:e,sideOffset:n=0,children:s,...r}){return t.jsx(hy,{children:t.jsxs(xy,{"data-slot":"tooltip-content",sideOffset:n,className:he("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[s,t.jsx(gy,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function wy({userActivities:e,currentContainerId:n,lockedBy:s,isOnline:r=!0,className:o=""}){const[a,i]=l.useState(Date.now());l.useEffect(()=>{const p=setInterval(()=>i(Date.now()),1e4);return()=>clearInterval(p)},[]);const c=n?e.filter(p=>p.containerId===n):e.slice(0,5),u=p=>{switch(p){case"viewing":return t.jsx(Xi,{className:"h-3 w-3"});case"editing":return t.jsx(Cn,{className:"h-3 w-3"});case"scanning":return t.jsx(jo,{className:"h-3 w-3"});default:return t.jsx(Gt,{className:"h-3 w-3"})}},f=p=>{switch(p){case"viewing":return"bg-blue-100 text-blue-800 border-blue-200";case"editing":return"bg-orange-100 text-orange-800 border-orange-200";case"scanning":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=p=>{const x=Math.floor((a-p)/1e3);return x<60?"just now":x<3600?`${Math.floor(x/60)}m ago`:`${Math.floor(x/3600)}h ago`},d=p=>p.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2);return c.length===0&&!s?t.jsx("div",{className:`flex items-center gap-2 text-sm text-muted-foreground ${o}`,children:r?t.jsxs(t.Fragment,{children:[t.jsx(Yn,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{children:"No active collaborators"})]}):t.jsxs(t.Fragment,{children:[t.jsx(kn,{className:"h-4 w-4 text-red-500"}),t.jsx("span",{children:"Offline mode"})]})}):t.jsxs("div",{className:`space-y-2 ${o}`,children:[t.jsx("div",{className:"flex items-center gap-2",children:r?t.jsxs(be,{variant:"outline",className:"text-green-700 border-green-200 bg-green-50",children:[t.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Live"]}):t.jsxs(be,{variant:"outline",className:"text-red-700 border-red-200 bg-red-50",children:[t.jsx(kn,{className:"h-3 w-3 mr-1"}),"Offline"]})}),s&&t.jsx(ke,{className:"border-orange-200 bg-orange-50",children:t.jsx(Pt,{className:"p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Cn,{className:"h-4 w-4 text-orange-600"}),t.jsxs("span",{className:"text-sm text-orange-800",children:[t.jsx("strong",{children:s.userName})," is editing this container"]})]})})}),c.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Gt,{className:"h-4 w-4"}),t.jsx("span",{children:n?"Active on this container":"Recent activity"})]}),t.jsx("div",{className:"space-y-1",children:c.map(p=>t.jsx(Wd,{children:t.jsxs(vy,{children:[t.jsx(yy,{asChild:!0,children:t.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-muted/50 transition-colors",children:[t.jsx(_d,{className:"h-6 w-6",children:t.jsx(Md,{className:"text-xs",children:d(p.userName)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium truncate",children:p.userName}),t.jsxs(be,{variant:"outline",className:`text-xs ${f(p.action)}`,children:[u(p.action),p.action]})]}),!n&&t.jsx("div",{className:"text-xs text-muted-foreground truncate",children:p.containerId})]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[t.jsx(wo,{className:"h-3 w-3"}),m(Number(p.timestamp))]})]})}),t.jsx(by,{children:t.jsxs("div",{className:"text-xs",children:[t.jsx("div",{children:t.jsx("strong",{children:p.userName})}),t.jsxs("div",{children:[p.action," ",p.containerId]}),t.jsx("div",{children:new Date(p.timestamp).toLocaleString()})]})})]})},`${p.userId}-${p.timestamp}`))})]})]})}function si({userActivities:e,isOnline:n,className:s=""}){const[r,o]=l.useState(!1),a=new Set(e.map(i=>i.userId)).size;return a===0&&n?null:t.jsx("div",{className:`fixed bottom-4 left-4 z-50 ${s}`,children:t.jsx(ke,{className:"shadow-lg",children:t.jsxs(Pt,{className:"p-0",children:[t.jsx("button",{onClick:()=>o(!r),className:"flex items-center gap-2 p-3 w-full text-left hover:bg-muted/50 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-2",children:[n?t.jsx(Yn,{className:"h-4 w-4 text-green-500"}):t.jsx(kn,{className:"h-4 w-4 text-red-500"}),t.jsx(Gt,{className:"h-4 w-4"}),t.jsxs("span",{className:"text-sm font-medium",children:[a," ",a===1?"user":"users"," active"]})]})}),r&&t.jsx("div",{className:"border-t p-3 max-h-64 overflow-y-auto",children:t.jsx(wy,{userActivities:e,isOnline:n})})]})})})}function jy({currentUser:e,onConflictResolved:n,broadcastConflict:s,broadcastLock:r}){const[o,a]=l.useState([]),[i,c]=l.useState([]),[u,f]=l.useState(null);l.useEffect(()=>{const j=()=>{try{const N=localStorage.getItem("saga-conflicts");N&&a(JSON.parse(N))}catch(N){console.error("Error loading conflicts:",N)}},C=()=>{try{const N=localStorage.getItem("saga-locks");if(N){const M=JSON.parse(N),I=new Date,z=M.filter(V=>new Date(V.expiresAt)>I);c(z),localStorage.setItem("saga-locks",JSON.stringify(z))}}catch(N){console.error("Error loading locks:",N)}};j(),C();const A=setInterval(()=>{j(),C()},3e4);return()=>clearInterval(A)},[]),l.useEffect(()=>{const j=A=>{const N=A.detail;a(M=>M.find(z=>z.id===N.id)?M.map(z=>z.id===N.id?N:z):[N,...M])},C=A=>{const N=A.detail;c(M=>{const I=M.filter(z=>z.resourceId!==N.resourceId);return[N,...I]})};return window.addEventListener("saga-conflict",j),window.addEventListener("saga-lock",C),()=>{window.removeEventListener("saga-conflict",j),window.removeEventListener("saga-lock",C)}},[]);const m=(j,C,A,N,M,I)=>{const z={id:`conflict-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),type:j,severity:C,status:"pending",description:A,affectedResource:N,involvedUsers:M,conflictDetails:I};a(V=>[z,...V]);try{const V=[z,...o];localStorage.setItem("saga-conflicts",JSON.stringify(V))}catch(V){console.error("Failed to save conflict:",V)}return s(z),z},d=(j,C,A)=>{const N=o.find(I=>I.id===j);if(!N)return;const M={...N,status:"resolved",resolutionStrategy:C,resolvedAt:new Date().toISOString(),resolvedBy:e,conflictDetails:{...N.conflictDetails,proposedResolution:N.conflictDetails.proposedResolution}};a(I=>I.map(z=>z.id===j?M:z));try{const I=o.map(z=>z.id===j?M:z);localStorage.setItem("saga-conflicts",JSON.stringify(I))}catch(I){console.error("Failed to save resolved conflict:",I)}n(M),s(M)},p=(j,C,A,N=30)=>{const M={id:`lock-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,resourceType:j,resourceId:C,userId:e,userName:e,lockedAt:new Date().toISOString(),expiresAt:new Date(Date.now()+N*60*1e3).toISOString(),reason:A};c(I=>{const z=I.filter(V=>V.resourceId!==C);return[M,...z]});try{const I=i.filter(z=>z.resourceId!==C);I.push(M),localStorage.setItem("saga-locks",JSON.stringify(I))}catch(I){console.error("Failed to save lock:",I)}return r(M),M},x=j=>{c(C=>C.filter(A=>A.id!==j));try{const C=i.filter(A=>A.id!==j);localStorage.setItem("saga-locks",JSON.stringify(C))}catch(C){console.error("Failed to save locks after release:",C)}},b=()=>{const j=[{type:"version_conflict",severity:"medium",description:"Container PB001 was modified simultaneously by multiple users",affectedResource:{type:"container",id:"PB001",name:"Demo Container"},involvedUsers:[e,"OtherUser"],conflictDetails:{localVersion:{occupiedSlots:15},remoteVersion:{occupiedSlots:18}}},{type:"simultaneous_edit",severity:"high",description:"Sample placement conflict in position A1",affectedResource:{type:"sample",id:"A1",name:"Position A1"},involvedUsers:[e,"LabTech1"],conflictDetails:{localVersion:{sampleId:"SAMPLE123"},remoteVersion:{sampleId:"SAMPLE456"}}}],C=j[Math.floor(Math.random()*j.length)];m(C.type,C.severity,C.description,C.affectedResource,C.involvedUsers,C.conflictDetails)},h=()=>{const j=`PB${String(Math.floor(Math.random()*999)+1).padStart(3,"0")}`;p("container",j,"Manual lock for testing",5)},g=j=>{switch(j){case"critical":return t.jsx(Ge,{className:"w-4 h-4 text-red-600"});case"high":return t.jsx(Ge,{className:"w-4 h-4 text-orange-600"});case"medium":return t.jsx(wo,{className:"w-4 h-4 text-yellow-600"});default:return t.jsx(st,{className:"w-4 h-4 text-green-600"})}},y=j=>{switch(j){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}},v=j=>new Date(j).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=o.filter(j=>j.status==="pending"),T=o.filter(j=>j.status==="resolved");return t.jsx("div",{className:"space-y-6",children:t.jsxs(ke,{children:[t.jsx(Xn,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ip,{className:"w-5 h-5"}),t.jsx(Zn,{children:"Conflict Resolution Center"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(be,{variant:"outline",children:[w.length," Pending"]}),t.jsxs(be,{variant:"outline",children:[i.length," Active Locks"]}),t.jsx(Z,{variant:"outline",size:"sm",onClick:b,children:"Create Demo Conflict"}),t.jsx(Z,{variant:"outline",size:"sm",onClick:h,children:"Create Demo Lock"})]})]})}),t.jsx(Pt,{children:t.jsxs(sn,{defaultValue:"conflicts",className:"space-y-4",children:[t.jsxs(rn,{className:"grid w-full grid-cols-3",children:[t.jsxs(Me,{value:"conflicts",children:["Active Conflicts (",w.length,")"]}),t.jsxs(Me,{value:"locks",children:["Resource Locks (",i.length,")"]}),t.jsxs(Me,{value:"history",children:["Resolution History (",T.length,")"]})]}),t.jsx(Oe,{value:"conflicts",className:"space-y-4",children:w.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(st,{className:"w-12 h-12 mx-auto mb-4 text-green-600 opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No Active Conflicts"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"System is operating normally without conflicts"})]}):t.jsx("div",{className:"space-y-4",children:w.map(j=>t.jsx(ke,{className:"border-l-4 border-l-orange-500",children:t.jsx(Pt,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[g(j.severity),t.jsx(be,{className:y(j.severity),children:j.severity}),t.jsx(be,{variant:"outline",children:vt(j.type,"_"," ")}),t.jsx("span",{className:"text-sm text-muted-foreground",children:v(j.timestamp)})]}),t.jsx("h4",{className:"font-medium",children:j.description}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.jsxs("div",{children:["Affected: ",j.affectedResource.type," - ",j.affectedResource.id]}),t.jsxs("div",{children:["Users: ",j.involvedUsers.join(", ")]})]}),j.conflictDetails.localVersion&&j.conflictDetails.remoteVersion&&t.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md",children:[t.jsx("h5",{className:"text-sm font-medium mb-2",children:"Conflict Details:"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Local Version:"}),t.jsx("pre",{className:"mt-1 text-xs",children:JSON.stringify(j.conflictDetails.localVersion,null,2)})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Remote Version:"}),t.jsx("pre",{className:"mt-1 text-xs",children:JSON.stringify(j.conflictDetails.remoteVersion,null,2)})]})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>d(j.id,"prefer_local"),children:"Keep Local"}),t.jsx(Z,{size:"sm",variant:"outline",onClick:()=>d(j.id,"prefer_remote"),children:"Keep Remote"}),t.jsxs(Z,{size:"sm",onClick:()=>d(j.id,"auto_merge"),children:[t.jsx(Zf,{className:"w-4 h-4 mr-1"}),"Auto Merge"]})]})]})})},j.id))})}),t.jsx(Oe,{value:"locks",className:"space-y-4",children:i.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Na,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No Active Locks"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"No resources are currently locked"})]}):t.jsx("div",{className:"rounded-md border",children:t.jsxs(Ws,{children:[t.jsx(Gs,{children:t.jsxs(Ut,{children:[t.jsx(Ee,{children:"Resource"}),t.jsx(Ee,{children:"Type"}),t.jsx(Ee,{children:"Locked By"}),t.jsx(Ee,{children:"Locked At"}),t.jsx(Ee,{children:"Expires"}),t.jsx(Ee,{children:"Reason"}),t.jsx(Ee,{children:"Actions"})]})}),t.jsx(Ks,{children:i.map(j=>t.jsxs(Ut,{children:[t.jsx(Ie,{className:"font-mono",children:j.resourceId}),t.jsx(Ie,{children:t.jsx(be,{variant:"outline",children:j.resourceType})}),t.jsx(Ie,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Gt,{className:"w-3 h-3"}),j.userName]})}),t.jsx(Ie,{className:"font-mono text-xs",children:v(j.lockedAt)}),t.jsx(Ie,{className:"font-mono text-xs",children:v(j.expiresAt)}),t.jsx(Ie,{className:"text-sm",children:j.reason}),t.jsx(Ie,{children:j.userId===e&&t.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>x(j.id),children:[t.jsx(Na,{className:"w-4 h-4 mr-1"}),"Release"]})})]},j.id))})]})})}),t.jsx(Oe,{value:"history",className:"space-y-4",children:T.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(np,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),t.jsx("h3",{className:"mb-2",children:"No Resolution History"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"No conflicts have been resolved yet"})]}):t.jsx("div",{className:"rounded-md border",children:t.jsxs(Ws,{children:[t.jsx(Gs,{children:t.jsxs(Ut,{children:[t.jsx(Ee,{children:"Timestamp"}),t.jsx(Ee,{children:"Type"}),t.jsx(Ee,{children:"Severity"}),t.jsx(Ee,{children:"Resource"}),t.jsx(Ee,{children:"Resolution"}),t.jsx(Ee,{children:"Resolved By"})]})}),t.jsx(Ks,{children:T.map(j=>t.jsxs(Ut,{children:[t.jsx(Ie,{className:"font-mono text-xs",children:v(j.resolvedAt||j.timestamp)}),t.jsx(Ie,{children:t.jsx(be,{variant:"outline",children:j.type.replace("_"," ")})}),t.jsx(Ie,{children:t.jsx(be,{className:y(j.severity),children:j.severity})}),t.jsx(Ie,{className:"font-mono",children:j.affectedResource.id}),t.jsx(Ie,{children:t.jsx(be,{variant:"secondary",children:j.resolutionStrategy?vt(j.resolutionStrategy,"_"," "):""})}),t.jsx(Ie,{children:j.resolvedBy})]},j.id))})]})})})]})})]})})}var Sy=(e,n,s,r,o,a,i,c)=>{let u=document.documentElement,f=["light","dark"];function m(x){(Array.isArray(e)?e:[e]).forEach(b=>{let h=b==="class",g=h&&a?o.map(y=>a[y]||y):o;h?(u.classList.remove(...g),u.classList.add(a&&a[x]?a[x]:x)):u.setAttribute(b,x)}),d(x)}function d(x){c&&f.includes(x)&&(u.style.colorScheme=x)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)m(r);else try{let x=localStorage.getItem(n)||s,b=i&&x==="system"?p():x;m(b)}catch{}},Ny=l.createContext(void 0),Cy={setTheme:e=>{},themes:[]},ky=()=>{var e;return(e=l.useContext(Ny))!=null?e:Cy};l.memo(({forcedTheme:e,storageKey:n,attribute:s,enableSystem:r,enableColorScheme:o,defaultTheme:a,value:i,themes:c,nonce:u,scriptProps:f})=>{let m=JSON.stringify([s,n,a,e,c,i,r,o]).slice(1,-1);return l.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Sy.toString()})(${m})`}})});const Fr=({...e})=>{const{theme:n="system"}=ky();return t.jsx(Cu,{theme:n,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})},ri="saga-containers",oi="saga-user-initials";function Ty(){const[e,n]=l.useState(!1),[s,r]=l.useState([]),[o,a]=l.useState([]),[i,c]=l.useState(new Map),[u,f]=l.useState(navigator.onLine),[m,d]=l.useState(""),[p,x]=l.useState(!1),[b,h]=l.useState(!1),[g,y]=l.useState([]),[v,w]=l.useState([]),[T,j]=l.useState({status:"offline",message:"Using local storage mode",serverFunctions:!1,database:!1}),[C,A]=l.useState("");l.useEffect(()=>{N()},[]),l.useEffect(()=>{const D=()=>{f(!0),Ne.success("🌐 Back online - supabase connected")},te=()=>{f(!1),Ne.warning("📡 Working offline - changes saved locally")};return window.addEventListener("online",D),window.addEventListener("offline",te),()=>{window.removeEventListener("online",D),window.removeEventListener("offline",te)}},[]),l.useEffect(()=>{const te=new URLSearchParams(window.location.search).get("admin");n(te==="true")},[]);const N=async()=>{M(),K(),j({status:"offline",message:"Offline - using local storage",serverFunctions:!1,database:!1})},M=()=>{try{const D=localStorage.getItem(oi);if(D){const te=JSON.parse(D);d(te.initials)}}catch(D){console.error("Error loading user initials:",D)}},I=D=>{const te={initials:D.toUpperCase(),timestamp:new Date().toISOString()};d(te.initials),localStorage.setItem(oi,JSON.stringify(te)),Ne.success(`Welcome to SAGA Storage System, ${te.initials}!`)},z=()=>{C.trim().length>=2?(I(C.trim()),x(!1),A("")):Ne.error("Please enter at least 2 characters for your initials")},V=()=>{A(m),x(!0)},K=()=>{try{const D=localStorage.getItem(ri);if(D){const te=JSON.parse(D);Array.isArray(te)&&r(te)}}catch(D){console.error("Error loading containers from storage:",D)}},ee=async D=>{r(D);try{localStorage.setItem(ri,JSON.stringify(D))}catch(te){console.error("Failed to save to localStorage:",te),Ne.error("Failed to save changes locally")}if(u)try{F(D)}catch(te){console.warn("Failed to broadcast container update:",te)}m&&ue("container_updated","container","bulk_update",{description:`Container list updated - ${D.length} containers`,newValues:{containerCount:D.length}},m)},ue=(D,te,me,_e,Ce)=>{try{const Se=JSON.parse(localStorage.getItem("saga-audit-logs")||"[]"),De=[{id:`audit-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),userId:Ce,userName:Ce,userRole:"Lab User",action:D,entityType:te,entityId:me,details:{description:_e},severity:"low",success:!0},...Se].slice(0,1e3);localStorage.setItem("saga-audit-logs",JSON.stringify(De))}catch(Se){console.error("Failed to store audit log locally:",Se)}},G=(D,te,me)=>{c(_e=>new Map(_e).set(D,{userId:te,userName:me})),Ne.info(`🔒 ${me} is editing container ${D}`)},oe=D=>{c(te=>{const me=new Map(te);return me.delete(D),me})},E=()=>{const D=new URL(window.location.href);D.searchParams.delete("admin"),window.history.replaceState({},"",D.toString()),n(!1)},O=m||"anonymous",U=m||"Anonymous User",F=D=>{const te=new CustomEvent("saga-container-update",{detail:{containers:D,userId:O,userName:U}});window.dispatchEvent(te)},ge=(D,te)=>{const me=new CustomEvent("saga-sample-update",{detail:{containerId:D,samples:te,userId:O,userName:U}});window.dispatchEvent(me)},S=D=>{const te=new CustomEvent("saga-user-activity",{detail:D});window.dispatchEvent(te)},P=D=>(G(D,O,U),Promise.resolve()),H=D=>(oe(D),Promise.resolve()),ie=D=>i.has(D),R=D=>{y(te=>te.map(me=>me.id===D.id?D:me)),Ne.success("Conflict resolved successfully")},W=D=>{const te=new CustomEvent("saga-conflict",{detail:D});window.dispatchEvent(te)},le=D=>{const te=new CustomEvent("saga-lock",{detail:D});window.dispatchEvent(te)},Y={userId:O,userName:U,currentUser:m?{initials:m}:null,broadcastSampleUpdate:ge,broadcastUserActivity:S,lockContainer:P,unlockContainer:H,isContainerLocked:ie,lockedContainers:i,userActivities:o,isOnline:u,databaseStatus:T.status},Q=()=>u?t.jsxs(be,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[t.jsx(Rf,{className:"h-3 w-3 mr-1"}),"Local Storage"]}):t.jsxs(be,{variant:"outline",className:"text-xs bg-gray-50 text-gray-700 border-gray-200",children:[t.jsx(kn,{className:"h-3 w-3 mr-1"}),"Offline"]});return m?e?t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("div",{className:"border-b bg-card",children:t.jsxs("div",{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(vn,{className:"h-6 w-6"}),t.jsxs("div",{children:[t.jsx("h1",{children:"SAGA System Administration"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["User: ",m]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(be,{variant:"outline",className:"text-xs",children:"Admin Mode"}),t.jsx(Z,{variant:"outline",onClick:E,children:"Exit Admin"}),t.jsxs(Z,{variant:"ghost",onClick:V,children:[t.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Change Initials"]})]})]})}),t.jsxs(sn,{defaultValue:new URLSearchParams(window.location.search).get("tab")||"containers",className:"p-6",children:[t.jsxs(rn,{className:"grid w-full grid-cols-4",children:[t.jsxs(Me,{value:"containers",className:"flex items-center gap-2",children:[t.jsx(vn,{className:"h-4 w-4"}),"Containers"]}),t.jsxs(Me,{value:"audit",className:"flex items-center gap-2",children:[t.jsx(Wt,{className:"h-4 w-4"}),"Audit Trail"]}),t.jsxs(Me,{value:"conflicts",className:"flex items-center gap-2",children:[t.jsx(Ge,{className:"h-4 w-4"}),"Conflicts"]}),t.jsxs(Me,{value:"system",className:"flex items-center gap-2",children:[t.jsx(Ta,{className:"h-4 w-4"}),"System"]})]}),t.jsx(Oe,{value:"containers",className:"mt-6",children:t.jsx(J0,{onExitAdmin:E,containers:s,onContainersChange:D=>{const te=D.map(me=>"lastUpdated"in me?me:{...me});ee(te.map(me=>({...me,occupiedSlots:"occupiedSlots"in me&&typeof me.occupiedSlots=="number"?me.occupiedSlots:0,totalSlots:"totalSlots"in me&&typeof me.totalSlots=="number"?me.totalSlots:0,lastUpdated:"lastUpdated"in me&&typeof me.lastUpdated=="string"?me.lastUpdated:new Date().toISOString()})))},...Y})}),t.jsx(Oe,{value:"audit",className:"mt-6",children:t.jsx(Gg,{currentUser:m})}),t.jsx(Oe,{value:"conflicts",className:"mt-6",children:t.jsx(jy,{currentUser:m,onConflictResolved:R,broadcastConflict:W,broadcastLock:le})}),t.jsx(Oe,{value:"system",className:"mt-6",children:t.jsx(ke,{children:t.jsx(Pt,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h3",{children:"System Information"})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Version"}),t.jsx("p",{children:"v2.3.0 SagaStore Edition"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[Q(),t.jsx("p",{className:"text-xs text-muted-foreground",children:T.message})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Network Status"}),t.jsx(be,{variant:u?"default":"secondary",children:u?t.jsxs(t.Fragment,{children:[t.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Online"]}):t.jsxs(t.Fragment,{children:[t.jsx(kn,{className:"h-3 w-3 mr-1"}),"Offline"]})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"}),t.jsx("p",{children:new Set(o.map(D=>D.userId)).size||1})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Containers"}),t.jsx("p",{children:s.length})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Locks"}),t.jsx("p",{children:i.size})]})]}),t.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"System Capabilities"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(st,{className:"h-3 w-3 text-green-600"}),"Local Storage Access"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Nn,{className:"h-3 w-3 text-red-600"}),"Server Functions"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(st,{className:"h-3 w-3 text-green-600"}),"Browser Events"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(st,{className:"h-3 w-3 text-green-600"}),"Offline Support"]})]})]})]})})})})]}),t.jsx(si,{userActivities:o,isOnline:u}),t.jsx(Fr,{position:"top-right"})]}):t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("div",{className:"border-b bg-card",children:t.jsxs("div",{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(vn,{className:"h-6 w-6"}),t.jsxs("div",{children:[t.jsx("h1",{children:"SAGA Storage System"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",m," - Ready to manage your lab samples"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(be,{variant:"outline",children:["User: ",m]}),t.jsxs(qn,{open:b,onOpenChange:h,children:[t.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>h(!0),children:t.jsx(Ta,{className:"h-4 w-4"})}),b&&t.jsxs(Tn,{children:[t.jsxs(Jn,{children:[t.jsx(An,{children:"System Tools"}),t.jsx(En,{children:"Access administrative functions and system information"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(Z,{variant:"outline",className:"w-full justify-start",onClick:()=>{const D=new URL(window.location.href);D.searchParams.set("admin","true"),window.location.href=D.toString()},children:[t.jsx(vn,{className:"h-4 w-4 mr-2"}),"Open Admin Dashboard"]}),t.jsxs(Z,{variant:"outline",className:"w-full justify-start",onClick:()=>{h(!1);const D=new URL(window.location.href);D.searchParams.set("admin","true"),D.searchParams.set("tab","audit"),window.location.href=D.toString()},children:[t.jsx(Wt,{className:"h-4 w-4 mr-2"}),"View Audit Logs"]}),t.jsxs(Z,{variant:"outline",className:"w-full justify-start",onClick:()=>{h(!1),Ne.info(`Storage: Local | Users: ${o.length||1} | Network: ${u?"Online":"Offline"}`)},children:[t.jsx(Gi,{className:"h-4 w-4 mr-2"}),"System Status"]}),t.jsxs(Z,{variant:"outline",className:"w-full justify-start",onClick:()=>{h(!1),V()},children:[t.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Change Initials (",m,")"]})]})]})]})]})]})}),t.jsx(H0,{containers:s,onContainersChange:ee,...Y}),t.jsx(si,{userActivities:o,isOnline:u}),t.jsx(qn,{open:p,onOpenChange:x,children:t.jsxs(Tn,{children:[t.jsxs(Jn,{children:[t.jsx(An,{children:"Update Your Initials"}),t.jsx(En,{children:"Change the initials used to track your activities"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"new-initials",children:"Your Initials"}),t.jsx(Ke,{id:"new-initials",placeholder:"e.g. JS",value:C,onChange:D=>A(D.target.value.toUpperCase()),onKeyDown:D=>{D.key==="Enter"&&z()},maxLength:4,className:"mt-1"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Z,{onClick:z,className:"flex-1",disabled:C.trim().length<2,children:"Update Initials"}),t.jsx(Z,{variant:"outline",onClick:()=>{x(!1),A("")},children:"Cancel"})]})]})]})}),t.jsx(Fr,{position:"top-right"})]}):t.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center",children:[t.jsx(ke,{className:"w-96",children:t.jsxs(Pt,{className:"p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user h-12 w-12 mx-auto mb-4 text-primary",children:[t.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),t.jsx("h3",{className:"mb-3",children:"Welcome to SAGA Sample Storage Management Systems"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(Re,{htmlFor:"initials",children:"Enter Your Initials"}),t.jsx(Ke,{id:"initials",placeholder:"e.g. JS",value:C,onChange:D=>A(D.target.value.toUpperCase()),onKeyDown:D=>{D.key==="Enter"&&z()},maxLength:4,className:"mt-1"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used to track your sample handling activities"})]}),t.jsxs(Z,{onClick:z,className:"w-full",disabled:C.trim().length<2,children:[t.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Start Using SAGA"]})]})]})}),t.jsx(Fr,{position:"top-right"})]})}const ai=document.getElementById("root");ai&&Zd.createRoot(ai).render(t.jsx(B.StrictMode,{children:t.jsx(Ty,{})}));
